{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/cohort/lib/sanity.ts"],"sourcesContent":["import { createClient } from '@sanity/client'\nimport imageUrlBuilder from '@sanity/image-url'\n\nconst projectId = process.env.NEXT_PUBLIC_SANITY_PROJECT_ID\nconst dataset = process.env.NEXT_PUBLIC_SANITY_DATASET || 'production'\n\n// Create client only if projectId is available\nlet clientInstance: ReturnType<typeof createClient> | null = null\n\nfunction getClient() {\n  if (!projectId) {\n    return null\n  }\n  \n  if (!clientInstance) {\n    clientInstance = createClient({\n      projectId,\n      dataset,\n      useCdn: true,\n      apiVersion: '2024-01-01',\n    })\n  }\n  \n  return clientInstance\n}\n\n// Create client directly instead of using Proxy to avoid potential issues\nexport const client = (() => {\n  if (!projectId) {\n    // Return a mock client that will throw on fetch\n    return {\n      fetch: async () => {\n        throw new Error(\n          'Missing NEXT_PUBLIC_SANITY_PROJECT_ID. Please add it to your .env.local file.'\n        )\n      }\n    } as any\n  }\n  return getClient()!\n})()\n\nconst builder = projectId ? imageUrlBuilder(getClient()!) : null\n\nexport function urlFor(source: any) {\n  if (!builder) {\n    throw new Error('Sanity is not configured. Please set NEXT_PUBLIC_SANITY_PROJECT_ID in .env.local')\n  }\n  return builder.image(source)\n}\n\n// GROQ query for all posts (only published, excluding drafts)\nexport const postsQuery = `*[_type == \"post\" && !(_id in path(\"drafts.**\"))] | order(publishedAt desc) {\n  _id,\n  title,\n  author,\n  publishedAt,\n  excerpt,\n  coverImage,\n  \"slug\": slug.current\n}`\n\n// GROQ query for single post (only published, excluding drafts)\nexport const postQuery = `*[_type == \"post\" && !(_id in path(\"drafts.**\")) && slug.current == $slug][0] {\n  _id,\n  title,\n  author,\n  publishedAt,\n  excerpt,\n  coverImage,\n  body,\n  \"slug\": slug.current\n}`\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEA,MAAM;AACN,MAAM,UAAU,kDAA0C;AAE1D,+CAA+C;AAC/C,IAAI,iBAAyD;AAE7D,SAAS;IACP;;IAIA,IAAI,CAAC,gBAAgB;QACnB,iBAAiB,IAAA,8LAAY,EAAC;YAC5B;YACA;YACA,QAAQ;YACR,YAAY;QACd;IACF;IAEA,OAAO;AACT;AAGO,MAAM,SAAS,CAAC;IACrB;;IAUA,OAAO;AACT,CAAC;AAED,MAAM,UAAU,uCAAY,IAAA,mLAAe,EAAC,eAAgB;AAErD,SAAS,OAAO,MAAW;IAChC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO,QAAQ,KAAK,CAAC;AACvB;AAGO,MAAM,aAAa,CAAC;;;;;;;;CAQ1B,CAAC;AAGK,MAAM,YAAY,CAAC;;;;;;;;;CASzB,CAAC"}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/cohort/app/insights/%5Bslug%5D/page.tsx"],"sourcesContent":["import { client, postQuery } from \"@/lib/sanity\";\nimport { notFound } from \"next/navigation\";\nimport Image from \"next/image\";\nimport { urlFor } from \"@/lib/sanity\";\nimport { PortableText } from \"@portabletext/react\";\nimport Navigation from \"@/components/Navigation\";\nimport Footer from \"@/components/Footer\";\nimport Link from \"next/link\";\n\nasync function getPost(slug: string) {\n  // Check if Sanity is configured\n  if (!process.env.NEXT_PUBLIC_SANITY_PROJECT_ID) {\n    console.log(\"[getPost] No NEXT_PUBLIC_SANITY_PROJECT_ID found\");\n    return null;\n  }\n  \n  console.log(\"[getPost] Looking for post with slug:\", slug);\n  \n  try {\n    const post = await client.fetch(postQuery, { slug });\n    console.log(\"[getPost] Found post:\", post ? post.title : \"null\");\n    if (post) {\n      console.log(\"[getPost] Post slug value:\", post.slug);\n    }\n    return post;\n  } catch (error) {\n    console.error(\"[getPost] Error fetching post:\", error);\n    if (error instanceof Error) {\n      console.error(\"[getPost] Error message:\", error.message);\n    }\n    return null;\n  }\n}\n\nexport async function generateMetadata({\n  params,\n}: {\n  params: Promise<{ slug: string }> | { slug: string };\n}) {\n  const resolvedParams = await Promise.resolve(params);\n  const post = await getPost(resolvedParams.slug);\n\n  if (!post) {\n    return {\n      title: \"Post Not Found - Cohort\",\n    };\n  }\n\n  return {\n    title: `${post.title} - Cohort Insights`,\n    description: post.excerpt || \"Read more on Cohort Insights\",\n  };\n}\n\nexport default async function PostPage({\n  params,\n}: {\n  params: Promise<{ slug: string }> | { slug: string };\n}) {\n  const resolvedParams = await Promise.resolve(params);\n  const post = await getPost(resolvedParams.slug);\n\n  if (!post) {\n    notFound();\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Navigation />\n      <article className=\"flex-grow\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-24\">\n          <Link\n            href=\"/insights\"\n            className=\"text-blue-600 hover:text-blue-800 mb-8 inline-block\"\n          >\n            ‚Üê Back to Insights\n          </Link>\n\n          <h1 className=\"text-4xl font-bold mb-6\">{post.title}</h1>\n\n          {(post.author || post.publishedAt) && (\n            <div className=\"flex items-center gap-4 text-gray-600 mb-8\">\n              {post.author && <span>By {post.author}</span>}\n              {post.publishedAt && (\n                <span>\n                  {new Date(post.publishedAt).toLocaleDateString(\"en-US\", {\n                    year: \"numeric\",\n                    month: \"long\",\n                    day: \"numeric\",\n                  })}\n                </span>\n              )}\n            </div>\n          )}\n\n          {post.coverImage && (\n            <div className=\"relative h-64 md:h-96 w-full mb-8\">\n              <Image\n                src={urlFor(post.coverImage).width(1200).height(600).url()}\n                alt={post.title}\n                fill\n                className=\"object-cover rounded-lg\"\n              />\n            </div>\n          )}\n\n          {post.excerpt && (\n            <p className=\"text-xl text-gray-600 mb-8 italic\">{post.excerpt}</p>\n          )}\n\n          <div className=\"prose prose-lg max-w-none\">\n            {post.body && <PortableText value={post.body} />}\n          </div>\n        </div>\n      </article>\n      <Footer />\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;AAEA,eAAe,QAAQ,IAAY;IACjC,gCAAgC;IAChC;;IAKA,QAAQ,GAAG,CAAC,yCAAyC;IAErD,IAAI;QACF,MAAM,OAAO,MAAM,uHAAM,CAAC,KAAK,CAAC,0HAAS,EAAE;YAAE;QAAK;QAClD,QAAQ,GAAG,CAAC,yBAAyB,OAAO,KAAK,KAAK,GAAG;QACzD,IAAI,MAAM;YACR,QAAQ,GAAG,CAAC,8BAA8B,KAAK,IAAI;QACrD;QACA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,IAAI,iBAAiB,OAAO;YAC1B,QAAQ,KAAK,CAAC,4BAA4B,MAAM,OAAO;QACzD;QACA,OAAO;IACT;AACF;AAEO,eAAe,iBAAiB,EACrC,MAAM,EAGP;IACC,MAAM,iBAAiB,MAAM,QAAQ,OAAO,CAAC;IAC7C,MAAM,OAAO,MAAM,QAAQ,eAAe,IAAI;IAE9C,IAAI,CAAC,MAAM;QACT,OAAO;YACL,OAAO;QACT;IACF;IAEA,OAAO;QACL,OAAO,GAAG,KAAK,KAAK,CAAC,kBAAkB,CAAC;QACxC,aAAa,KAAK,OAAO,IAAI;IAC/B;AACF;AAEe,eAAe,SAAS,EACrC,MAAM,EAGP;IACC,MAAM,iBAAiB,MAAM,QAAQ,OAAO,CAAC;IAC7C,MAAM,OAAO,MAAM,QAAQ,eAAe,IAAI;IAE9C,IAAI,CAAC,MAAM;QACT,IAAA,iMAAQ;IACV;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,oIAAU;;;;;0BACX,8OAAC;gBAAQ,WAAU;0BACjB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,0LAAI;4BACH,MAAK;4BACL,WAAU;sCACX;;;;;;sCAID,8OAAC;4BAAG,WAAU;sCAA2B,KAAK,KAAK;;;;;;wBAElD,CAAC,KAAK,MAAM,IAAI,KAAK,WAAW,mBAC/B,8OAAC;4BAAI,WAAU;;gCACZ,KAAK,MAAM,kBAAI,8OAAC;;wCAAK;wCAAI,KAAK,MAAM;;;;;;;gCACpC,KAAK,WAAW,kBACf,8OAAC;8CACE,IAAI,KAAK,KAAK,WAAW,EAAE,kBAAkB,CAAC,SAAS;wCACtD,MAAM;wCACN,OAAO;wCACP,KAAK;oCACP;;;;;;;;;;;;wBAMP,KAAK,UAAU,kBACd,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,wIAAK;gCACJ,KAAK,IAAA,uHAAM,EAAC,KAAK,UAAU,EAAE,KAAK,CAAC,MAAM,MAAM,CAAC,KAAK,GAAG;gCACxD,KAAK,KAAK,KAAK;gCACf,IAAI;gCACJ,WAAU;;;;;;;;;;;wBAKf,KAAK,OAAO,kBACX,8OAAC;4BAAE,WAAU;sCAAqC,KAAK,OAAO;;;;;;sCAGhE,8OAAC;4BAAI,WAAU;sCACZ,KAAK,IAAI,kBAAI,8OAAC,wLAAY;gCAAC,OAAO,KAAK,IAAI;;;;;;;;;;;;;;;;;;;;;;0BAIlD,8OAAC,gIAAM;;;;;;;;;;;AAGb"}}]
}