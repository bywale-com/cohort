(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,766482,(e,t,n)=>{function i(e,t,n){function i(){var d=Date.now()-s;d<t&&d>=0?l=setTimeout(i,t-d):(l=null,n||(a=e.apply(r,o),r=o=null))}null==t&&(t=100);var l,o,r,s,a,d=function(){r=this,o=arguments,s=Date.now();var d=n&&!l;return l||(l=setTimeout(i,t)),d&&(a=e.apply(r,o),r=o=null),a};return d.clear=function(){l&&(clearTimeout(l),l=null)},d.flush=function(){l&&(a=e.apply(r,o),r=o=null,clearTimeout(l),l=null)},d}i.debounce=i,t.exports=i},274789,(e,t,n)=>{"use strict";t.exports=function(e){for(var t=function(e){var t,n=(e.length+8>>6)+1,i=Array(16*n);for(t=0;t<16*n;t++)i[t]=0;for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(8*e.length+t)%4*8;i[t>>2]|=128<<(8*e.length+t)%4*8;var l=8*e.length;return i[16*n-2]=255&l,i[16*n-2]|=(l>>>8&255)<<8,i[16*n-2]|=(l>>>16&255)<<16,i[16*n-2]|=(l>>>24&255)<<24,i}(e),n=0x67452301,i=-0x10325477,l=-0x67452302,o=0x10325476,r=0;r<t.length;r+=16){var d=n,h=i,g=l,f=o;n=c(n,i,l,o,t[r+0],7,-0x28955b88),o=c(o,n,i,l,t[r+1],12,-0x173848aa),l=c(l,o,n,i,t[r+2],17,0x242070db),i=c(i,l,o,n,t[r+3],22,-0x3e423112),n=c(n,i,l,o,t[r+4],7,-0xa83f051),o=c(o,n,i,l,t[r+5],12,0x4787c62a),l=c(l,o,n,i,t[r+6],17,-0x57cfb9ed),i=c(i,l,o,n,t[r+7],22,-0x2b96aff),n=c(n,i,l,o,t[r+8],7,0x698098d8),o=c(o,n,i,l,t[r+9],12,-0x74bb0851),l=c(l,o,n,i,t[r+10],17,-42063),i=c(i,l,o,n,t[r+11],22,-0x76a32842),n=c(n,i,l,o,t[r+12],7,0x6b901122),o=c(o,n,i,l,t[r+13],12,-0x2678e6d),l=c(l,o,n,i,t[r+14],17,-0x5986bc72),i=c(i,l,o,n,t[r+15],22,0x49b40821),n=u(n,i,l,o,t[r+1],5,-0x9e1da9e),o=u(o,n,i,l,t[r+6],9,-0x3fbf4cc0),l=u(l,o,n,i,t[r+11],14,0x265e5a51),i=u(i,l,o,n,t[r+0],20,-0x16493856),n=u(n,i,l,o,t[r+5],5,-0x29d0efa3),o=u(o,n,i,l,t[r+10],9,0x2441453),l=u(l,o,n,i,t[r+15],14,-0x275e197f),i=u(i,l,o,n,t[r+4],20,-0x182c0438),n=u(n,i,l,o,t[r+9],5,0x21e1cde6),o=u(o,n,i,l,t[r+14],9,-0x3cc8f82a),l=u(l,o,n,i,t[r+3],14,-0xb2af279),i=u(i,l,o,n,t[r+8],20,0x455a14ed),n=u(n,i,l,o,t[r+13],5,-0x561c16fb),o=u(o,n,i,l,t[r+2],9,-0x3105c08),l=u(l,o,n,i,t[r+7],14,0x676f02d9),i=u(i,l,o,n,t[r+12],20,-0x72d5b376),n=p(n,i,l,o,t[r+5],4,-378558),o=p(o,n,i,l,t[r+8],11,-0x788e097f),l=p(l,o,n,i,t[r+11],16,0x6d9d6122),i=p(i,l,o,n,t[r+14],23,-0x21ac7f4),n=p(n,i,l,o,t[r+1],4,-0x5b4115bc),o=p(o,n,i,l,t[r+4],11,0x4bdecfa9),l=p(l,o,n,i,t[r+7],16,-0x944b4a0),i=p(i,l,o,n,t[r+10],23,-0x41404390),n=p(n,i,l,o,t[r+13],4,0x289b7ec6),o=p(o,n,i,l,t[r+0],11,-0x155ed806),l=p(l,o,n,i,t[r+3],16,-0x2b10cf7b),i=p(i,l,o,n,t[r+6],23,0x4881d05),n=p(n,i,l,o,t[r+9],4,-0x262b2fc7),o=p(o,n,i,l,t[r+12],11,-0x1924661b),l=p(l,o,n,i,t[r+15],16,0x1fa27cf8),i=p(i,l,o,n,t[r+2],23,-0x3b53a99b),n=m(n,i,l,o,t[r+0],6,-0xbd6ddbc),o=m(o,n,i,l,t[r+7],10,0x432aff97),l=m(l,o,n,i,t[r+14],15,-0x546bdc59),i=m(i,l,o,n,t[r+5],21,-0x36c5fc7),n=m(n,i,l,o,t[r+12],6,0x655b59c3),o=m(o,n,i,l,t[r+3],10,-0x70f3336e),l=m(l,o,n,i,t[r+10],15,-1051523),i=m(i,l,o,n,t[r+1],21,-0x7a7ba22f),n=m(n,i,l,o,t[r+8],6,0x6fa87e4f),o=m(o,n,i,l,t[r+15],10,-0x1d31920),l=m(l,o,n,i,t[r+6],15,-0x5cfebcec),i=m(i,l,o,n,t[r+13],21,0x4e0811a1),n=m(n,i,l,o,t[r+4],6,-0x8ac817e),o=m(o,n,i,l,t[r+11],10,-0x42c50dcb),l=m(l,o,n,i,t[r+2],15,0x2ad7d2bb),i=m(i,l,o,n,t[r+9],21,-0x14792c6f),n=s(n,d),i=s(i,h),l=s(l,g),o=s(o,f)}return a(n)+a(i)+a(l)+a(o)};var i="0123456789abcdef";function l(e,t){return 1&e|1&t|(e>>>1|t>>>1)<<1}function o(e,t){return(e>>>1^t>>>1)<<1|1&e^1&t}function r(e,t){return(e>>>1&t>>>1)<<1|1&e&(1&t)}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e){var t,n="";for(t=0;t<=3;t++)n+=i.charAt(e>>8*t+4&15)+i.charAt(e>>8*t&15);return n}function d(e,t,n,i,l,o){var r;return s((r=s(s(t,e),s(i,o)))<<l|r>>>32-l,n)}function c(e,t,n,i,o,s,a){return d(l(r(t,n),r(~t,i)),e,t,o,s,a)}function u(e,t,n,i,o,s,a){return d(l(r(t,i),r(n,~i)),e,t,o,s,a)}function p(e,t,n,i,l,r,s){return d(o(o(t,n),i),e,t,l,r,s)}function m(e,t,n,i,r,s,a){return d(o(n,l(t,~i)),e,t,r,s,a)}},126047,988942,e=>{"use strict";let t,n,i,l;var o,r=e.i(843476),s=e.i(500932),a=e.i(271645),d=e.i(677160),c=e.i(216024),u=e.i(548837),p=e.i(383066),m=e.i(447912),h=e.i(181625),g=e.i(948253),f=(0,g.default)(function(e,t,n){return t=t.toLowerCase(),e+(n?(0,h.default)(t):t)}),x=e.i(984199),b=(0,g.default)(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),y=e.i(540589),v=e.i(735962),j=e.i(398017),w=e.i(809054),S=e.i(101391);let C="structure",_=(0,d.defineLocaleResourceBundle)({locale:"en-US",namespace:C,resources:()=>e.A(353713)}),I=["_id","_type","_createdAt","_updatedAt","_rev"];function T(e,t,n=!1){return t.map(t=>(function e(t,n,i=!1){let[l,...o]=n;if(!("fields"in t))return"";let r=t.fields.find(e=>e.name===l);if(!r){if(!I.includes(l)){let e=`The current ordering config targeted the nonexistent field "${l}" on schema type "${t.name}". It should be one of ${t.fields.map(e=>e.name).join(", ")}`;if(i)throw Error(e);console.warn(e)}return""}if("to"in r.type&&"reference"===r.type.name){let t=r.type.to;return`${l}->{${t.map(t=>e(t,o)).join(",")}}`}let s=o.length>0&&e(r.type,o),a=s?`{${s}}`:"";return o.length>0?`${l}${a}`:l})(e,t.field.split("."),n)).join(", ")}class R extends Error{constructor(e,t,n,i){super(e),this.name="SerializeError";const l=typeof n>"u"?"<unknown>":`${n}`;this.path=(t||[]).concat(i?`${l} (${i})`:l)}withHelpUrl(e){return this.helpId=e,this}}let P="structure-node-id-required",E="structure-title-required",k={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:C}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},D=[k,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:C}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function F(e,t,n){return e instanceof A?e.serialize({path:n,index:t}):e}class A{constructor(e,t){this._context=e,this.spec=t||{}}action(e){return this.clone({action:e})}getAction(){return this.spec.action}intent(e){return this.clone({intent:e})}getIntent(){return this.spec.intent}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}group(e){return this.clone({group:e})}getGroup(){return this.spec.group}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}params(e){return this.clone({params:e})}getParams(){return this.spec.params}showAsAction(e=!0){return this.clone({showAsAction:!!e})}getShowAsAction(){return this.spec.showAsAction}serialize(e={path:[]}){let{title:t,action:n,intent:i}=this.spec;if(!t){let t="string"==typeof n?`action: "${n}"`:void 0;throw new R("`title` is required for menu item",e.path,e.index,t).withHelpUrl(E)}if(!n&&!i)throw new R(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,e.path,e.index,`"${t}"`).withHelpUrl("structure-action-or-intent-required");if(i&&n)throw new R("cannot set both `action` AND `intent`",e.path,e.index,`"${t}"`).withHelpUrl("structure-action-and-intent-mutually-exclusive");return{...this.spec,title:t}}clone(e){let t=new A(this._context);return t.spec={...this.spec,...e},t}}function M(e,{by:t,title:n,i18n:i},l){let o=new A(e).group("sorting").title(e.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:n}})).icon(m.SortIcon).action("setSortOrder").params({by:t,extendedProjection:l});return i&&(o=o.i18n(i)),o}function V(e,t){let{schema:n}=e,i="string"==typeof t?n.get(t):t;return i&&"orderings"in i?(i.orderings?i.orderings.concat(D):D).map(t=>M(e,t,T(i,t.by))):[]}function L(e,t,n){return e instanceof z?e.serialize({path:n,index:t}):e}class z{constructor(e,t){this._context=e,this._id=t?t.id:"",this._title=t?t.title:"",this._i18n=t?t.i18n:void 0}id(e){return new z(this._context,{id:e,title:this._title,i18n:this._i18n})}getId(){return this._id}title(e){return new z(this._context,{title:e,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(e){return new z(this._context,{i18n:e,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(e={path:[]}){if(!this._id)throw new R("`id` is required for a menu item group",e.path,e.index,this._title).withHelpUrl(P);if(!this._title)throw new R("`title` is required for a menu item group",e.path,this._id).withHelpUrl(E);return{id:this._id,title:this._title,i18n:this._i18n}}}let O=/([^A-Za-z0-9-_.])/;function B(e,t,n){if("string"!=typeof e)throw new R(`Structure node id must be of type string, got ${typeof e}`,t,n);let[i]=e.match(O)||[];if(i)throw new R(`Structure node id cannot contain character "${i}"`,t,n);if(e.startsWith("__edit__"))throw new R("Structure node id cannot start with __edit__",t,n);return e}function H(e,t){if(t)return t;let n=f(e);return O.test(n)?f((0,w.default)(e)):n}class ${constructor(e){this.spec={options:{},...e||{}}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:H(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(e){return this.clone({canHandleIntent:e})}serialize(e={path:[]}){let{id:t,title:n,child:i,options:l,component:o}=this.spec;if(!t)throw new R("`id` is required for `component` structure item",e.path,e.index).withHelpUrl(P);if(!o)throw new R("`component` is required for `component` structure item",e.path,e.index).withHelpUrl(P);return{id:B(t,e.path,e.index),title:n,type:"component",child:i,component:o,canHandleIntent:this.spec.canHandleIntent,options:l||{},menuItems:(this.spec.menuItems||[]).map((t,n)=>F(t,n,e.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((t,n)=>L(t,n,e.path))}}clone(e){let t=new $;return t.spec={...this.spec,...e},t}}class N{constructor(e){this.spec={id:(0,x.uniqueId)("__divider__"),type:"divider",...e}}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}serialize(){return{...this.spec}}clone(e){let t=new N;return t.spec={...this.spec,...e},t}}async function G(e,t){return await e(d.DEFAULT_STUDIO_CLIENT_OPTIONS).fetch("*[sanity::versionOf($publishedId)][0]._type",{publishedId:(0,c.getPublishedId)(t)},{tag:"structure.resolve-type"})}class U{spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:this.spec.id||b(e)})}getTitle(){return this.spec.title}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}serialize(e={path:[]}){let{id:t,title:n,icon:i}=this.spec;if(!t)throw new R("`id` is required for view item",e.path,e.index).withHelpUrl(P);if(!n)throw new R("`title` is required for view item",e.path,e.index).withHelpUrl(E);return{id:B(t,e.path,e.index),title:n,icon:i}}}function q(e,t,n){return"function"==typeof e.serialize?e.serialize({path:n,index:t}):e}class W extends U{constructor(e){const t=(e=>(0,d.isRecord)(e)&&"component"===e.type)(e)?{...e}:{options:{}};super(),this.spec=t;const n="function"==typeof e?e:this.spec.component;n&&(this.spec=this.component(n).spec)}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}serialize(e={path:[]}){let t=super.serialize(e),n=this.spec.component;if("function"!=typeof n)throw new R("`component` is required and must be a function for `component()` view item",e.path,e.index).withHelpUrl("structure-view-component-required");return{...t,component:n,options:this.spec.options||{},type:"component"}}clone(e){let t=new W;return t.spec={...this.spec,...e},t}}class K extends U{constructor(e){super(),this.spec={id:"editor",title:"Editor",...e||{}}}serialize(e={path:[]}){return{...super.serialize(e),type:"form"}}clone(e){let t=new K;return t.spec={...this.spec,...e},t}}let Y=e=>new K(e);var X=Object.freeze({__proto__:null,ComponentViewBuilder:W,FormViewBuilder:K,GenericViewBuilder:U,component:e=>new W(e),form:Y,maybeSerializeView:q});class J{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:H(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}documentId(e){let t=this.spec.id||e;return this.clone({id:t,options:{...this.spec.options,id:e}})}getDocumentId(){return this.spec.options?.id}schemaType(e){return this.clone({options:{...this.spec.options,type:"string"==typeof e?e:e.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(e,t){return this.clone({options:{...this.spec.options,template:e,templateParameters:t}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(e){return this.clone({views:e})}getViews(){return this.spec.views||[]}serialize({path:e=[],index:t,hint:n}={path:[]}){var i;let l,o=e[t||e.length-1],r=this.spec.id||o&&`${o}`||"",s={id:r,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof r||!r)throw new R("`id` is required for document nodes",e,t,n).withHelpUrl(P);if(!s||!s.id)throw new R("document id (`id`) is required for document nodes",e,r,n).withHelpUrl("structure-document-id-required");if(!s||!s.type)throw new R("document type (`schemaType`) is required for document nodes",e,r,n);let a=(this.spec.views&&this.spec.views.length>0?this.spec.views:[Y()]).map((t,n)=>q(t,n,e)),d=a.map(e=>e.id),c=(0,y.uniq)(d.filter((e,t)=>d.includes(e,t+1)));if(c.length>0)throw new R(`document node has views with duplicate IDs: ${c.join(",  ")}`,e,r,n);return{...this.spec,child:this.spec.child||(({resolveDocumentNode:e,getClient:t})=>async(n,{params:i,path:l})=>{let o=i.type,r=l.slice(0,l.length-1),s=l[l.length-1];if(o||(o=await G(t,n)),!o)throw new R("Failed to resolve document, and no type provided in parameters.",r,s);return e({documentId:n,schemaType:o})})(this._context),id:B(r,e,t),type:"document",options:(l={id:(i=s).id||"",type:i.type||"*"},i.template&&(l.template=i.template),i.templateParameters&&(l.templateParameters=i.templateParameters),l),views:a}}clone(e={}){let t=new J(this._context),n={...this.spec.options,...e.options};return t.spec={...this.spec,...e,options:n},t}}class Q{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}description(e){return this.clone({description:e})}getDescription(){return this.spec.description}templateId(e){let t=this.spec.id||e;return this.clone({id:t,templateId:e})}getTemplateId(){return this.spec.templateId}parameters(e){return this.clone({parameters:e})}getParameters(){return this.spec.parameters}serialize({path:e=[],index:t,hint:n}={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new R("`id` is required for initial value template item nodes",e,t,n).withHelpUrl(P);if(!this.spec.templateId)throw new R("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(P);let i=this._context.templates.find(e=>e.id===this.spec.templateId);if(!i)throw new R("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(P);return{id:this.spec.id,templateId:this.spec.id,schemaType:i.schemaType,type:"initialValueTemplateItem",description:this.spec.description||i.description,title:this.spec.title||i.title,subtitle:this.spec.subtitle,icon:this.spec.icon||i.icon,initialDocumentId:this.spec.initialDocumentId,parameters:this.spec.parameters}}clone(e={}){let t=new Q(this._context);return t.spec={...this.spec,...e},t}}let Z=Symbol("Document type list canHandleIntent"),ee=(e,t,{pane:n})=>{let i="create"===e,l=n.options?.filter||"",o=n.options?.params||{},r=n.schemaTypeName?[n.schemaTypeName]:er(l,o),s=n.initialValueTemplates||[];return i&&t.template?s.some(e=>e.templateId===t.template):"edit"===e&&t.id&&r.includes(t.type)||i&&r.includes(t.type)};ee.identity=Z;let et=["default","card","media","detail","block"];function en(){}let ei=(e,t,{pane:n,index:i})=>i<=1&&ee(e,t,{pane:n});class el{initialValueTemplatesSpecified=!1;spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:H(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}defaultLayout(e){return this.clone({defaultLayout:e})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}child(e){return this.clone({child:e})}getChild(){return this.spec.child}canHandleIntent(e){return this.clone({canHandleIntent:e})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcons:e}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(e){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(e)?e:[e]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(e={path:[]}){let t=this.spec.id||"",n=e.path,i=this.spec.defaultLayout;if(i&&!et.includes(i))throw new R(`\`layout\` must be one of ${et.map(e=>`"${e}"`).join(", ")}`,n,t||e.index,this.spec.title);let l=(this.spec.initialValueTemplates||[]).map((e,t)=>e instanceof Q?e.serialize({path:n,index:t}):e);return{id:B(t,e.path,t||e.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:i,child:this.spec.child||en,canHandleIntent:this.spec.canHandleIntent||ei,displayOptions:this.spec.displayOptions,initialValueTemplates:l,menuItems:(this.spec.menuItems||[]).map((e,t)=>F(e,t,n)),menuItemGroups:(this.spec.menuItemGroups||[]).map((e,t)=>L(e,t,n))}}}class eo extends el{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!t?.initialValueTemplates}apiVersion(e){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:e}})}getApiVersion(){return this.spec.options?.apiVersion}filter(e){return this.clone({options:{...this.spec.options,filter:e}})}getFilter(){return this.spec.options?.filter}schemaType(e){let t="string"==typeof e?e:e.name;return this.clone({schemaTypeName:t})}getSchemaType(){return this.spec.schemaTypeName}params(e){return this.clone({options:{...this.spec.options||{filter:""},params:e}})}getParams(){return this.spec.options?.params}defaultOrdering(e){if(!Array.isArray(e))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:e}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(e={path:[]}){let t;if("string"!=typeof this.spec.id||!this.spec.id)throw new R("`id` is required for document lists",e.path,e.index,this.spec.title).withHelpUrl(P);if(!this.spec.options||!this.spec.options.filter)throw new R("`filter` is required for document lists",e.path,this.spec.id,this.spec.title).withHelpUrl("structure-filter-required");return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,S.generateHelpUrl)("structure-api-version-required-for-custom-filter")),{...super.serialize(e),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||(t=this._context,(e,n)=>{let i=n.parent,l=n.params?.template?t.templates.find(e=>e.id===n.params.template):void 0;return Promise.resolve(l?l.schemaType:i.schemaTypeName||G(t.getClient,e)).then(n=>n?t.resolveDocumentNode({schemaType:n,documentId:e}):new J(t).id("editor").documentId(e).schemaType(""))}),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||d.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion,filter:((e,t)=>{let n=e.options?.filter.trim()||"";if(["*","{"].includes(n[0]))throw new R(`\`filter\` cannot start with \`${n[0]}\` - looks like you are providing a query, not a filter`,t.path,e.id,e.title).withHelpUrl("structure-query-provided-for-filter");return n})(this.spec,e)}}}clone(e){let t=new eo(this._context);return t.spec={...this.spec,...e},this.initialValueTemplatesSpecified||(t.spec.initialValueTemplates=function(e,t){let{document:n}=e,{schemaTypeName:i,options:l}=t,{filter:o,params:r}=l||{filter:"",params:{}},s=i?[i]:Array.from(new Set(er(o,r)));if(0!==s.length)return s.flatMap(e=>n.resolveNewDocumentOptions({type:"structure",schemaType:e})).map(e=>({...e,icon:m.AddIcon}))}(this._context,t.spec)),t.spec.schemaTypeName||(t.spec.schemaTypeName=function(e){let{options:t}=e,{filter:n,params:i}=t||{filter:"",params:{}},l=er(n,i);return 1===l.length?l[0]:void 0}(t.spec)),t}getSpec(){return this.spec}}function er(e,t={}){let n=function(e,t={}){let n,i=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,l=[];for(;null!==(n=i.exec(e));)l.push(n[1]||n[2]);return l.map(e=>(("$"===e[0]?t[e.slice(1)]:e)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(e,t);return 0===n.length&&(n=function(e,t={}){let n=e.match(/\b_type\s+in\s+\[(.*?)\]/);return n?n[1].split(/,\s*/).map(e=>e.trim().replace(/^["']+|["']+$/g,"")).map(e=>"$"===e[0]?t[e.slice(1)]:e).filter(Boolean):[]}(e,t)),n}let es=e=>"listItem"===e.type,ea=(e,t,n)=>(n.pane.items||[]).filter(em).some(e=>e.schemaType.name===t.type&&e._id===t.id)||ei(e,t,n),ed=(e,t)=>{let n=(t.parent.items.filter(es).find(t=>t.id===e)||{child:void 0}).child;return n&&"function"==typeof n&&"function"==typeof n?n(e,t):n};class ec extends el{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!(t&&t.initialValueTemplates)}items(e){return this.clone({items:e})}getItems(){return this.spec.items}serialize(e={path:[]}){let t=this.spec.id;if("string"!=typeof t||!t)throw new R("`id` is required for lists",e.path,e.index).withHelpUrl(P);let n=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(n))throw new R("`items` must be an array of items",e.path,e.index).withHelpUrl("structure-list-items-must-be-array");let i=(e.path||[]).concat(t),l=n.map((e,t)=>(function(e,t,n){if(e instanceof eu)return e.serialize({path:n,index:t});if(e instanceof N)return e.serialize();if(e&&"divider"===e.type)return e;if(!e||"listItem"!==e.type){var i;let l=e&&e.type||(e instanceof ec?"ListBuilder":(i=e,(0,d.isRecord)(i)&&"function"==typeof i.then)?"Promise":Array.isArray(e)?"array":typeof e);throw new R(`List items must be of type "listItem", got "${l}"${"array"===l?" - did you forget to spread (...moreItems)?":""}`,n,t).withHelpUrl("structure-invalid-list-item")}return e})(e,t,i)),o=l.filter((e,t)=>(0,v.find)(l,{id:e.id},t+1));if(o.length>0){let t=o.map(e=>e.id).slice(0,5),n=o.length>5?`${t.join(", ")}...`:t.join(", ");throw new R(`List items with same ID found (${n})`,e.path,e.index).withHelpUrl("structure-list-item-ids-must-be-unique")}return{...super.serialize(e),type:"list",canHandleIntent:this.spec.canHandleIntent||ea,child:this.spec.child||ed,items:l}}clone(e){let t=new ec(this._context);return t.spec={...this.spec,...e},t}}class eu{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:H(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}icon(e){return this.clone({icon:e})}showIcon(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcon:e}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(e){return this.clone({child:e})}getChild(){return this.spec.child}schemaType(e){return this.clone({schemaType:e})}getSchemaType(){let e=this.spec.schemaType;return"string"==typeof e?this._context.schema.get(e):this.spec.schemaType}serialize(e={path:[]}){let{id:t,title:n,child:i}=this.spec;if("string"!=typeof t||!t)throw new R("`id` is required for list items",e.path,e.index).withHelpUrl(P);if(!e.titleIsOptional&&("string"!=typeof n||!n))throw new R("`title` is required for list items",e.path,t).withHelpUrl(E);let l=this.spec.schemaType;if("string"==typeof l){let n=this._context.schema.get(l);if(!n)throw new R(`Could not find type "${l}" in schema`,e.path,t).withHelpUrl("structure-schema-type-not-found");l=n}let o={path:e.path.concat(t),hint:"child"},r=i instanceof $||i instanceof eo||i instanceof J||i instanceof ec?i.serialize(o):i;if("function"==typeof r){let e=r;r=(t,n)=>e(t,{...n,serializeOptions:o})}return{...this.spec,id:B(t,e.path,e.index),schemaType:l,child:r,title:n,type:"listItem"}}clone(e){let t=new eu(this._context);return t.spec={...this.spec,...e},t}}class ep extends eu{constructor(e,t){super(e,t),this._context=e,this.spec=t||{}}serialize(e={path:[]}){let t,n=super.serialize({...e,titleIsOptional:!0});if(!n.schemaType)throw new R("`schemaType` is required for document list items",e.path,e.index).withHelpUrl("structure-schema-type-required");let i=n.child||(t=this._context,e=>{let i=n.schemaType&&("string"==typeof n.schemaType?n.schemaType:n.schemaType.name);return i?t.resolveDocumentNode({schemaType:i,documentId:e}):new J(t).id("documentEditor").documentId(e)});return{...n,child:i,schemaType:n.schemaType,_id:n.id}}clone(e){let t=new ep(this._context);return t.spec={...this.spec,...e},t}}function em(e){return(0,d.isRecord)(e)&&"u">typeof e.schemaType&&"string"==typeof e._id}class eh extends eo{constructor(e,t){super(e),this._context=e,this.spec=t||{}}child(e){return this.cloneWithoutDefaultIntentHandler({child:e})}clone(e){let t=super.clone(e),n=new eh(this._context);return n.spec={...this.spec,...t.getSpec(),...e},n}cloneWithoutDefaultIntentHandler(e){let t=super.clone(e),n=new eh(this._context),i=this.spec.canHandleIntent,l=i&&i.identity===Z?{canHandleIntent:void 0}:{};return n.spec={...t.getSpec(),...this.spec,...e,...l},n}}let eg=["sanity.imageAsset","sanity.fileAsset"];function ef(e){return(function({schema:e}){return e.getTypeNames().filter(t=>{let n=e.get(t);return n&&n.type?.name==="document"}).filter(e=>!eg.includes(e))})(e).map(t=>ex(e,t))}function ex(e,t){let{schema:n}=e,i=n.get(t);if(!i)throw Error(`Schema type with name "${t}" not found`);let l=i.title||(0,j.startCase)(t);return new eu(e).id(t).title(l).schemaType(i).child((n,i)=>{let l=i.parent,o="list"===l.type?l.items.find(e=>e.id===n):null,r=eb(e,t);return o&&o.title&&(r=r.title(o.title)),r})}function eb(e,t){let{schema:n,resolveDocumentNode:i}=e,l="string"==typeof t?t:t.schemaType,o="string"==typeof l?l:l.name,r="string"==typeof t?{}:t,s=n.get(o);if(!s)throw Error(`Schema type with name "${o}" not found`);let a=s.title||(0,j.startCase)(o);return new eh(e).id(r.id||o).title(r.title||a).filter("_type == $type").params({type:o}).schemaType(s).defaultOrdering(k.by).menuItemGroups(r.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:C}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:C}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:C}}}]).child(r.child||(e=>i({schemaType:o,documentId:e}))).canHandleIntent(r.canHandleIntent||ee).menuItems(r.menuItems||[...V(e,s),new A(e).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:C}}).title("Compact view").icon(m.StackCompactIcon).action("setLayout").params({layout:"default"}),new A(e).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:C}}).title("Detailed view").icon(m.StackIcon).action("setLayout").params({layout:"detail"})])}function ey(e){let t,n,i,l,o,h=(0,s.c)(26),{defaultDocumentNode:g,structure:f,children:x}=e,[b,y]=(0,a.useState)(!1),v=(0,d.useSource)(),j=(0,d.useConfigContextFromSource)(v),w=(0,d.useDocumentStore)(),{perspectiveStack:S}=(0,d.usePerspective)();h[0]!==g||h[1]!==S||h[2]!==v?(t=function({defaultDocumentNode:e,source:t,perspectiveStack:n}){let i=(0,d.getConfigContextFromSource)(t),l={...t,getStructureBuilder:()=>o,resolveDocumentNode:t=>{let n=e?.(o,{...t,...i})||new J(l);return n.getId()||(n=n.id("documentEditor")),t.documentId&&(n=n.documentId((0,c.getPublishedId)(t.documentId))),n.schemaType(t.schemaType)},perspectiveStack:n},o={defaults:()=>{let e;return e=ef(l),new ec(l).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:C}}).items(e).showIcons(e.some(e=>{var t;return!!(t=e.getSchemaType())&&"string"!=typeof t&&!!t.icon}))},documentTypeList:(...e)=>eb(l,...e),documentTypeListItem:(...e)=>ex(l,...e),documentTypeListItems:(...e)=>ef(l,...e),document:(...e)=>new J(l,...e),documentWithInitialValueTemplate:(...e)=>(function({resolveDocumentNode:e,templates:t},n,i){let l=t.find(e=>e.id===n);if(!l)throw Error(`Template with ID "${n}" not defined`);return e({schemaType:l.schemaType}).initialValueTemplate(n,i)})(l,...e),defaultDocument:l.resolveDocumentNode,list:(...e)=>new ec(l,...e),listItem:(...e)=>new eu(l,...e),menuItem:(...e)=>new A(l,...e),menuItemGroup:(...e)=>new z(l,...e),menuItemsFromInitialValueTemplateItems:(...e)=>(function(e,t){let{schema:n,templates:i}=e;return t.map(t=>{let l=i.find(e=>e.id===t.templateId),o=t.title||l?.title||"Create",r={};l&&l.schemaType&&(r.type=l.schemaType),t.templateId&&(r.template=t.templateId);let s=t.parameters?[r,t.parameters]:r,a=l&&n.get(l.schemaType),d=t.i18n||l?.i18n,c=new A(e).title(o).icon(l&&l.icon||a?.icon||m.AddIcon).intent({type:"create",params:s});return d&&(c=c.i18n(d)),c.serialize()})})(l,...e),documentList:(...e)=>new eo(l,...e),documentListItem:(...e)=>new ep(l,...e),orderingMenuItem:(...e)=>M(l,...e),orderingMenuItemsForType:(...e)=>V(l,...e),editor:(...e)=>(function(e,t){let n=t?.type?e.resolveDocumentNode({schemaType:t.type}):new J(e);if(!t)return n;let{id:i,type:l,template:o,templateParameters:r}=t.options;return n=n.id(t.id).documentId(i),l&&(n=n.schemaType(l)),o&&(n=n.initialValueTemplate(o,r)),t.child&&(n=n.child(t.child)),n})(l,...e),defaultInitialValueTemplateItems:(...e)=>(function(e){let{schema:t,getStructureBuilder:n,templates:i}=e,l=t.getTypeNames();return i.filter(e=>!e.parameters?.length).sort((e,t)=>l.indexOf(e.schemaType)-l.indexOf(t.schemaType)).map(e=>n().initialValueTemplateItem(e.id))})(l,...e),initialValueTemplateItem:(e,t)=>new Q(l,{id:e,parameters:t,templateId:e}),component:e=>(0,p.isValidElementType)(e)?new $().component(e):new $(e),divider:e=>new N(e),view:X,context:l};return o}({defaultDocumentNode:g,source:v,perspectiveStack:S}),h[0]=g,h[1]=S,h[2]=v,h[3]=t):t=h[3];let _=t;e:{let e;if(f){let e;h[4]!==_||h[5]!==j||h[6]!==w||h[7]!==S||h[8]!==f?(e=f(_,{...j,documentStore:w,perspectiveStack:S}),h[4]=_,h[5]=j,h[6]=w,h[7]=S,h[8]=f,h[9]=e):e=h[9],n=e;break e}h[10]!==_?(e=_.defaults(),h[10]=_,h[11]=e):e=h[11],n=e}let I=n,T=!b,R=!b,P=!b,E=!b;h[12]!==b||h[13]!==T||h[14]!==R||h[15]!==P||h[16]!==E?(i={backButton:b,resizablePanes:T,reviewChanges:R,splitPanes:P,splitViews:E},h[12]=b,h[13]=T,h[14]=R,h[15]=P,h[16]=E,h[17]=i):i=h[17];let k=i;h[18]!==_.context||h[19]!==k||h[20]!==b||h[21]!==I?(l={features:k,layoutCollapsed:b,setLayoutCollapsed:y,rootPaneNode:I,structureContext:_.context},h[18]=_.context,h[19]=k,h[20]=b,h[21]=I,h[22]=l):l=h[22];let D=l;return h[23]!==x||h[24]!==D?(o=(0,r.jsx)(u.StructureToolContext.Provider,{value:D,children:x}),h[23]=x,h[24]=D,h[25]=o):o=h[25],o}e.s(["SerializeError",()=>R,"StructureToolProvider",()=>ey,"getExtendedProjection",()=>T,"structureLocaleNamespace",()=>C,"structureUsEnglishLocaleBundle",()=>_],988942);var ev=e.i(263486),ej=e.i(341085),ew=e.i(537634),eS=e.i(364308),eC=e.i(963647),e_=e.i(997053),eI=e.i(433483),eT=e.i(846932),eR=e.i(88653),eP=e.i(597083),eE=e.i(528696),ek=e.i(567e3),eD=e.i(128676),eF=e.i(856179),eA=e.i(666133),eA=eA,eM=e.i(421634),eV=e.i(61510),eL=e.i(343894),ez=e.i(368233),eO=e.i(100374),eB=e.i(449242),eH=e.i(94059),e$=e.i(992481),eN=e.i(58832),eG=e.i(827492),eU=e.i(218692),eq=e.i(374e3),eW=e.i(134352),eK=e.i(827341),eY=e.i(711308),eX=e.i(960739),eJ=e.i(722249),eQ=e.i(10839),eZ=e.i(484973),e0=e.i(277497),e1=e.i(800879),e2=e.i(408659),e3=e.i(245281),e4=e.i(993817),e5=e.i(602400),e6=e.i(839338),e8=e.i(878856),e7=e.i(330823),e9=e.i(807136),te=e.i(817312),tt=e.i(96623),tn=e.i(172441),ti=e.i(254201),tl=e.i(873904),to=e.i(55083),tr=e.i(629437),ts=e.i(789196),ta=e.i(424981),td=e.i(714494),tc=e.i(733327),tu=e.i(482065),tp=e.i(645456);let tm=({clientWidth:e,clientHeight:t,scrollWidth:n,scrollHeight:i})=>i>t||n>e,th=e=>{let t=window.getComputedStyle(e).overflow;return t.includes("auto")||t.includes("scroll")},tg=e=>{if(null==e)return{x:0,y:0};let{scrollTop:t,scrollHeight:n,clientHeight:i,scrollLeft:l,scrollWidth:o,clientWidth:r}=e;return{x:l?l/Math.max(1e-5,o-r):0,y:t?t/Math.max(1e-5,n-i):0}};function tf(){return(tf=Object.assign.bind()).apply(null,arguments)}function tx(e){return e.matches("body *")?e:window}class tb{constructor(e,t={}){var n,i=this;this.elements=void 0,this.defaults={vertical:!0,horizontal:!0,debug:!0},this.options=void 0,this.paused=!1,this.logger=void 0,this.handleScroll=async function(e){if(i.paused||!e.currentTarget)return;let t=i.getScrollContainer(e.currentTarget);await new Promise(e=>{requestAnimationFrame(()=>e())}),i.mirrorScrollPositions(tg(t),t)},this.elements=[...e].filter(Boolean).map(e=>this.getScrollContainer(e)),this.elements=[...new Set(this.elements)],this.options=tf({},this.defaults,t),this.options.debug&&(this.logger=(n="[scroll-mirror]",{log:(...e)=>console.log(n,...e),warn:(...e)=>console.warn(n,...e),error:(...e)=>console.error(n,...e)}),function(e,t){if(e.length<1)null==t||t.warn("No elements provided.");else for(let n of(e.length<2&&(null==t||t.warn("Only one element provided.",e)),e.some(e=>!e)&&(null==t||t.error("Some elements are not defined.",e)),e))n instanceof HTMLElement&&!tm(n)&&(null==t||t.warn("Element doesn't have overflow:",n)),n instanceof HTMLElement&&n.matches("body *")&&!th(n)&&(null==t||t.warn('No "overflow: auto;" or "overflow: scroll;" set on element:',n))}(this.elements,this.logger)),this.elements.forEach(e=>this.addScrollHandler(e)),this.elements.includes(document.documentElement)&&this.mirrorScrollPositions(tg(document.documentElement),document.documentElement)}pause(){this.paused=!0}resume(){this.paused=!1}destroy(){this.elements.forEach(e=>this.removeScrollHandler(e))}addScrollHandler(e){this.removeScrollHandler(e),tx(e).addEventListener("scroll",this.handleScroll,{passive:!0})}removeScrollHandler(e){tx(e).removeEventListener("scroll",this.handleScroll)}getScrollContainer(e){return e instanceof HTMLElement&&e.matches("body *")?e:document.documentElement}mirrorScrollPositions(e,t){this.elements.forEach(n=>{t!==n&&(this.removeScrollHandler(n),this.setScrollPosition(e,n),window.requestAnimationFrame(()=>{this.addScrollHandler(n)}))})}setScrollPosition(e,t){let{vertical:n,horizontal:i}=this.options,l=t.scrollWidth-t.clientWidth,o=t.scrollHeight-t.clientHeight;n&&o&&t.scrollTo({top:o*e.y,behavior:"instant"}),i&&l&&t.scrollTo({left:l*e.x,behavior:"instant"})}get progress(){return tg(this.elements.find(e=>tm(e)))}set progress(e){"number"==typeof e&&(e={x:e,y:e});let t=tf({},this.progress,e);(function(e,t){let n=!0;for(let[i,l]of Object.entries(e))("number"!=typeof l||l<0||l>1)&&(null==t||t.error(`progress.${i} must be a number between 0-1`),n=!1);return n})(t,this.logger)&&this.mirrorScrollPositions(t)}}var ty=e.i(432892),tv=e.i(224019),tj=a,tw=e.i(766482),tS=e.i(274789);let tC=Math.ceil(10*Math.random());function t_(e){return Object.prototype.toString.call(e).slice(8,-1)}function tI(e){let t=t_(e);return"Object"!==t&&"Array"!==t}class tT extends tj.Component{shouldComponentUpdate(e){return e.highlight!==this.props.highlight}render(){let e=this.props.string||"",t=this.props.highlight||"",n=e.search(t);if(!t||-1===n)return(0,r.jsx)("span",{children:e});let i=t.source.length,l=e.slice(n,n+i);return(0,r.jsx)("span",{children:e.split(t).map(function(e,t){return(0,r.jsxs)("span",{children:[t>0?(0,r.jsx)("span",{className:"json-inspector__hl",children:l}):null,e]},t)})})}}function tR(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}class tP extends tj.Component{constructor(e){super(e),this.state={expanded:this._isInitiallyExpanded(this.props)}}render(){let{label:e,data:t,root:n,id:i}=this.props,l="id_"+ ++tC,o={path:this.keypath(),key:e.toString(),value:t},s=this._onClick.bind(this,o);return(0,r.jsxs)("div",{"data-testid":n?"leaf-root":"leaf-child","aria-expanded":this.state.expanded,"data-root":n||void 0,className:this.getClassName(),id:"leaf-"+this._rootPath(),children:[(0,r.jsx)("input",{className:"json-inspector__radio",type:"radio",name:l,id:i,tabIndex:-1}),(0,r.jsxs)("label",{className:"json-inspector__line",htmlFor:l,onClick:s,children:[(0,r.jsx)("div",{className:"json-inspector__flatpath",children:o.path}),(0,r.jsxs)("span",{className:"json-inspector__key",children:[this.format(o.key),":",this.renderInteractiveLabel(o.key,!0)]}),this.renderTitle(),this.renderShowOriginalButton()]}),this.renderChildren()]})}renderTitle(){var e,t;let n=this.data(),i=t_(n);if(Array.isArray(n)){let t=n.length;return(0,r.jsxs)("span",{className:"json-inspector__value json-inspector__value_helper",children:[t>0?"[…] ":"[] ",(e=t)+(1===e?" item":" items")]})}if("object"==typeof n&&null!==n){let e=Object.keys(n).length;return(0,r.jsxs)("span",{className:"json-inspector__value json-inspector__value_helper",children:[e>0?"{…} ":"{} ",(t=e)+(1===t?" property":" properties")]})}return(0,r.jsxs)("span",{className:"json-inspector__value json-inspector__value_"+i.toLowerCase(),children:[this.format(String(n)),this.renderInteractiveLabel(n,!1)]})}renderChildren(){let{verboseShowOriginal:e,query:t,id:n,isExpanded:i,interactiveLabel:l,onClick:o,getOriginal:s}=this.props,a=this._rootPath(),d=this.data();return this.state.expanded&&(tR(d)||Array.isArray(d))?Object.keys(d).map(c=>{var u,p;let m=d[c],h=!this.state.original||!!e&&t;return(0,r.jsx)(tP,{data:m,label:c,prefix:a,onClick:o,id:n,query:t,getOriginal:h?s:void 0,isExpanded:i,interactiveLabel:l,verboseShowOriginal:e},(u=c,tI(p=m)?u+":"+(0,tS.default)(String(p)):u+"["+t_(p)+"]"))}):null}renderShowOriginalButton(){let{data:e,getOriginal:t,query:n}=this.props;return tI(e)||this.state.original||!t||!n||n.test(this.keypath())?null:(0,r.jsx)("span",{className:"json-inspector__show-original",onClick:this._onShowOriginalClick})}renderInteractiveLabel(e,t){let n=this.props.interactiveLabel;return"function"==typeof n?(0,r.jsx)(n,{value:String(e),originalValue:e,isKey:t,keypath:this.keypath()}):null}static getDerivedStateFromProps(e,t){return e.query?{expanded:!e.query.test(e.label)}:null}componentDidUpdate(e){e.query&&!this.props.query&&this.setState({expanded:this._isInitiallyExpanded(this.props)})}_rootPath(){return(this.props.prefix||"")+"."+this.props.label}keypath(){return this._rootPath().slice(6)}data(){return this.state.original||this.props.data}format(e){return(0,r.jsx)(tT,{string:e,highlight:this.props.query})}getClassName(){let e="json-inspector__leaf";return this.props.root&&(e+=" json-inspector__leaf_root"),this.state.expanded&&(e+=" json-inspector__leaf_expanded"),tI(this.props.data)||(e+=" json-inspector__leaf_composite"),e}toggle(){this.setState({expanded:!this.state.expanded})}_onClick(e,t){this.toggle(),this.props.onClick&&this.props.onClick(e),t.stopPropagation()}_onShowOriginalClick=e=>{this.setState({original:this.props.getOriginal?.(this.keypath())}),e.stopPropagation()};_isInitiallyExpanded(e){if(e.root)return!0;let t=this.keypath();return e.query?!e.query.test(t)&&"function"==typeof e.getOriginal:!!e.isExpanded&&e.isExpanded(t,e.data)}}let tE=(...e)=>{},tk=({onChange:e=tE})=>{let t=(0,tj.useCallback)(t=>e(t.target.value),[e]);return(0,r.jsx)("input",{className:"json-inspector__search",type:"search",placeholder:"Search",onChange:t})};function tD(e){return tR(e)?0===Object.keys(e).length:Array.isArray(e)?0===e.length:null===e||"string"!=typeof e||"number"!=typeof e||0===Object.keys(e).length}let tF=(o=(e,t)=>{let n=t||{cacheResults:!0},i={};return function(t){let l;if(!n.cacheResults)return tA(e,t,n);if(!i[t]){for(var o=t.length-1;o>0;o-=1)if(i[l=t.slice(0,o)]){i[t]=tA(i[l],t,n);break}}return i[t]||(i[t]=tA(e,t,n)),i[t]}},(e,t)=>(l&&e===n&&t===i||(n=e,i=t,l=o(e,t)),l));function tA(e,t,n){return tR(e)||Array.isArray(e)?Object.keys(e).reduce(function(i,l){let o,r=e[l];return r&&("object"!=typeof r?(tM(t,l,n)||tM(t,r,n))&&(i[l]=r):tM(t,l,n)?i[l]=r:tD(o=tA(r,t,n))||Object.assign(i,{[l]:o})),i},{}):{}}function tM(e,t,n){if(!t)return!1;var i=String(t),l=e;return n?.ignoreCase&&(i=i.toLowerCase(),l=l.toLowerCase()),-1!==i.indexOf(l)}function tV(e){return parseInt(e,10)}let tL=e=>e.length>=2,tz={cacheResults:!0,ignoreCase:!1};class tO extends tj.Component{static defaultProps={data:null,search:tk,searchOptions:{debounceTime:0},className:"",id:"json-"+Date.now(),onClick:tE,filterOptions:{cacheResults:!0,ignoreCase:!1},validateQuery:function(e){return e.length>=2},isExpanded:function(e,t){return!1},verboseShowOriginal:!1};constructor(e){super(e),this.state={query:"",filterer:tF(e.data,e.filterOptions)}}render(){let{data:e,className:t,onClick:n,id:i,isExpanded:l,interactiveLabel:o,verboseShowOriginal:s,filterOptions:a=tz,validateQuery:d=tL}=this.props,c=""!==this.state.query&&d(this.state.query),u=c?this.state.filterer(this.state.query):e,p=c&&tD(u);return(0,r.jsxs)("div",{"data-testid":"json-inspector",className:"json-inspector "+t,children:[this.renderToolbar(),p?(0,r.jsx)("div",{className:"json-inspector__not-found",children:"Nothing found"}):(0,r.jsx)(tP,{data:u,onClick:n,id:i,getOriginal:this.getOriginal,query:c?new RegExp(this.state.query,a.ignoreCase?"i":""):null,label:"root",root:!0,isExpanded:l,interactiveLabel:o,verboseShowOriginal:s})]})}renderToolbar(){let e=this.props.search;return e?(0,r.jsx)("div",{className:"json-inspector__toolbar",children:(0,r.jsx)(e,{onChange:(0,tw.default)(this.search,this.props.searchOptions?.debounceTime),data:this.props.data,query:this.state.query})}):null}search=e=>{this.setState({query:e})};static getDerivedStateFromProps(e,t){let n=tF(e.data,e.filterOptions);return n===t.filterer?null:{...t,filterer:n}}shouldComponentUpdate(e,t){return t.query!==this.state.query||e.data!==this.props.data||e.onClick!==this.props.onClick}createFilterer=(e,t)=>{this.setState({filterer:tF(e,t)})};getOriginal=e=>(function e(t,n){var i=n.split("."),l=i.shift();return l?Array.isArray(t)&&t[tV(l)]?e(t[tV(l)],i.join(".")):tR(t)&&l in t?e(t[l],i.join(".")):void 0:t})(this.props.data,e)}var tB=e.i(760719),tH=e.i(671857),t$=e.i(433331),tN=e.i(974875),tG=e.i(401851),tU=e.i(47635),tq=e.i(83107),tW=e.i(945736),tK=e.i(991426),tY=e.i(408551);function tX(e,t){return"function"==typeof e?e(t):e}function tJ(e,t){return n=>{t.setState(t=>({...t,[e]:tX(n,t[e])}))}}function tQ(e){return e instanceof Function}function tZ(e,t,n){let i,l=[];return o=>{let r,s;n.key&&n.debug&&(r=Date.now());let a=e(o);if(!(a.length!==l.length||a.some((e,t)=>l[t]!==e)))return i;if(l=a,n.key&&n.debug&&(s=Date.now()),i=t(...a),null==n||null==n.onChange||n.onChange(i),n.key&&n.debug&&null!=n&&n.debug()){let e=Math.round((Date.now()-r)*100)/100,t=Math.round((Date.now()-s)*100)/100,i=t/16,l=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%c⏱ ${l(t,5)} /${l(e,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*i,120))}deg 100% 31%);`,null==n?void 0:n.key)}return i}}function t0(e,t,n,i){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:i}}e.i(247167);let t1="debugHeaders";function t2(e,t,n){var i;let l={id:null!=(i=n.id)?i:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(l),e},getContext:()=>({table:e,header:l,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(l,e)}),l}function t3(e,t,n,i){var l,o;let r=0,s=function(e,t){void 0===t&&(t=1),r=Math.max(r,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&s(e.columns,t+1)},0)};s(e);let a=[],d=(e,t)=>{let l={depth:t,id:[i,`${t}`].filter(Boolean).join("_"),headers:[]},o=[];e.forEach(e=>{let r,s=[...o].reverse()[0],a=e.column.depth===l.depth,d=!1;if(a&&e.column.parent?r=e.column.parent:(r=e.column,d=!0),s&&(null==s?void 0:s.column)===r)s.subHeaders.push(e);else{let l=t2(n,r,{id:[i,t,r.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:d,placeholderId:d?`${o.filter(e=>e.column===r).length}`:void 0,depth:t,index:o.length});l.subHeaders.push(e),o.push(l)}l.headers.push(e),e.headerGroup=l}),a.push(l),t>0&&d(o,t-1)};d(t.map((e,t)=>t2(n,e,{depth:r,index:t})),r-1),a.reverse();let c=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,i=[0];return e.subHeaders&&e.subHeaders.length?(i=[],c(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:l}=e;t+=n,i.push(l)})):t=1,n+=Math.min(...i),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return c(null!=(l=null==(o=a[0])?void 0:o.headers)?l:[]),a}let t4=(e,t,n,i,l,o,r)=>{let s={id:t,index:i,original:n,depth:l,parentId:r,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(s._valuesCache.hasOwnProperty(t))return s._valuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return s._valuesCache[t]=n.accessorFn(s.original,i),s._valuesCache[t]},getUniqueValues:t=>{if(s._uniqueValuesCache.hasOwnProperty(t))return s._uniqueValuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return n.columnDef.getUniqueValues?s._uniqueValuesCache[t]=n.columnDef.getUniqueValues(s.original,i):s._uniqueValuesCache[t]=[s.getValue(t)],s._uniqueValuesCache[t]},renderValue:t=>{var n;return null!=(n=s.getValue(t))?n:e.options.renderFallbackValue},subRows:null!=o?o:[],getLeafRows:()=>{var e,t;let n,i;return e=s.subRows,t=e=>e.subRows,n=[],(i=e=>{e.forEach(e=>{n.push(e);let l=t(e);null!=l&&l.length&&i(l)})})(e),n},getParentRow:()=>s.parentId?e.getRow(s.parentId,!0):void 0,getParentRows:()=>{let e=[],t=s;for(;;){let n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:tZ(()=>[e.getAllLeafColumns()],t=>t.map(t=>{var n;let i;return n=t.id,i={id:`${s.id}_${t.id}`,row:s,column:t,getValue:()=>s.getValue(n),renderValue:()=>{var t;return null!=(t=i.getValue())?t:e.options.renderFallbackValue},getContext:tZ(()=>[e,t,s,i],(e,t,n,i)=>({table:e,column:t,row:n,cell:i,getValue:i.getValue,renderValue:i.renderValue}),t0(e.options,"debugCells","cell.getContext"))},e._features.forEach(n=>{null==n.createCell||n.createCell(i,t,s,e)},{}),i}),t0(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:tZ(()=>[s.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),t0(e.options,"debugRows","getAllCellsByColumnId"))};for(let t=0;t<e._features.length;t++){let n=e._features[t];null==n||null==n.createRow||n.createRow(s,e)}return s},t5=(e,t,n)=>{var i,l;let o=null==n||null==(i=n.toString())?void 0:i.toLowerCase();return!!(null==(l=e.getValue(t))||null==(l=l.toString())||null==(l=l.toLowerCase())?void 0:l.includes(o))};t5.autoRemove=e=>no(e);let t6=(e,t,n)=>{var i;return!!(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.includes(n))};t6.autoRemove=e=>no(e);let t8=(e,t,n)=>{var i;return(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.toLowerCase())===(null==n?void 0:n.toLowerCase())};t8.autoRemove=e=>no(e);let t7=(e,t,n)=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)};t7.autoRemove=e=>no(e);let t9=(e,t,n)=>!n.some(n=>{var i;return!(null!=(i=e.getValue(t))&&i.includes(n))});t9.autoRemove=e=>no(e)||!(null!=e&&e.length);let ne=(e,t,n)=>n.some(n=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)});ne.autoRemove=e=>no(e)||!(null!=e&&e.length);let nt=(e,t,n)=>e.getValue(t)===n;nt.autoRemove=e=>no(e);let nn=(e,t,n)=>e.getValue(t)==n;nn.autoRemove=e=>no(e);let ni=(e,t,n)=>{let[i,l]=n,o=e.getValue(t);return o>=i&&o<=l};ni.resolveFilterValue=e=>{let[t,n]=e,i="number"!=typeof t?parseFloat(t):t,l="number"!=typeof n?parseFloat(n):n,o=null===t||Number.isNaN(i)?-1/0:i,r=null===n||Number.isNaN(l)?1/0:l;if(o>r){let e=o;o=r,r=e}return[o,r]},ni.autoRemove=e=>no(e)||no(e[0])&&no(e[1]);let nl={includesString:t5,includesStringSensitive:t6,equalsString:t8,arrIncludes:t7,arrIncludesAll:t9,arrIncludesSome:ne,equals:nt,weakEquals:nn,inNumberRange:ni};function no(e){return null==e||""===e}function nr(e,t,n){return!!e&&!!e.autoRemove&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}let ns={sum:(e,t,n)=>n.reduce((t,n)=>{let i=n.getValue(e);return t+("number"==typeof i?i:0)},0),min:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i>n||void 0===i&&n>=n)&&(i=n)}),i},max:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i<n||void 0===i&&n>=n)&&(i=n)}),i},extent:(e,t,n)=>{let i,l;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(void 0===i?n>=n&&(i=l=n):(i>n&&(i=n),l<n&&(l=n)))}),[i,l]},mean:(e,t)=>{let n=0,i=0;if(t.forEach(t=>{let l=t.getValue(e);null!=l&&(l*=1)>=l&&(++n,i+=l)}),n)return i/n},median:(e,t)=>{if(!t.length)return;let n=t.map(t=>t.getValue(e));if(!(Array.isArray(n)&&n.every(e=>"number"==typeof e)))return;if(1===n.length)return n[0];let i=Math.floor(n.length/2),l=n.sort((e,t)=>e-t);return n.length%2!=0?l[i]:(l[i-1]+l[i])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},na=()=>({left:[],right:[]}),nd={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},nc=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),nu=null;function np(e){return"touchstart"===e.type}function nm(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}let nh=()=>({pageIndex:0,pageSize:10}),ng=()=>({top:[],bottom:[]}),nf=(e,t,n,i,l)=>{var o;let r=l.getRow(t,!0);n?(r.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),r.getCanSelect()&&(e[t]=!0)):delete e[t],i&&null!=(o=r.subRows)&&o.length&&r.getCanSelectSubRows()&&r.subRows.forEach(t=>nf(e,t.id,n,i,l))};function nx(e,t){let n=e.getState().rowSelection,i=[],l={},o=function(e,t){return e.map(e=>{var t;let r=nb(e,n);if(r&&(i.push(e),l[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:o(e.subRows)}),r)return e}).filter(Boolean)};return{rows:o(t.rows),flatRows:i,rowsById:l}}function nb(e,t){var n;return null!=(n=t[e.id])&&n}function ny(e,t,n){var i;if(!(null!=(i=e.subRows)&&i.length))return!1;let l=!0,o=!1;return e.subRows.forEach(e=>{if((!o||l)&&(e.getCanSelect()&&(nb(e,t)?o=!0:l=!1),e.subRows&&e.subRows.length)){let n=ny(e,t);"all"===n?o=!0:("some"===n&&(o=!0),l=!1)}}),l?"all":!!o&&"some"}let nv=/([0-9]+)/gm;function nj(e,t){return e===t?0:e>t?1:-1}function nw(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function nS(e,t){let n=e.split(nv).filter(Boolean),i=t.split(nv).filter(Boolean);for(;n.length&&i.length;){let e=n.shift(),t=i.shift(),l=parseInt(e,10),o=parseInt(t,10),r=[l,o].sort();if(isNaN(r[0])){if(e>t)return 1;if(t>e)return -1;continue}if(isNaN(r[1]))return isNaN(l)?-1:1;if(l>o)return 1;if(o>l)return -1}return n.length-i.length}let nC={alphanumeric:(e,t,n)=>nS(nw(e.getValue(n)).toLowerCase(),nw(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>nS(nw(e.getValue(n)),nw(t.getValue(n))),text:(e,t,n)=>nj(nw(e.getValue(n)).toLowerCase(),nw(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>nj(nw(e.getValue(n)),nw(t.getValue(n))),datetime:(e,t,n)=>{let i=e.getValue(n),l=t.getValue(n);return i>l?1:i<l?-1:0},basic:(e,t,n)=>nj(e.getValue(n),t.getValue(n))},n_=[{createTable:e=>{e.getHeaderGroups=tZ(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>{var o,r;let s=null!=(o=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?o:[],a=null!=(r=null==l?void 0:l.map(e=>n.find(t=>t.id===e)).filter(Boolean))?r:[];return t3(t,[...s,...n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),...a],e)},t0(e.options,t1,"getHeaderGroups")),e.getCenterHeaderGroups=tZ(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>t3(t,n=n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),e,"center"),t0(e.options,t1,"getCenterHeaderGroups")),e.getLeftHeaderGroups=tZ(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,i)=>{var l;return t3(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"left")},t0(e.options,t1,"getLeftHeaderGroups")),e.getRightHeaderGroups=tZ(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,i)=>{var l;return t3(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"right")},t0(e.options,t1,"getRightHeaderGroups")),e.getFooterGroups=tZ(()=>[e.getHeaderGroups()],e=>[...e].reverse(),t0(e.options,t1,"getFooterGroups")),e.getLeftFooterGroups=tZ(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),t0(e.options,t1,"getLeftFooterGroups")),e.getCenterFooterGroups=tZ(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),t0(e.options,t1,"getCenterFooterGroups")),e.getRightFooterGroups=tZ(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),t0(e.options,t1,"getRightFooterGroups")),e.getFlatHeaders=tZ(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),t0(e.options,t1,"getFlatHeaders")),e.getLeftFlatHeaders=tZ(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),t0(e.options,t1,"getLeftFlatHeaders")),e.getCenterFlatHeaders=tZ(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),t0(e.options,t1,"getCenterFlatHeaders")),e.getRightFlatHeaders=tZ(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),t0(e.options,t1,"getRightFlatHeaders")),e.getCenterLeafHeaders=tZ(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),t0(e.options,t1,"getCenterLeafHeaders")),e.getLeftLeafHeaders=tZ(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),t0(e.options,t1,"getLeftLeafHeaders")),e.getRightLeafHeaders=tZ(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),t0(e.options,t1,"getRightLeafHeaders")),e.getLeafHeaders=tZ(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var i,l,o,r,s,a;return[...null!=(i=null==(l=e[0])?void 0:l.headers)?i:[],...null!=(o=null==(r=t[0])?void 0:r.headers)?o:[],...null!=(s=null==(a=n[0])?void 0:a.headers)?s:[]].map(e=>e.getLeafHeaders()).flat()},t0(e.options,t1,"getLeafHeaders"))}},{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:tJ("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,i;let l=e.columns;return null==(n=l.length?l.some(e=>e.getIsVisible()):null==(i=t.getState().columnVisibility)?void 0:i[e.id])||n},e.getCanHide=()=>{var n,i;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(i=t.options.enableHiding)||i)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=tZ(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),t0(t.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=tZ(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],t0(t.options,"debugRows","getVisibleCells"))},createTable:e=>{let t=(t,n)=>tZ(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),t0(e.options,"debugColumns",t));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}},{getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:tJ("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=tZ(e=>[nm(t,e)],t=>t.findIndex(t=>t.id===e.id),t0(t.options,"debugColumns","getIndex")),e.getIsFirstColumn=n=>{var i;return(null==(i=nm(t,n)[0])?void 0:i.id)===e.id},e.getIsLastColumn=n=>{var i;let l=nm(t,n);return(null==(i=l[l.length-1])?void 0:i.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=tZ(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>i=>{let l=[];if(null!=e&&e.length){let t=[...e],n=[...i];for(;n.length&&t.length;){let e=t.shift(),i=n.findIndex(t=>t.id===e);i>-1&&l.push(n.splice(i,1)[0])}l=[...l,...n]}else l=i;var o=l;if(!(null!=t&&t.length)||!n)return o;let r=o.filter(e=>!t.includes(e.id));return"remove"===n?r:[...t.map(e=>o.find(t=>t.id===e)).filter(Boolean),...r]},t0(e.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:e=>({columnPinning:na(),...e}),getDefaultOptions:e=>({onColumnPinningChange:tJ("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{let i=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,l,o,r,s,a;return"right"===n?{left:(null!=(o=null==e?void 0:e.left)?o:[]).filter(e=>!(null!=i&&i.includes(e))),right:[...(null!=(r=null==e?void 0:e.right)?r:[]).filter(e=>!(null!=i&&i.includes(e))),...i]}:"left"===n?{left:[...(null!=(s=null==e?void 0:e.left)?s:[]).filter(e=>!(null!=i&&i.includes(e))),...i],right:(null!=(a=null==e?void 0:e.right)?a:[]).filter(e=>!(null!=i&&i.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=i&&i.includes(e))),right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=i&&i.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,i,l;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(i=null!=(l=t.options.enableColumnPinning)?l:t.options.enablePinning)||i)}),e.getIsPinned=()=>{let n=e.getLeafColumns().map(e=>e.id),{left:i,right:l}=t.getState().columnPinning,o=n.some(e=>null==i?void 0:i.includes(e)),r=n.some(e=>null==l?void 0:l.includes(e));return o?"left":!!r&&"right"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();return l?null!=(n=null==(i=t.getState().columnPinning)||null==(i=i[l])?void 0:i.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=tZ(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.column.id))},t0(t.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=tZ(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),t0(t.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=tZ(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),t0(t.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,i;return e.setColumnPinning(t?na():null!=(n=null==(i=e.initialState)?void 0:i.columnPinning)?n:na())},e.getIsSomeColumnsPinned=t=>{var n,i,l;let o=e.getState().columnPinning;return t?!!(null==(n=o[t])?void 0:n.length):!!((null==(i=o.left)?void 0:i.length)||(null==(l=o.right)?void 0:l.length))},e.getLeftLeafColumns=tZ(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),t0(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=tZ(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),t0(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=tZ(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.id))},t0(e.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:tJ("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"string"==typeof i?nl.includesString:"number"==typeof i?nl.inNumberRange:"boolean"==typeof i||null!==i&&"object"==typeof i?nl.equals:Array.isArray(i)?nl.arrIncludes:nl.weakEquals},e.getFilterFn=()=>{var n,i;return tQ(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(i=t.options.filterFns)?void 0:i[e.columnDef.filterFn])?n:nl[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,i,l;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(i=t.options.enableColumnFilters)||i)&&(null==(l=t.options.enableFilters)||l)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return null==(n=t.getState().columnFilters)||null==(n=n.find(t=>t.id===e.id))?void 0:n.value},e.getFilterIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().columnFilters)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.setFilterValue=n=>{t.setColumnFilters(t=>{var i,l;let o=e.getFilterFn(),r=null==t?void 0:t.find(t=>t.id===e.id),s=tX(n,r?r.value:void 0);if(nr(o,s,e))return null!=(i=null==t?void 0:t.filter(t=>t.id!==e.id))?i:[];let a={id:e.id,value:s};return r?null!=(l=null==t?void 0:t.map(t=>t.id===e.id?a:t))?l:[]:null!=t&&t.length?[...t,a]:[a]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{let n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var i;return null==(i=tX(t,e))?void 0:i.filter(e=>{let t=n.find(t=>t.id===e.id);return!(t&&nr(t.getFilterFn(),e.value,t))&&!0})})},e.resetColumnFilters=t=>{var n,i;e.setColumnFilters(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel)?e.getPreFilteredRowModel():e._getFilteredRowModel()}},{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:tJ("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;let i=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof i||"number"==typeof i}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,i,l,o;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(i=t.options.enableGlobalFilter)||i)&&(null==(l=t.options.enableFilters)||l)&&(null==(o=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||o)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>nl.includesString,e.getGlobalFilterFn=()=>{var t,n;let{globalFilterFn:i}=e.options;return tQ(i)?i:"auto"===i?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[i])?t:nl[i]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:tJ("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{let n=t.getFilteredRowModel().flatRows.slice(10),i=!1;for(let t of n){let n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return nC.datetime;if("string"==typeof n&&(i=!0,n.split(nv).length>1))return nC.alphanumeric}return i?nC.text:nC.basic},e.getAutoSortDir=()=>{let n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,i;if(!e)throw Error();return tQ(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(i=t.options.sortingFns)?void 0:i[e.columnDef.sortingFn])?n:nC[e.columnDef.sortingFn]},e.toggleSorting=(n,i)=>{let l=e.getNextSortingOrder(),o=null!=n;t.setSorting(r=>{let s,a=null==r?void 0:r.find(t=>t.id===e.id),d=null==r?void 0:r.findIndex(t=>t.id===e.id),c=[],u=o?n:"desc"===l;if("toggle"!=(s=null!=r&&r.length&&e.getCanMultiSort()&&i?a?"toggle":"add":null!=r&&r.length&&d!==r.length-1?"replace":a?"toggle":"replace")||o||l||(s="remove"),"add"===s){var p;(c=[...r,{id:e.id,desc:u}]).splice(0,c.length-(null!=(p=t.options.maxMultiSortColCount)?p:Number.MAX_SAFE_INTEGER))}else c="toggle"===s?r.map(t=>t.id===e.id?{...t,desc:u}:t):"remove"===s?r.filter(t=>t.id!==e.id):[{id:e.id,desc:u}];return c})},e.getFirstSortDir=()=>{var n,i;return(null!=(n=null!=(i=e.columnDef.sortDescFirst)?i:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var i,l;let o=e.getFirstSortDir(),r=e.getIsSorted();return r?(r===o||null!=(i=t.options.enableSortingRemoval)&&!i||!!n&&null!=(l=t.options.enableMultiRemove)&&!l)&&("desc"===r?"asc":"desc"):o},e.getCanSort=()=>{var n,i;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(i=t.options.enableSorting)||i)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,i;return null!=(n=null!=(i=e.columnDef.enableMultiSort)?i:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;let i=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!i&&(i.desc?"desc":"asc")},e.getSortIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().sorting)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{let n=e.getCanSort();return i=>{n&&(null==i.persist||i.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(i))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,i;e.setSorting(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel)?e.getPreSortedRowModel():e._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:tJ("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,i;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(i=t.options.enableGrouping)||i)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{let t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"number"==typeof i?ns.sum:"[object Date]"===Object.prototype.toString.call(i)?ns.extent:void 0},e.getAggregationFn=()=>{var n,i;if(!e)throw Error();return tQ(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(i=t.options.aggregationFns)?void 0:i[e.columnDef.aggregationFn])?n:ns[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,i;e.setGrouping(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel)?e.getPreGroupedRowModel():e._getGroupedRowModel()},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];let i=t.getColumn(n);return null!=i&&i.columnDef.getGroupingValue?(e._groupingValuesCache[n]=i.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,i)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!(null!=(t=n.subRows)&&t.length)}}},{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:tJ("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetExpanded)?i:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,i;e.setExpanded(t?{}:null!=(n=null==(i=e.initialState)?void 0:i.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{let t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{let t=e.getState().expanded;return"boolean"==typeof t?!0===t:!(!Object.keys(t).length||e.getRowModel().flatRows.some(e=>!e.getIsExpanded()))},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{let n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel)?e.getPreExpandedRowModel():e._getExpandedRowModel()},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(i=>{var l;let o=!0===i||!!(null!=i&&i[e.id]),r={};if(!0===i?Object.keys(t.getRowModel().rowsById).forEach(e=>{r[e]=!0}):r=i,n=null!=(l=n)?l:!o,!o&&n)return{...r,[e.id]:!0};if(o&&!n){let{[e.id]:t,...n}=r;return n}return i})},e.getIsExpanded=()=>{var n;let i=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===i||(null==i?void 0:i[e.id]))},e.getCanExpand=()=>{var n,i,l;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(i=t.options.enableExpanding)||i)&&!!(null!=(l=e.subRows)&&l.length)},e.getIsAllParentsExpanded=()=>{let n=!0,i=e;for(;n&&i.parentId;)n=(i=t.getRow(i.parentId,!0)).getIsExpanded();return n},e.getToggleExpandedHandler=()=>{let t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{...nh(),...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:tJ("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetPageIndex)?i:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>tX(t,e)),e.resetPagination=t=>{var n;e.setPagination(t?nh():null!=(n=e.initialState.pagination)?n:nh())},e.setPageIndex=t=>{e.setPagination(n=>{let i=tX(t,n.pageIndex);return i=Math.max(0,Math.min(i,void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1)),{...n,pageIndex:i}})},e.resetPageIndex=t=>{var n,i;e.setPageIndex(t?0:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageIndex)?n:0)},e.resetPageSize=t=>{var n,i;e.setPageSize(t?10:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageSize)?n:10)},e.setPageSize=t=>{e.setPagination(e=>{let n=Math.max(1,tX(t,e.pageSize)),i=Math.floor(e.pageSize*e.pageIndex/n);return{...e,pageIndex:i,pageSize:n}})},e.setPageCount=t=>e.setPagination(n=>{var i;let l=tX(t,null!=(i=e.options.pageCount)?i:-1);return"number"==typeof l&&(l=Math.max(-1,l)),{...n,pageCount:l}}),e.getPageOptions=tZ(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...Array(e)].fill(null).map((e,t)=>t)),t},t0(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{let{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return -1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel)?e.getPrePaginationRowModel():e._getPaginationRowModel(),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:ng(),...e}),getDefaultOptions:e=>({onRowPinningChange:tJ("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,i,l)=>{let o=i?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],r=new Set([...l?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],e.id,...o]);t.setRowPinning(e=>{var t,i,l,o,s,a;return"bottom"===n?{top:(null!=(l=null==e?void 0:e.top)?l:[]).filter(e=>!(null!=r&&r.has(e))),bottom:[...(null!=(o=null==e?void 0:e.bottom)?o:[]).filter(e=>!(null!=r&&r.has(e))),...Array.from(r)]}:"top"===n?{top:[...(null!=(s=null==e?void 0:e.top)?s:[]).filter(e=>!(null!=r&&r.has(e))),...Array.from(r)],bottom:(null!=(a=null==e?void 0:e.bottom)?a:[]).filter(e=>!(null!=r&&r.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=r&&r.has(e))),bottom:(null!=(i=null==e?void 0:e.bottom)?i:[]).filter(e=>!(null!=r&&r.has(e)))}})},e.getCanPin=()=>{var n;let{enableRowPinning:i,enablePinning:l}=t.options;return"function"==typeof i?i(e):null==(n=null!=i?i:l)||n},e.getIsPinned=()=>{let n=[e.id],{top:i,bottom:l}=t.getState().rowPinning,o=n.some(e=>null==i?void 0:i.includes(e)),r=n.some(e=>null==l?void 0:l.includes(e));return o?"top":!!r&&"bottom"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();if(!l)return -1;let o=null==(n="top"===l?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(i=null==o?void 0:o.indexOf(e.id))?i:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,i;return e.setRowPinning(t?ng():null!=(n=null==(i=e.initialState)?void 0:i.rowPinning)?n:ng())},e.getIsSomeRowsPinned=t=>{var n,i,l;let o=e.getState().rowPinning;return t?!!(null==(n=o[t])?void 0:n.length):!!((null==(i=o.top)?void 0:i.length)||(null==(l=o.bottom)?void 0:l.length))},e._getPinnedRows=(t,n,i)=>{var l;return(null==(l=e.options.keepPinnedRows)||l?(null!=n?n:[]).map(t=>{let n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:i}))},e.getTopRows=tZ(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),t0(e.options,"debugRows","getTopRows")),e.getBottomRows=tZ(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),t0(e.options,"debugRows","getBottomRows")),e.getCenterRows=tZ(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{let i=new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!i.has(e.id))},t0(e.options,"debugRows","getCenterRows"))}},{getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:tJ("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();let i={...n},l=e.getPreGroupedRowModel().flatRows;return t?l.forEach(e=>{e.getCanSelect()&&(i[e.id]=!0)}):l.forEach(e=>{delete i[e.id]}),i})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{let i=void 0!==t?t:!e.getIsAllPageRowsSelected(),l={...n};return e.getRowModel().rows.forEach(t=>{nf(l,t.id,i,!0,e)}),l}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=tZ(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?nx(e,n):{rows:[],flatRows:[],rowsById:{}},t0(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=tZ(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?nx(e,n):{rows:[],flatRows:[],rowsById:{}},t0(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=tZ(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?nx(e,n):{rows:[],flatRows:[],rowsById:{}},t0(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{let t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState(),i=!!(t.length&&Object.keys(n).length);return i&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(i=!1),i},e.getIsAllPageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState(),i=!!t.length;return i&&t.some(e=>!n[e.id])&&(i=!1),i},e.getIsSomeRowsSelected=()=>{var t;let n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,i)=>{let l=e.getIsSelected();t.setRowSelection(o=>{var r;if(n=void 0!==n?n:!l,e.getCanSelect()&&l===n)return o;let s={...o};return nf(s,e.id,n,null==(r=null==i?void 0:i.selectChildren)||r,t),s})},e.getIsSelected=()=>{let{rowSelection:n}=t.getState();return nb(e,n)},e.getIsSomeSelected=()=>{let{rowSelection:n}=t.getState();return"some"===ny(e,n)},e.getIsAllSubRowsSelected=()=>{let{rowSelection:n}=t.getState();return"all"===ny(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{let t=e.getCanSelect();return n=>{var i;t&&e.toggleSelected(null==(i=n.target)?void 0:i.checked)}}}},{getDefaultColumnDef:()=>nd,getInitialState:e=>({columnSizing:{},columnSizingInfo:nc(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:tJ("columnSizing",e),onColumnSizingInfoChange:tJ("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,i,l;let o=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:nd.minSize,null!=(i=null!=o?o:e.columnDef.size)?i:nd.size),null!=(l=e.columnDef.maxSize)?l:nd.maxSize)},e.getStart=tZ(e=>[e,nm(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),t0(t.options,"debugColumns","getStart")),e.getAfter=tZ(e=>[e,nm(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),t0(t.options,"debugColumns","getAfter")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...i}=t;return i})},e.getCanResize=()=>{var n,i;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(i=t.options.enableColumnResizing)||i)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0,n=e=>{if(e.subHeaders.length)e.subHeaders.forEach(n);else{var i;t+=null!=(i=e.column.getSize())?i:0}};return n(e),t},e.getStart=()=>{if(e.index>0){let t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{let i=t.getColumn(e.column.id),l=null==i?void 0:i.getCanResize();return o=>{if(!i||!l||(null==o.persist||o.persist(),np(o)&&o.touches&&o.touches.length>1))return;let r=e.getSize(),s=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[i.id,i.getSize()]],a=np(o)?Math.round(o.touches[0].clientX):o.clientX,d={},c=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var i,l;let o="rtl"===t.options.columnResizeDirection?-1:1,r=(n-(null!=(i=null==e?void 0:e.startOffset)?i:0))*o,s=Math.max(r/(null!=(l=null==e?void 0:e.startSize)?l:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;d[t]=Math.round(100*Math.max(n+n*s,0))/100}),{...e,deltaOffset:r,deltaPercentage:s}}),("onChange"===t.options.columnResizeMode||"end"===e)&&t.setColumnSizing(e=>({...e,...d})))},u=e=>{c("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=n||("undefined"!=typeof document?document:null),m={moveHandler:e=>c("move",e.clientX),upHandler:e=>{null==p||p.removeEventListener("mousemove",m.moveHandler),null==p||p.removeEventListener("mouseup",m.upHandler),u(e.clientX)}},h={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),c("move",e.touches[0].clientX),!1),upHandler:e=>{var t;null==p||p.removeEventListener("touchmove",h.moveHandler),null==p||p.removeEventListener("touchend",h.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),u(null==(t=e.touches[0])?void 0:t.clientX)}},g=!!function(){if("boolean"==typeof nu)return nu;let e=!1;try{let t=()=>{};window.addEventListener("test",t,{get passive(){return e=!0,!1}}),window.removeEventListener("test",t)}catch(t){e=!1}return nu=e}()&&{passive:!1};np(o)?(null==p||p.addEventListener("touchmove",h.moveHandler,g),null==p||p.addEventListener("touchend",h.upHandler,g)):(null==p||p.addEventListener("mousemove",m.moveHandler,g),null==p||p.addEventListener("mouseup",m.upHandler,g)),t.setColumnSizingInfo(e=>({...e,startOffset:a,startSize:r,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:i.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?nc():null!=(n=e.initialState.columnSizingInfo)?n:nc())},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}}];function nI(e,t){var n,i,l;let o;return e?"function"==typeof(i=n=e)&&(o=Object.getPrototypeOf(i)).prototype&&o.prototype.isReactComponent||"function"==typeof n||"object"==typeof(l=n)&&"symbol"==typeof l.$$typeof&&["react.memo","react.forward_ref"].includes(l.$$typeof.description)?a.createElement(e,t):e:null}let nT="diffView",nR="previousDocument",nP="nextDocument";function nE(){let e,t,n,i=(0,s.c)(9),{navigate:l,state:o}=(0,eE.useRouter)();i[0]!==l||i[1]!==o?(e=e=>{let{mode:t,previousDocument:n,nextDocument:i}=e,r={...(0,ek.fromPairs)(o._searchParams),...t?{[nT]:t}:{},...n?{[nR]:[n.type,n.id].join(",")}:{},...i?{[nP]:[i.type,i.id].join(",")}:{}};l({...o,_searchParams:(0,eD.toPairs)(r)})},i[0]=l,i[1]=o,i[2]=e):e=i[2];let r=e;i[3]!==l||i[4]!==o?(t=()=>{l({...o,_searchParams:(o._searchParams??[]).filter(nk)})},i[3]=l,i[4]=o,i[5]=t):t=i[5];let a=t;return i[6]!==a||i[7]!==r?(n={navigateDiffView:r,exitDiffView:a},i[6]=a,i[7]=r,i[8]=n):n=i[8],n}function nk(e){let[t]=e;return![nT,nR,nP].includes(t)}let nD=["version"];function nF(e){let t,n,i,l,o,r,d,c,u=(0,s.c)(22);u[0]!==e?(t=void 0===e?{}:e,u[0]=e,u[1]=t):t=u[1];let{onParamsError:p}=t,{state:m}=(0,eE.useRouter)();if(u[2]!==m._searchParams){let e=new URLSearchParams(m._searchParams);i=e.get(nR),n=e.get(nP),l=e.get(nT),u[2]=m._searchParams,u[3]=n,u[4]=i,u[5]=l}else n=u[3],i=u[4],l=u[5];let h=l,g=[i,n,h].some(nA),f=i??"",x=n??"",b=h??"";u[6]!==f||u[7]!==x||u[8]!==b?(o=function({previousDocument:e,nextDocument:t,mode:n}){let i=[],[l,o]=e.split(",").filter(Boolean),[r,s]=t.split(",").filter(Boolean);return nD.includes(n)||i.push(["invalidModeParam",n]),(typeof l>"u"||typeof o>"u")&&i.push(["invalidPreviousDocumentParam",e]),(typeof r>"u"||typeof s>"u")&&i.push(["invalidNextDocumentParam",t]),0!==i.length?{result:"error",errors:i}:{result:"success",params:{mode:n,documents:{previous:{type:l,id:o},next:{type:r,id:s}}}}}({previousDocument:f,nextDocument:x,mode:b}),u[6]=f,u[7]=x,u[8]=b,u[9]=o):o=u[9];let y=o;if(u[10]!==g||u[11]!==p||u[12]!==y.errors||u[13]!==y.result?(r=()=>{"error"===y.result&&g&&p?.(y.errors)},u[10]=g,u[11]=p,u[12]=y.errors,u[13]=y.result,u[14]=r):r=u[14],u[15]!==g||u[16]!==p||u[17]!==y?(d=[g,p,y],u[15]=g,u[16]=p,u[17]=y,u[18]=d):d=u[18],(0,a.useEffect)(r,d),"error"===y.result){let e;return u[19]===Symbol.for("react.memo_cache_sentinel")?(e={isActive:!1},u[19]=e):e=u[19],e}return u[20]!==y.params?(c={state:"ready",isActive:!0,...y.params},u[20]=y.params,u[21]=c):c=u[21],c}function nA(e){return null!==e}function nM(e){return null!==e}function nV(e,t){return(0,c.isPublishedId)(e)?"published":(0,c.isDraftId)(e)?"draft":t.find(({_id:t})=>(0,d.getReleaseIdFromReleaseDocumentId)(t)===(0,c.getVersionFromId)(e))}let nL=e_.styled.header`
  display: grid;
  grid-area: header;
  grid-template-columns: 1fr min-content 1fr;
  border-block-end: 1px solid var(--card-border-color);
`,nz=e_.styled.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,nO=e=>{let t,n,i,l,o,a,c,u,p,h,g,f,x,b,y,v=(0,s.c)(44),{documentId:j,state:w}=e,{t:S}=(0,d.useTranslation)(C);v[0]!==j?(t={documentId:j},v[0]=j,v[1]=t):t=v[1];let{data:_}=(0,d.useDocumentVersions)(t),{exitDiffView:I,navigateDiffView:T}=nE(),{documents:R}=nF(),P=(0,d.useActiveReleases)();v[2]!==_?(n=_.flatMap(n$),v[2]=_,v[3]=n):n=v[3];let E=n;if(v[4]!==P.data||v[5]!==E){let e;v[7]!==E?(e=e=>{let t=(0,d.getReleaseIdFromReleaseDocumentId)(e._id);return"u">typeof t&&E.includes(t)},v[7]=E,v[8]=e):e=v[8],i=P.data.filter(e),v[4]=P.data,v[5]=E,v[6]=i}else i=v[6];let k=i;v[9]!==R||v[10]!==T?(l=e=>{"u">typeof R?.previous&&T({previousDocument:{...R.previous,id:e}})},v[9]=R,v[10]=T,v[11]=l):l=v[11];let D=l;v[12]!==R||v[13]!==T?(o=e=>{"u">typeof R?.next&&T({nextDocument:{...R.next,id:e}})},v[12]=R,v[13]=T,v[14]=o):o=v[14];let F=o;return v[15]!==S?(a=S("compare-versions.title"),v[15]=S,v[16]=a):a=v[16],v[17]!==a?(c=(0,r.jsx)(ej.Box,{padding:4,children:(0,r.jsx)(ej.Text,{as:"h1",size:1,muted:!0,children:a})}),v[17]=a,v[18]=c):c=v[18],v[19]!==j||v[20]!==R||v[21]!==D||v[22]!==k||v[23]!==w?(u="u">typeof R?.previous&&(0,r.jsx)(nB,{releases:k,onSelectRelease:D,role:"previous",documentId:j,state:w,document:R.previous}),v[19]=j,v[20]=R,v[21]=D,v[22]=k,v[23]=w,v[24]=u):u=v[24],v[25]!==c||v[26]!==u?(p=(0,r.jsxs)(nz,{children:[c,u]}),v[25]=c,v[26]=u,v[27]=p):p=v[27],v[28]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)(ej.Flex,{align:"center",paddingX:3,children:(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(m.TransferIcon,{})})}),v[28]=h):h=v[28],v[29]!==j||v[30]!==R||v[31]!==F||v[32]!==k||v[33]!==w?(g="u">typeof R?.next&&(0,r.jsx)(nB,{releases:k,onSelectRelease:F,role:"next",documentId:j,state:w,document:R.next}),v[29]=j,v[30]=R,v[31]=F,v[32]=k,v[33]=w,v[34]=g):g=v[34],v[35]===Symbol.for("react.memo_cache_sentinel")?(f={justifySelf:"end"},v[35]=f):f=v[35],v[36]!==I?(x=(0,r.jsx)(ej.Box,{padding:3,style:f,children:(0,r.jsx)(ej.Button,{icon:m.CloseIcon,mode:"bleed",onClick:I,padding:2})}),v[36]=I,v[37]=x):x=v[37],v[38]!==g||v[39]!==x?(b=(0,r.jsxs)(nz,{children:[g,x]}),v[38]=g,v[39]=x,v[40]=b):b=v[40],v[41]!==b||v[42]!==p?(y=(0,r.jsxs)(nL,{children:[p,h,b]}),v[41]=b,v[42]=p,v[43]=y):y=v[43],y},nB=e=>{let t,n,i,l,o,a,u,p,h,g,f=(0,s.c)(41),{releases:x,onSelectRelease:b,role:y,documentId:v,document:j}=e;f[0]!==x?(t=void 0===x?[]:x,f[0]=x,f[1]=t):t=f[1];let w=t;f[2]!==j.id?(n=(0,c.getPublishedId)(j.id),f[2]=j.id,f[3]=n):n=f[3];let{published:S,draft:_}=(0,d.useEditState)(n,j.type);f[4]!==j.id||f[5]!==w?(i=nV(j.id,w),f[4]=j.id,f[5]=w,f[6]=i):i=f[6];let I=i,{t:T}=(0,d.useTranslation)(C),{t:R}=(0,d.useTranslation)(),{document:P}=(0,d.useWorkspace)(),{drafts:E}=P,{enabled:k}=E;if(f[7]!==I||f[8]!==R||f[9]!==T?(l=function({selected:e,tCore:t,tStructure:n}){if(typeof e>"u")return{text:t("common.loading"),tone:"neutral",disabled:!0};if((0,d.isReleaseDocument)(e)){let n=e?(0,d.getReleaseTone)(e):"neutral";return{text:e?.metadata.title||t("release.placeholder-untitled-release"),icon:(0,r.jsx)(d.ReleaseAvatar,{padding:1,tone:n}),iconRight:e&&(0,d.isReleaseScheduledOrScheduling)(e)?(0,r.jsx)(m.LockIcon,{}):void 0,tone:n}}let i="published"===e?"positive":"caution";return{text:n(["compare-versions.status",e].join(".")),icon:(0,r.jsx)(d.ReleaseAvatar,{padding:1,tone:i}),tone:i}}({selected:I,tCore:R,tStructure:T}),f[7]=I,f[8]=R,f[9]=T,f[10]=l):l=f[10],f[11]!==l?(o=(0,r.jsx)(ej.Button,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...l}),f[11]=l,f[12]=o):o=f[12],f[13]!==v||f[14]!==b||f[15]!==S||f[16]!==I?(a=S&&(0,r.jsx)(nH,{type:"published",onSelect:b,isSelected:"published"===I,documentId:v}),f[13]=v,f[14]=b,f[15]=S,f[16]=I,f[17]=a):a=f[17],f[18]!==v||f[19]!==_||f[20]!==k||f[21]!==b||f[22]!==I?(u=k&&_&&(0,r.jsx)(nH,{type:"draft",onSelect:b,isSelected:"draft"===I,documentId:v}),f[18]=v,f[19]=_,f[20]=k,f[21]=b,f[22]=I,f[23]=u):u=f[23],f[24]!==v||f[25]!==b||f[26]!==w||f[27]!==I){let e;f[29]!==v||f[30]!==b||f[31]!==I?(e=e=>(0,r.jsx)(nH,{release:e,onSelect:b,isSelected:"string"!=typeof I&&I?._id===e._id,documentId:v},e._id),f[29]=v,f[30]=b,f[31]=I,f[32]=e):e=f[32],p=w.map(e),f[24]=v,f[25]=b,f[26]=w,f[27]=I,f[28]=p}else p=f[28];return f[33]!==u||f[34]!==p||f[35]!==a?(h=(0,r.jsxs)(ej.Menu,{children:[a,u,p]}),f[33]=u,f[34]=p,f[35]=a,f[36]=h):h=f[36],f[37]!==y||f[38]!==h||f[39]!==o?(g=(0,r.jsx)(ev.MenuButton,{id:y,button:o,menu:h}),f[37]=y,f[38]=h,f[39]=o,f[40]=g):g=f[40],g},nH=e=>{let t,n,i,l,o,a,u,p,h,g,f,x,b=(0,s.c)(51),{type:y,release:v,onSelect:j,isSelected:w,documentId:S}=e,{t:_}=(0,d.useTranslation)(),{t:I}=(0,d.useTranslation)(C);b[0]!==S||b[1]!==j||b[2]!==v||b[3]!==y?(t=()=>{"draft"===y?j((0,c.getDraftId)(S)):"published"===y?j((0,c.getPublishedId)(S)):"u">typeof v?._id&&j((0,c.getVersionId)(S,(0,d.getReleaseIdFromReleaseDocumentId)(v._id)))},b[0]=S,b[1]=j,b[2]=v,b[3]=y,b[4]=t):t=b[4];let T=t;if(y){let e,t,n,i,l,o,s="published"===y?"positive":"caution";b[5]!==s?(e=(0,r.jsx)(d.ReleaseAvatar,{padding:2,tone:s}),b[5]=s,b[6]=e):e=b[6],b[7]!==y?(t=["compare-versions.status",y],b[7]=y,b[8]=t):t=b[8];let a=t.join(".");return b[9]!==a||b[10]!==I?(n=I(a),b[9]=a,b[10]=I,b[11]=n):n=b[11],b[12]!==n?(i=(0,r.jsx)(ej.Box,{paddingY:2,children:(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:n})}),b[12]=n,b[13]=i):i=b[13],b[14]!==e||b[15]!==i?(l=(0,r.jsxs)(ej.Flex,{gap:1,children:[e,i]}),b[14]=e,b[15]=i,b[16]=l):l=b[16],b[17]!==w||b[18]!==T||b[19]!==l?(o=(0,r.jsx)(ej.MenuItem,{padding:1,paddingRight:3,onClick:T,pressed:w,children:l}),b[17]=w,b[18]=T,b[19]=l,b[20]=o):o=b[20],o}b[21]!==v?(n=v?(0,d.getReleaseTone)(v):"neutral",b[21]=v,b[22]=n):n=b[22];let R=n;return b[23]!==R?(i=(0,r.jsx)(d.ReleaseAvatar,{padding:2,tone:R}),b[23]=R,b[24]=i):i=b[24],b[25]!==v.metadata.title||b[26]!==_?(l=v.metadata.title||_("release.placeholder-untitled-release"),b[25]=v.metadata.title,b[26]=_,b[27]=l):l=b[27],b[28]!==l?(o=(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:l}),b[28]=l,b[29]=o):o=b[29],b[30]!==v.metadata.releaseType||b[31]!==_?(a=["asap","undecided"].includes(v.metadata.releaseType)&&(0,r.jsx)(ej.Text,{muted:!0,size:1,children:_(`release.type.${v.metadata.releaseType}`)}),b[30]=v.metadata.releaseType,b[31]=_,b[32]=a):a=b[32],b[33]!==v?(u="scheduled"===v.metadata.releaseType&&(0,r.jsx)(ej.Text,{muted:!0,size:1,children:(0,d.formatRelativeLocalePublishDate)(v)}),b[33]=v,b[34]=u):u=b[34],b[35]!==o||b[36]!==a||b[37]!==u?(p=(0,r.jsxs)(ej.Stack,{flex:1,paddingY:2,paddingRight:2,space:2,children:[o,a,u]}),b[35]=o,b[36]=a,b[37]=u,b[38]=p):p=b[38],b[39]!==v?(h=(0,d.isReleaseScheduledOrScheduling)(v)&&(0,r.jsx)(ej.Box,{padding:2,children:(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(m.LockIcon,{})})}),b[39]=v,b[40]=h):h=b[40],b[41]!==h?(g=(0,r.jsx)(ej.Flex,{flex:"none",children:h}),b[41]=h,b[42]=g):g=b[42],b[43]!==g||b[44]!==i||b[45]!==p?(f=(0,r.jsxs)(ej.Flex,{gap:1,children:[i,p,g]}),b[43]=g,b[44]=i,b[45]=p,b[46]=f):f=b[46],b[47]!==w||b[48]!==T||b[49]!==f?(x=(0,r.jsx)(ej.MenuItem,{padding:1,paddingRight:3,onClick:T,pressed:w,children:f}),b[47]=w,b[48]=T,b[49]=f,b[50]=x):x=b[50],x};function n$(e){return(0,c.getVersionFromId)(e)??[]}let nN=e_.styled.div`
  --offset-block: 40px;
  display: grid;
  height: calc(100vh - var(--offset-block));
  min-height: 0;
  overflow: hidden;
  grid-template-areas:
    'header header'
    'previous-document next-document';
  grid-template-columns: 1fr 1fr;
  grid-template-rows: min-content minmax(0, 1fr);
`;function nG(e){return e.document?.components?.unstable_layout}function nU(e){return e.path}function nq(e,t){return(0,ty.default)(e.path,t.path)}let nW=e_.styled.div`
  position: relative;
  height: 100%;
  overflow: auto;
  scroll-behavior: smooth;
  scrollbar-width: var(--scrollbar-width);
  overscroll-behavior: contain;
  will-change: scroll-position;
`,nK=(0,e_.styled)(ej.Card)`
  position: relative;
  grid-area: var(--grid-area);
`,nY=(0,e_.styled)(ej.Container)`
  width: auto;
`,nX=(0,a.forwardRef)(function(e,t){let n,i,l,o,c,p,m,h,g,f,x,b,y=(0,s.c)(36),{role:v,documentType:j,documentId:w,scrollElement:S,syncChannel:C,compareDocument:_}=e,I=(0,a.useRef)(null),[T,R]=(0,a.useState)(null),[P,E]=(0,a.useState)(null);y[0]!==_||y[1]!==w||y[2]!==j||y[3]!==v||y[4]!==S||y[5]!==C?(n=()=>(0,r.jsx)(nJ,{compareDocument:_,documentId:w,documentType:j,role:v,scrollElement:S,syncChannel:C}),y[0]=_,y[1]=w,y[2]=j,y[3]=v,y[4]=S,y[5]=C,y[6]=n):n=y[6];let k=n;y[7]!==k?(i={pick:nG,defaultComponent:k},y[7]=k,y[8]=i):i=y[8];let D=(0,d.useMiddlewareComponents)(i);y[9]===Symbol.for("react.memo_cache_sentinel")?(l={isInteractive:!1,onOpenReviewChanges:eF.noop,onSetFocus:eF.noop,isReviewChangesOpen:!1},y[9]=l):l=y[9];let F=`${v}-document`;y[10]!==F?(o={"--grid-area":F},y[10]=F,y[11]=o):o=y[11];let A=o,M="next"===v,V="next"!==v&&"none";y[12]!==V?(c={"--scrollbar-width":V},y[12]=V,y[13]=c):c=y[13];let L=c;return y[14]!==D||y[15]!==w||y[16]!==j?(p=(0,r.jsx)(ew.DialogProvider,{position:"absolute",children:(0,r.jsx)(nY,{ref:I,padding:4,width:1,children:(0,r.jsx)(D,{documentId:w,documentType:j})})}),y[14]=D,y[15]=w,y[16]=j,y[17]=p):p=y[17],y[18]!==T||y[19]!==p?(m=(0,r.jsx)(ej.PortalProvider,{element:T,children:p}),y[18]=T,y[19]=p,y[20]=m):m=y[20],y[21]!==t||y[22]!==L||y[23]!==m?(h=(0,r.jsx)(nW,{ref:t,style:L,children:m}),y[21]=t,y[22]=L,y[23]=m,y[24]=h):h=y[24],y[25]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:R}),y[25]=g):g=y[25],y[26]!==h||y[27]!==A||y[28]!==M?(f=(0,r.jsxs)(nK,{ref:E,style:A,borderLeft:M,children:[h,g]}),y[26]=h,y[27]=A,y[28]=M,y[29]=f):f=y[29],y[30]!==P||y[31]!==f?(x=(0,r.jsx)(ej.BoundaryElementProvider,{element:P,children:f}),y[30]=P,y[31]=f,y[32]=x):x=y[32],y[33]!==S||y[34]!==x?(b=(0,r.jsx)(u.ReviewChangesContext.Provider,{value:l,children:(0,r.jsx)(d.ChangeIndicatorsTracker,{children:(0,r.jsx)(d.VirtualizerScrollInstanceProvider,{scrollElement:S,containerElement:I,children:x})})}),y[33]=S,y[34]=x,y[35]=b):b=y[35],b}),nJ=e=>{var t,n;let i,l,o,p,m,h,g,f,x,b,y,v=(0,s.c)(52),{role:j,documentType:w,documentId:S,syncChannel:C,compareDocument:_}=e;v[0]!==_?(i={compareDocument:_},v[0]=_,v[1]=i):i=v[1];let I=function(e){let t,n,i,l=(0,s.c)(4),{compareDocument:o}=e;l[0]!==o.id?(t=(0,c.getPublishedId)(o.id),l[0]=o.id,l[1]=t):t=l[1];let r=o.type;l[2]!==o.id?(n=(0,c.getVersionFromId)(o.id),l[2]=o.id,l[3]=n):n=l[3];let a=(0,d.useEditState)(t,r,"low",n);e:{if((0,c.isVersionId)(o.id)){i=a.version??void 0;break e}if((0,c.isDraftId)(o.id)){i=a.draft??void 0;break e}if((0,c.isPublishedId)(o.id)){i=a.published??void 0;break e}i=void 0}return i}(i),{data:T}=(0,d.useActiveReleases)(),[R]=(0,a.useState)(nQ);v[2]!==S||v[3]!==T?(l=nV(S,T),v[2]=S,v[3]=T,v[4]=l):l=v[4];let P=l;v[5]!==S?(o=(0,c.getPublishedId)(S),v[5]=S,v[6]=o):o=v[6],v[7]!==S?(t=S,p=(0,c.isVersionId)(t)?(0,c.getVersionFromId)(t):(0,c.isPublishedId)(t)?"published":void 0,v[7]=S,v[8]=p):p=v[8],v[9]!==S?(m=(0,c.getVersionFromId)(S),v[9]=S,v[10]=m):m=v[10],v[11]!==I||v[12]!==w||v[13]!==o||v[14]!==p||v[15]!==m?(h={documentId:o,documentType:w,selectedPerspectiveName:p,releaseId:m,comparisonValue:I,displayInlineChanges:!0},v[11]=I,v[12]=w,v[13]=o,v[14]=p,v[15]=m,v[16]=h):h=v[16];let{formState:E,onChange:k,onFocus:D,onBlur:F,onSetActiveFieldGroup:A,onSetCollapsedFieldSet:M,onSetCollapsedPath:V,collapsedFieldSets:L,ready:z,collapsedPaths:O,schemaType:B,value:H,onProgrammaticFocus:$,openPath:N,onPathOpen:G}=(0,d.useDocumentForm)(h),U=null===E||!z;v[17]!==j||v[18]!==C?(g={id:j,syncChannel:C},v[17]=j,v[18]=C,v[19]=g):g=v[19];let q=function(e){let t,n,i,l=(0,s.c)(11),{syncChannel:o,id:r}=e;l[0]!==r||l[1]!==o?(t=e=>o.next({...e,source:r}),l[0]=r,l[1]=o,l[2]=t):t=l[2];let a=t;if(l[3]!==r||l[4]!==o){let e;l[6]!==r?(e=e=>{let{source:t}=e;return t!==r},l[6]=r,l[7]=e):e=l[7],n=o.pipe((0,eq.distinctUntilChanged)(nq),(0,eJ.filter)(e),(0,eH.map)(nU)),l[3]=r,l[4]=o,l[5]=n}else n=l[5];let d=n;return l[8]!==d||l[9]!==a?(i={path:d,push:a},l[8]=d,l[9]=a,l[10]=i):i=l[10],i}(g);v[20]!==G||v[21]!==q||v[22]!==j?(f=e=>{G(e),q.push({source:j,path:e})},v[20]=G,v[21]=q,v[22]=j,v[23]=f):f=v[23];let W=f;return v[24]!==G||v[25]!==$||v[26]!==q.path?(x=()=>{let e=q.path.subscribe(e=>{G(e),$(e)});return()=>e.unsubscribe()},v[24]=G,v[25]=$,v[26]=q.path,v[27]=x):x=v[27],v[28]!==G||v[29]!==$||v[30]!==q.path||v[31]!==j?(b=[G,$,q.path,j],v[28]=G,v[29]=$,v[30]=q.path,v[31]=j,v[32]=b):b=v[32],(0,a.useEffect)(x,b),v[33]!==L||v[34]!==O||v[35]!==I||v[36]!==E||v[37]!==U||v[38]!==F||v[39]!==k||v[40]!==D||v[41]!==W||v[42]!==A||v[43]!==M||v[44]!==V||v[45]!==N||v[46]!==R||v[47]!==P||v[48]!==j||v[49]!==B||v[50]!==H?(y=U?(0,r.jsx)(d.LoadingBlock,{showText:!0}):(0,r.jsx)(u.CommentsEnabledContext.Provider,{value:{enabled:!1,mode:null},children:(0,r.jsx)(d.FormBuilder,{__internal_patchChannel:R,id:`diffView-pane-${j}`,onChange:k,onPathFocus:D,onPathOpen:W,onPathBlur:F,onFieldGroupSelect:A,onSetFieldSetCollapsed:M,onSetPathCollapsed:V,collapsedPaths:O,collapsedFieldSets:L,focusPath:E.focusPath,openPath:N,changed:E.changed,focused:E.focused,groups:E.groups,validation:E.validation,members:E.members,perspective:"draft"===(n=P)?"drafts":n,hasUpstreamVersion:E.hasUpstreamVersion,presence:E.presence,schemaType:B,value:H,compareValue:I})}),v[33]=L,v[34]=O,v[35]=I,v[36]=E,v[37]=U,v[38]=F,v[39]=k,v[40]=D,v[41]=W,v[42]=A,v[43]=M,v[44]=V,v[45]=N,v[46]=R,v[47]=P,v[48]=j,v[49]=B,v[50]=H,v[51]=y):y=v[51],y};function nQ(){return(0,d.createPatchChannel)()}let nZ=e_.styled.a`
  flex: 1;
  text-decoration: none;
  color: inherit;
`,n0=e=>{let t,n,i=(0,s.c)(6),{children:l,documentId:o,documentType:a}=e;i[0]!==o||i[1]!==a?(t={intent:"edit",params:{id:o,type:a}},i[0]=o,i[1]=a,i[2]=t):t=i[2];let{href:d}=(0,eE.useIntentLink)(t);return i[3]!==l||i[4]!==d?(n=(0,r.jsx)(nZ,{href:d,target:"_blank",rel:"noopener noreferrer",children:l}),i[3]=l,i[4]=d,i[5]=n):n=i[5],n},n1=e=>{var t;let n,i,l,o,d,c,p,m,h,g,f,x,b=(0,s.c)(24),{documentId:y}=e,{documents:v,state:j,mode:w}=nF(),{exitDiffView:S}=nE(),C=((h=(0,s.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(m=new e2.Subject,h[0]=m):m=h[0],m),[_,I]=(0,a.useState)(null),[T,R]=(0,a.useState)(null),P=(0,a.useContext)(u.ReferenceInputOptionsContext);b[0]!==P?(n={...P,disableNew:!0,EditReferenceLinkComponent:n0},b[0]=P,b[1]=n):n=b[1];let E=n;return b[2]!==T||b[3]!==_?(i=[_,T],b[2]=T,b[3]=_,b[4]=i):i=b[4],t=i,(x=(0,s.c)(3))[0]!==t?(g=()=>{let e=t.filter(nM);if(0===e.length)return;let n=new tb(e);return()=>n.destroy()},f=[t],x[0]=t,x[1]=g,x[2]=f):(g=x[1],f=x[2]),(0,a.useEffect)(g,f),b[5]!==y||b[6]!==w||b[7]!==j?(l="version"===w&&(0,r.jsx)(nO,{documentId:y,state:j}),b[5]=y,b[6]=w,b[7]=j,b[8]=l):l=b[8],b[9]!==v||b[10]!==T||b[11]!==_||b[12]!==j||b[13]!==C?(o="ready"===j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nX,{documentType:v.previous.type,documentId:v.previous.id,role:"previous",ref:I,scrollElement:_,syncChannel:C,compareDocument:v.previous}),(0,r.jsx)(nX,{documentType:v.next.type,documentId:v.next.id,role:"next",ref:R,scrollElement:T,syncChannel:C,compareDocument:v.previous})]}),b[9]=v,b[10]=T,b[11]=_,b[12]=j,b[13]=C,b[14]=o):o=b[14],b[15]!==l||b[16]!==o?(d=(0,r.jsxs)(nN,{children:[l,o]}),b[15]=l,b[16]=o,b[17]=d):d=b[17],b[18]!==S||b[19]!==d?(c=(0,r.jsx)(ev.Dialog,{id:"diffView",width:"auto",onClose:S,padding:!1,__unstable_hideCloseButton:!0,children:d}),b[18]=S,b[19]=d,b[20]=c):c=b[20],b[21]!==E||b[22]!==c?(p=(0,r.jsx)(u.ReferenceInputOptionsContext.Provider,{value:E,children:c}),b[21]=E,b[22]=c,b[23]=p):p=b[23],p},n2=e=>{let t,n,i,l=(0,s.c)(9),{children:o,documentId:a}=e,c=(0,ew.useToast)(),{t:u}=(0,d.useTranslation)(C);l[0]!==u||l[1]!==c?(t={onParamsError:e=>{c.push({id:"diffViewParamsParsingError",status:"error",title:u("compare-version.error.invalidParams.title"),description:(0,r.jsx)("ul",{children:e.map(e=>{let[t,n]=e;return(0,r.jsx)("li",{children:u(`compare-version.error.${t}`,{input:n})},t)})})})}},l[0]=u,l[1]=c,l[2]=t):t=l[2];let{isActive:p}=nF(t);return l[3]!==a||l[4]!==p?(n=p&&(0,r.jsx)(n1,{documentId:a}),l[3]=a,l[4]=p,l[5]=n):n=l[5],l[6]!==o||l[7]!==n?(i=(0,r.jsxs)(r.Fragment,{children:[o,n]}),l[6]=o,l[7]=n,l[8]=i):i=l[8],i};function n3(){let e=(0,a.useContext)(u.PaneLayoutContext);if(!e)throw Error("PaneLayout: missing context value");return e}let n4=(0,e_.styled)(ej.Layer)`
  position: relative;
  width: 1px;
  min-width: 1px;

  &:before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--card-border-color);
  }

  &:not([data-disabled]) {
    cursor: ew-resize;
    width: 9px;
    min-width: 9px;
    margin: 0 -4px;

    &:before {
      left: 4px;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    &[data-dragging]:after,
    &:hover:after {
      opacity: 0.2;
    }
  }
`;function n5(e){let t,n,i=(0,s.c)(7),{disabled:l,element:o}=e,{resize:d}=n3(),[c,u]=(0,a.useState)(!1);i[0]!==o||i[1]!==d?(t=e=>{if(!o)return;u(!0),e.preventDefault();let t=e.pageX;d("start",o,0);let n=e=>{e.preventDefault(),d("move",o,e.pageX-t)},i=e=>{e.preventDefault(),u(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),d("end",o,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},i[0]=o,i[1]=d,i[2]=t):t=i[2];let p=t,m=l?"":void 0,h=c?"":void 0;return i[3]!==p||i[4]!==m||i[5]!==h?(n=(0,r.jsx)(n4,{"data-disabled":m,"data-dragging":h,onMouseDown:p}),i[3]=p,i[4]=m,i[5]=h,i[6]=n):n=i[6],n}let n6=(0,e_.styled)(ej.Card)`
  outline: none;

  // NOTE: This will render a border to the right side of each pane
  // without taking up physical space.
  box-shadow: 1px 0 0 var(--card-border-color);
`,n8=(0,a.forwardRef)(function(e,t){let n,i,l,o,c,p,m,h,g,f,x,b,y,v,j,w,S,C,_,I,T,R,P,E,k,D,F,A,M,V=(0,s.c)(86);V[0]!==e?({children:n,currentMinWidth:l,currentMaxWidth:i,flex:h,id:o,minWidth:p,maxWidth:c,selected:g,...m}=e,V[0]=e,V[1]=n,V[2]=i,V[3]=l,V[4]=o,V[5]=c,V[6]=p,V[7]=m,V[8]=h,V[9]=g):(n=V[1],i=V[2],l=V[3],o=V[4],c=V[5],p=V[6],m=V[7],h=V[8],g=V[9]);let L=void 0===h?1:h,z=void 0!==g&&g,[O,B]=(0,a.useState)(null),{collapse:H,collapsed:$,expand:N,expandedElement:G,mount:U,panes:q}=n3();if(V[10]!==q||V[11]!==O){let e;V[14]!==O?(e=e=>e.element===O,V[14]=O,V[15]=e):e=V[15],x=(f=q.find(e))&&q.indexOf(f),V[10]=q,V[11]=O,V[12]=f,V[13]=x}else f=V[12],x=V[13];let W=x,K="number"==typeof W?q[W+1]:void 0,Y=W===q.length-1,X=G===O,J=!$&&(f?.collapsed||!1),Q=K?.collapsed||!1,Z=(0,a.useRef)(null),ee=f?.flex??L,et=f?.currentMinWidth??l,en=f?.currentMaxWidth??i;V[16]===Symbol.for("react.memo_cache_sentinel")?(b=()=>Z.current,V[16]=b):b=V[16],(0,a.useImperativeHandle)(t,b),V[17]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{B(e),Z.current=e},V[17]=y):y=V[17];let ei=y;V[18]!==i||V[19]!==l||V[20]!==L||V[21]!==o||V[22]!==c||V[23]!==p||V[24]!==U||V[25]!==O?(v=()=>{if(O)return U(O,{currentMinWidth:l,currentMaxWidth:i,flex:L,id:o,minWidth:p,maxWidth:c})},j=[l,i,L,o,p,c,U,O],V[18]=i,V[19]=l,V[20]=L,V[21]=o,V[22]=c,V[23]=p,V[24]=U,V[25]=O,V[26]=v,V[27]=j):(v=V[26],j=V[27]),(0,a.useLayoutEffect)(v,j),V[28]!==H||V[29]!==O?(w=()=>{O&&H(O)},V[28]=H,V[29]=O,V[30]=w):w=V[30];let el=w;V[31]!==N||V[32]!==O?(S=()=>{O&&N(O)},V[31]=N,V[32]=O,V[33]=S):S=V[33];let eo=S,er=!$&&J;V[34]!==el||V[35]!==eo||V[36]!==Y||V[37]!==W||V[38]!==O||V[39]!==er?(C={collapse:el,collapsed:er,expand:eo,index:W,isLast:Y,rootElement:O},V[34]=el,V[35]=eo,V[36]=Y,V[37]=W,V[38]=O,V[39]=er,V[40]=C):C=V[40];let es=C;e:{if($){_=void 0;break e}if(J){_=51;break e}if(0===et||Y){_=p||204;break e}_=et||p||204}let ea=_;t:{if(J){I=51;break t}if($&&Y){I=void 0;break t}if(Y){if(c){I=en??c;break t}I=void 0;break t}I=en??c}let ed=I,ec=$&&!Y;V[41]!==J||V[42]!==Y||V[43]!==$||V[44]!==Q||V[45]!==O?(T=!Y&&!$&&(0,r.jsx)(d.LegacyLayerProvider,{zOffset:"paneResizer",children:(0,r.jsx)(n5,{disabled:J||Q,element:O})}),V[41]=J,V[42]=Y,V[43]=$,V[44]=Q,V[45]=O,V[46]=T):T=V[46];let eu=T,ep=ed===1/0?void 0:ed;V[47]!==ee||V[48]!==ea||V[49]!==ep?(R={flex:ee,minWidth:ea,maxWidth:ep},V[47]=ee,V[48]=ea,V[49]=ep,V[50]=R):R=V[50];let em=R,eh=$?void 0:"hidden",eg=J?"":void 0,ef=z?"":void 0;return V[51]!==J||V[52]!==en||V[53]!==et||V[54]!==X||V[55]!==ee||V[56]!==ed||V[57]!==ea||V[58]!==W?(P=!1,V[51]=J,V[52]=en,V[53]=et,V[54]=X,V[55]=ee,V[56]=ed,V[57]=ea,V[58]=W,V[59]=P):P=V[59],V[60]!==n||V[61]!==ec?(E=!ec&&(0,r.jsx)(ej.Flex,{direction:"column",height:"fill",children:n}),V[60]=n,V[61]=ec,V[62]=E):E=V[62],V[63]!==O||V[64]!==E?(k=(0,r.jsx)(ej.BoundaryElementProvider,{element:O,children:E}),V[63]=O,V[64]=E,V[65]=k):k=V[65],V[66]!==ec||V[67]!==o||V[68]!==W||V[69]!==m||V[70]!==em||V[71]!==eh||V[72]!==eg||V[73]!==ef||V[74]!==P||V[75]!==k?(D=(0,r.jsxs)(n6,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:ec,id:o,overflow:eh,...m,"data-pane-collapsed":eg,"data-pane-index":W,"data-pane-selected":ef,ref:ei,style:em,children:[P,k]}),V[66]=ec,V[67]=o,V[68]=W,V[69]=m,V[70]=em,V[71]=eh,V[72]=eg,V[73]=ef,V[74]=P,V[75]=k,V[76]=D):D=V[76],V[77]!==Y||V[78]!==D?(F=(0,r.jsx)(d.IsLastPaneProvider,{isLastPane:Y,children:D}),V[77]=Y,V[78]=D,V[79]=F):F=V[79],V[80]!==es||V[81]!==F?(A=(0,r.jsx)(d.LegacyLayerProvider,{zOffset:"pane",children:(0,r.jsx)(u.PaneContext.Provider,{value:es,children:F})}),V[80]=es,V[81]=F,V[82]=A):A=V[82],V[83]!==eu||V[84]!==A?(M=(0,r.jsxs)(r.Fragment,{children:[A,eu]}),V[83]=eu,V[84]=A,V[85]=M):M=V[85],M}),n7=(0,e_.styled)(ej.Card)`
  position: relative;
  outline: none;
`;function n9(){let e=(0,a.useContext)(u.PaneContext);if(!e)throw Error("Pane: missing context value");return e}n7.displayName="PaneContent__root";let ie=(0,a.forwardRef)(function(e,t){let n,i,l,o,a,d,c=(0,s.c)(14);c[0]!==e?({as:n,children:i,overflow:l,padding:o,...a}=e,c[0]=e,c[1]=n,c[2]=i,c[3]=l,c[4]=o,c[5]=a):(n=c[1],i=c[2],l=c[3],o=c[4],a=c[5]);let{collapsed:u}=n9(),{collapsed:p}=n3(),m=p?void 0:l;return c[6]!==n||c[7]!==i||c[8]!==u||c[9]!==o||c[10]!==t||c[11]!==a||c[12]!==m?(d=(0,r.jsx)(n7,{"data-testid":"pane-content",forwardedAs:n,...a,flex:1,hidden:u,overflow:m,padding:o,ref:t,tone:"inherit",children:i}),c[6]=n,c[7]=i,c[8]=u,c[9]=o,c[10]=t,c[11]=a,c[12]=m,c[13]=d):d=c[13],d});function it(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let ii={constrainSize:!0,placement:"left-start",portal:!0};function il(e){let t,n,i,l,o=(0,s.c)(35),{disabled:a,isAfterGroup:c,node:u}=e,p=(0,d.useGetI18nText)("i18n"in u?u:void 0);if("divider"===u.type){let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ej.MenuDivider,{}),o[0]=e):e=o[0],e}o[1]!==p||o[2]!==u?(t=p(u),o[1]=p,o[2]=u,o[3]=t):t=o[3];let{title:m}=t;if("group"===u.type){let e,t,n,i;if(0===u.children.length)return null;if(u.expanded){let e,t,n;return o[4]!==c?(e=c&&(0,r.jsx)(ej.MenuDivider,{}),o[4]=c,o[5]=e):e=o[5],o[6]!==a||o[7]!==u.children||o[8]!==u.disabled?(t=u.children.map((e,t)=>(0,r.jsx)(il,{disabled:a||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),o[6]=a,o[7]=u.children,o[8]=u.disabled,o[9]=t):t=o[9],o[10]!==e||o[11]!==t?(n=(0,r.jsxs)(r.Fragment,{children:[e,t]}),o[10]=e,o[11]=t,o[12]=n):n=o[12],n}o[13]!==c?(e=c&&(0,r.jsx)(ej.MenuDivider,{}),o[13]=c,o[14]=e):e=o[14];let l=u.icon;return o[15]!==a||o[16]!==u.children||o[17]!==u.disabled?(t=u.children.map((e,t)=>(0,r.jsx)(il,{disabled:a||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),o[15]=a,o[16]=u.children,o[17]=u.disabled,o[18]=t):t=o[18],o[19]!==a||o[20]!==u.icon||o[21]!==t||o[22]!==m?(n=(0,r.jsx)(tc.MenuGroup,{disabled:a,icon:l,popover:ii,text:m,children:t}),o[19]=a,o[20]=u.icon,o[21]=t,o[22]=m,o[23]=n):n=o[23],o[24]!==e||o[25]!==n?(i=(0,r.jsxs)(r.Fragment,{children:[e,n]}),o[24]=e,o[25]=n,o[26]=i):i=o[26],i}return o[27]!==c?(n=c&&(0,r.jsx)(ej.MenuDivider,{}),o[27]=c,o[28]=n):n=o[28],o[29]!==a||o[30]!==u?(i=(0,r.jsx)(io,{disabled:a,node:u}),o[29]=a,o[30]=u,o[31]=i):i=o[31],o[32]!==n||o[33]!==i?(l=(0,r.jsxs)(r.Fragment,{children:[n,i]}),o[32]=n,o[33]=i,o[34]=l):l=o[34],l}function io(e){let t,n=(0,s.c)(5),{node:i}=e;if(i.intent){let t;return n[0]!==i.intent||n[1]!==e?(t=(0,r.jsx)(is,{...e,intent:i.intent}),n[0]=i.intent,n[1]=e,n[2]=t):t=n[2],t}return n[3]!==e?(t=(0,r.jsx)(ir,{...e}),n[3]=e,n[4]=t):t=n[4],t}function ir(e){let t,n,i,l,o,a=(0,s.c)(19),{disabled:c,node:u}=e;a[0]!==u.disabled?(t="object"==typeof u.disabled&&(0,r.jsx)(ej.Text,{size:1,children:u.disabled.reason}),a[0]=u.disabled,a[1]=t):t=a[1];let p=t,{title:h}=(0,d.useI18nText)(u),g=c||!!u.disabled;a[2]!==u.hotkey?(n=u.hotkey?.split("+"),a[2]=u.hotkey,a[3]=n):n=a[3];let f=u.icon,x=u.iconRight||u.selected&&m.CheckmarkIcon,b=u.onAction,y=u.selected,v=u.tone;a[4]!==u.title?(i=it(u.title),a[4]=u.title,a[5]=i):i=a[5];let j=`action-${i}`;return a[6]!==u.icon||a[7]!==u.onAction||a[8]!==u.selected||a[9]!==u.tone||a[10]!==g||a[11]!==n||a[12]!==x||a[13]!==j||a[14]!==h?(l=(0,r.jsx)(ev.MenuItem,{disabled:g,hotkeys:n,icon:f,iconRight:x,onClick:b,pressed:y,text:h,tone:v,"data-testid":j}),a[6]=u.icon,a[7]=u.onAction,a[8]=u.selected,a[9]=u.tone,a[10]=g,a[11]=n,a[12]=x,a[13]=j,a[14]=h,a[15]=l):l=a[15],a[16]!==l||a[17]!==p?(o=(0,r.jsx)(d.TooltipOfDisabled,{content:p,placement:"left",children:l}),a[16]=l,a[17]=p,a[18]=o):o=a[18],o}function is(e){let t,n,i,l,o,a,c=(0,s.c)(23),{disabled:u,intent:p,node:h}=e;c[0]!==h.disabled?(t="object"==typeof h.disabled&&(0,r.jsx)(ej.Text,{size:1,children:h.disabled.reason}),c[0]=h.disabled,c[1]=t):t=c[1];let g=t;c[2]!==p.params||c[3]!==p.type?(n={intent:p.type,params:p.params},c[2]=p.params,c[3]=p.type,c[4]=n):n=c[4];let f=(0,eE.useIntentLink)(n);c[5]!==f||c[6]!==h?(i=e=>{f.onClick(e),h.onAction()},c[5]=f,c[6]=h,c[7]=i):i=c[7];let x=i,{title:b}=(0,d.useI18nText)(h),y=u||!!h.disabled;c[8]!==h.hotkey?(l=h.hotkey?.split("+"),c[8]=h.hotkey,c[9]=l):l=c[9];let v=h.selected?m.CheckmarkIcon:void 0;return c[10]!==x||c[11]!==f.href||c[12]!==h.icon||c[13]!==h.selected||c[14]!==h.tone||c[15]!==y||c[16]!==l||c[17]!==v||c[18]!==b?(o=(0,r.jsx)(ev.MenuItem,{as:"a",disabled:y,hotkeys:l,href:f.href,icon:h.icon,iconRight:v,onClick:x,pressed:h.selected,text:b,tone:h.tone}),c[10]=x,c[11]=f.href,c[12]=h.icon,c[13]=h.selected,c[14]=h.tone,c[15]=y,c[16]=l,c[17]=v,c[18]=b,c[19]=o):o=c[19],c[20]!==o||c[21]!==g?(a=(0,r.jsx)(d.TooltipOfDisabled,{content:g,placement:"left",children:o}),c[20]=o,c[21]=g,c[22]=a):a=c[22],a}let ia={constrainSize:!0,placement:"bottom",portal:!0};function id(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&id(e.children,t))}function ic(e){let t,n,i,l,o,c=(0,s.c)(13),{nodes:u,actionsNodes:p}=e,m=(0,a.useId)(),h=id(u,"critical"),g=id(u,"caution"),f=h?"critical":g?"caution":void 0;return c[0]!==f?(t=(0,r.jsx)(d.ContextMenuButton,{tone:f,"data-testid":"pane-context-menu-button"}),c[0]=f,c[1]=t):t=c[1],c[2]!==p?(n=p&&(0,r.jsxs)(r.Fragment,{children:[p,(0,r.jsx)(ej.MenuDivider,{})]}),c[2]=p,c[3]=n):n=c[3],c[4]!==u?(i=u.map((e,t)=>{let n=u[t-1]?.type==="group";return(0,r.jsx)(il,{isAfterGroup:n,node:e},e.key)}),c[4]=u,c[5]=i):i=c[5],c[6]!==n||c[7]!==i?(l=(0,r.jsxs)(ej.Menu,{children:[n,i]}),c[6]=n,c[7]=i,c[8]=l):l=c[8],c[9]!==m||c[10]!==t||c[11]!==l?(o=(0,r.jsx)(ev.MenuButton,{button:t,id:m,menu:l,popover:ia}),c[9]=m,c[10]=t,c[11]=l,c[12]=o):o=c[12],o}let iu=(0,e_.styled)(ej.Layer)`
  position: sticky;
  bottom: 0;
`,ip=(0,e_.styled)(ej.Card)`
  padding-bottom: env(safe-area-inset-bottom);
`,im=(0,a.forwardRef)(function(e,t){let n,i,l=(0,s.c)(7),{children:o,padding:a}=e,{collapsed:c}=n9();return l[0]!==o||l[1]!==a?(n=(0,r.jsx)(ip,{tone:"inherit",children:(0,r.jsx)(ej.Box,{padding:a,children:o})}),l[0]=o,l[1]=a,l[2]=n):n=l[2],l[3]!==c||l[4]!==t||l[5]!==n?(i=(0,r.jsx)(d.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,r.jsx)(iu,{"data-testid":"pane-footer",hidden:c,ref:t,children:n})}),l[3]=c,l[4]=t,l[5]=n,l[6]=i):i=l[6],i}),ih=(0,e_.styled)(ej.Layer)(({$border:e})=>e_.css`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${e?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),ig=(0,e_.styled)(ej.Flex)`
  transform-origin: calc(51px / 2);

  [data-collapsed] > div > & {
    transform: rotate(90deg);
  }
`,ix=(0,e_.styled)(ej.Card)(({theme:e})=>{let{fg:t,bg:n}=e.sanity.color.card.enabled;return e_.css`
    background-color: ${n};

    [data-ui='Text'] {
      color: ${t};
    }
  `}),ib=(0,e_.styled)(ew.TextSkeleton)`
  width: 66%;
  max-width: 175px;
`,iy=(0,e_.styled)(ej.Text)`
  cursor: default;
  outline: none;
`,iv=(0,a.forwardRef)(function(e,t){let n,i,l,o,a,c,u,p,m,h,g,f,x,b=(0,s.c)(48),{actions:y,backButton:v,border:j,contentAfter:w,loading:S,subActions:C,tabs:_,tabIndex:I,title:T,appendTitle:R}=e,{collapse:P,collapsed:E,expand:k,rootElement:D}=n9(),F=(0,ew.useElementRect)(D||null),A=E?F?.height||window.innerHeight:void 0;b[0]!==A?(n={width:A},b[0]=A,b[1]=n):n=b[1];let M=n;b[2]!==P||b[3]!==E?(i=()=>{E||P()},b[2]=P,b[3]=E,b[4]=i):i=b[4];let V=i;b[5]!==E||b[6]!==k?(l=()=>{E&&k()},b[5]=E,b[6]=k,b[7]=l):l=b[7];let L=l,z=!!(!E&&(_||C)),O=E?"":void 0,B=E?"":void 0;b[8]!==v?(o=v&&(0,r.jsx)(ej.Box,{flex:"none",children:v}),b[8]=v,b[9]=o):o=b[9];let H=v?1:2;b[10]!==S?(a=S&&(0,r.jsx)(ej.Box,{children:(0,r.jsx)(ib,{animated:!0,radius:1,size:1})}),b[10]=S,b[11]=a):a=b[11],b[12]!==R||b[13]!==S||b[14]!==T?(c=!S&&(0,r.jsxs)(ej.Flex,{align:"center",gap:1,children:[(0,r.jsx)(iy,{size:1,textOverflow:"ellipsis",weight:"semibold",children:T}),R]}),b[12]=R,b[13]=S,b[14]=T,b[15]=c):c=b[15],b[16]!==V||b[17]!==H||b[18]!==a||b[19]!==c||b[20]!==I?(u=(0,r.jsxs)(ix,{__unstable_focusRing:!0,flex:1,onClick:V,paddingLeft:H,padding:2,tabIndex:I,children:[a,c]}),b[16]=V,b[17]=H,b[18]=a,b[19]=c,b[20]=I,b[21]=u):u=b[21],b[22]!==y||b[23]!==E?(p=y&&(0,r.jsx)(ej.Box,{hidden:E,children:(0,r.jsx)(d.LegacyLayerProvider,{zOffset:"paneHeader",children:y})}),b[22]=y,b[23]=E,b[24]=p):p=b[24],b[25]!==u||b[26]!==p||b[27]!==o?(m=(0,r.jsxs)(ej.Flex,{align:"flex-start",gap:3,children:[o,u,p]}),b[25]=u,b[26]=p,b[27]=o,b[28]=m):m=b[28],b[29]!==E||b[30]!==z||b[31]!==C||b[32]!==_?(h=z&&(0,r.jsxs)(ej.Flex,{align:"center",hidden:E,overflow:"auto",children:[(0,r.jsx)(ej.Box,{flex:1,marginRight:3*!!C,children:_}),C]}),b[29]=E,b[30]=z,b[31]=C,b[32]=_,b[33]=h):h=b[33],b[34]!==L||b[35]!==M||b[36]!==m||b[37]!==h?(g=(0,r.jsxs)(ig,{direction:"column",gap:3,onClick:L,padding:3,sizing:"border",style:M,children:[m,h]}),b[34]=L,b[35]=M,b[36]=m,b[37]=h,b[38]=g):g=b[38];let $=!E&&w;return b[39]!==g||b[40]!==$||b[41]!==B?(f=(0,r.jsx)(d.LegacyLayerProvider,{zOffset:"paneHeader",children:(0,r.jsxs)(ej.Card,{"data-collapsed":B,tone:"inherit",children:[g,$]})}),b[39]=g,b[40]=$,b[41]=B,b[42]=f):f=b[42],b[43]!==j||b[44]!==t||b[45]!==f||b[46]!==O?(x=(0,r.jsx)(ej.LayerProvider,{zOffset:100,children:(0,r.jsx)(ih,{$border:j,"data-collapsed":O,"data-testid":"pane-header",ref:t,children:f})}),b[43]=j,b[44]=t,b[45]=f,b[46]=O,b[47]=x):x=b[47],x});function ij(e){return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof e.disabled?.reason?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function iw(e){let t=(0,s.c)(4),{node:n}=e;if("item"===n.type){let e;return t[0]!==n?(e=(0,r.jsx)(iS,{node:n}),t[0]=n,t[1]=e):e=t[1],e}if("group"===n.type){let e;return t[2]!==n?(e=(0,r.jsx)(i_,{node:n}),t[2]=n,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',n),null}function iS(e){let t,n,i,l,o,a=(0,s.c)(23),{node:c}=e,{title:u}=(0,d.useI18nText)(c),{t:p}=(0,d.useTranslation)();if(c.intent){let t;return a[0]!==c.intent||a[1]!==e?(t=(0,r.jsx)(iC,{...e,intent:c.intent}),a[0]=c.intent,a[1]=e,a[2]=t):t=a[2],t}a[3]!==c?(t=ij(c),a[3]=c,a[4]=t):t=a[4];let{disabledReason:m,ariaLabel:h,isDisabled:g}=t;a[5]!==h||a[6]!==p||a[7]!==u?(n=h||u||p("status-button.aria-label"),a[5]=h,a[6]=p,a[7]=u,a[8]=n):n=a[8],a[9]!==g||a[10]!==c.hotkey?(i=!g&&c.hotkey?c.hotkey.split("+"):void 0,a[9]=g,a[10]=c.hotkey,a[11]=i):i=a[11];let f=g?m:u;return a[12]!==i||a[13]!==f?(l={hotkeys:i,content:f},a[12]=i,a[13]=f,a[14]=l):l=a[14],a[15]!==g||a[16]!==c.icon||a[17]!==c.onAction||a[18]!==c.selected||a[19]!==c.tone||a[20]!==n||a[21]!==l?(o=(0,r.jsx)(d.StatusButton,{disabled:g,icon:c.icon,onClick:c.onAction,selected:c.selected,tone:c.tone,"aria-label":n,tooltipProps:l}),a[15]=g,a[16]=c.icon,a[17]=c.onAction,a[18]=c.selected,a[19]=c.tone,a[20]=n,a[21]=l,a[22]=o):o=a[22],o}function iC(e){let t,n,i,l,o,a,c,u=(0,s.c)(27),{intent:p,node:m}=e;u[0]!==p.params||u[1]!==p.type?(t={intent:p.type,params:p.params},u[0]=p.params,u[1]=p.type,u[2]=t):t=u[2];let h=(0,eE.useIntentLink)(t),{t:g}=(0,d.useTranslation)();u[3]!==h||u[4]!==m?(n=e=>{h.onClick(e),m.onAction()},u[3]=h,u[4]=m,u[5]=n):n=u[5];let f=n;u[6]!==m?(i=ij(m),u[6]=m,u[7]=i):i=u[7];let{disabledReason:x,ariaLabel:b,isDisabled:y}=i;u[8]!==b||u[9]!==m.title||u[10]!==g?(l=b||m.title||g("status-button.aria-label"),u[8]=b,u[9]=m.title,u[10]=g,u[11]=l):l=u[11],u[12]!==y||u[13]!==m.hotkey?(o=!y&&m.hotkey?m.hotkey.split("+"):void 0,u[12]=y,u[13]=m.hotkey,u[14]=o):o=u[14];let v=y?x:m.title;return u[15]!==o||u[16]!==v?(a={hotkeys:o,content:v,placement:"bottom",portal:!0},u[15]=o,u[16]=v,u[17]=a):a=u[17],u[18]!==f||u[19]!==h.href||u[20]!==y||u[21]!==m.icon||u[22]!==m.selected||u[23]!==m.tone||u[24]!==l||u[25]!==a?(c=(0,r.jsx)(d.StatusButton,{forwardedAs:"a",disabled:y,href:h.href,icon:m.icon,onClick:f,selected:m.selected,tone:m.tone,"aria-label":l,tooltipProps:a}),u[18]=f,u[19]=h.href,u[20]=y,u[21]=m.icon,u[22]=m.selected,u[23]=m.tone,u[24]=l,u[25]=a,u[26]=c):c=u[26],c}function i_(e){let t,n,i,l,o,c=(0,s.c)(16),{node:u}=e,{title:p}=(0,d.useI18nText)(u),h=!!u.disabled,g=u.icon??m.UnknownIcon;c[0]!==u.title?(t={content:u.title,portal:!0},c[0]=u.title,c[1]=t):t=c[1],c[2]!==h||c[3]!==g||c[4]!==t||c[5]!==p?(n=(0,r.jsx)(ev.Button,{disabled:h,icon:g,label:p,mode:"bleed",tooltipProps:t}),c[2]=h,c[3]=g,c[4]=t,c[5]=p,c[6]=n):n=c[6];let f=(0,a.useId)();return c[7]!==u.children||c[8]!==u.disabled?(i=u.children.map((e,t)=>(0,r.jsx)(il,{disabled:!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),c[7]=u.children,c[8]=u.disabled,c[9]=i):i=c[9],c[10]!==i?(l=(0,r.jsx)(ej.Menu,{children:i}),c[10]=i,c[11]=l):l=c[11],c[12]!==n||c[13]!==f||c[14]!==l?(o=(0,r.jsx)(ev.MenuButton,{button:n,id:f,menu:l}),c[12]=n,c[13]=f,c[14]=l,c[15]=o):o=c[15],o}let iI=(0,e_.styled)(ej.Card)`
  transition: opacity 200ms;
  position: relative;
  z-index: 1;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  opacity: 0;

  &:not([hidden]) {
    display: flex;
  }

  &:not([data-collapsed]) {
    overflow: auto;
  }

  &[data-mounted] {
    opacity: 1;
  }

  &[data-resizing] {
    pointer-events: none;
  }
`,iT=[];function iR(e){let t,n,i,l,o,d,c,p,m,h,g,f,x,b,y,v,j,w=(0,s.c)(41);w[0]!==e?({children:t,minWidth:n,onCollapse:i,onExpand:l,...o}=e,w[0]=e,w[1]=t,w[2]=n,w[3]=i,w[4]=l,w[5]=o):(t=w[1],n=w[2],i=w[3],l=w[4],o=w[5]);let[S]=(0,a.useState)(iP),[C,_]=(0,a.useState)(null),I=(0,ew.useElementRect)(C)?.width||0,T=void 0!==I&&n?I<n:void 0;w[6]===Symbol.for("react.memo_cache_sentinel")?(d={expandedElement:null,panes:[],resizing:!1},w[6]=d):d=w[6];let[R,P]=(0,a.useState)(d);w[7]!==S||w[8]!==C?(c=()=>S.setRootElement(C),p=[S,C],w[7]=S,w[8]=C,w[9]=c,w[10]=p):(c=w[9],p=w[10]),(0,a.useEffect)(c,p),w[11]!==S||w[12]!==I?(m=()=>S.setRootWidth(I),h=[S,I],w[11]=S,w[12]=I,w[13]=m,w[14]=h):(m=w[13],h=w[14]),(0,a.useEffect)(m,h),w[15]!==S?(g=()=>S.subscribe(P),f=[S],w[15]=S,w[16]=g,w[17]=f):(g=w[16],f=w[17]),(0,a.useEffect)(g,f),w[18]!==T||w[19]!==i||w[20]!==l?(x=()=>{void 0!==T&&(T&&i&&i(),!T&&l&&l())},b=[T,i,l],w[18]=T,w[19]=i,w[20]=l,w[21]=x,w[22]=b):(x=w[21],b=w[22]),(0,a.useEffect)(x,b),w[23]!==T||w[24]!==S.collapse||w[25]!==S.expand||w[26]!==S.mount||w[27]!==S.resize||w[28]!==R.expandedElement||w[29]!==R.panes||w[30]!==R.resizing?(y={collapse:S.collapse,collapsed:T,expand:S.expand,expandedElement:R.expandedElement,mount:S.mount,panes:R.panes,resize:S.resize,resizing:R.resizing},w[23]=T,w[24]=S.collapse,w[25]=S.expand,w[26]=S.mount,w[27]=S.resize,w[28]=R.expandedElement,w[29]=R.panes,w[30]=R.resizing,w[31]=y):y=w[31];let E=y,k=T?"":void 0,D=R.resizing?"":void 0,F=I?"":void 0;return w[32]!==t||w[33]!==o||w[34]!==k||w[35]!==D||w[36]!==F?(v=(0,r.jsx)(iI,{"data-ui":"PaneLayout",...o,"data-collapsed":k,"data-resizing":D,"data-mounted":F,ref:_,children:t}),w[32]=t,w[33]=o,w[34]=k,w[35]=D,w[36]=F,w[37]=v):v=w[37],w[38]!==E||w[39]!==v?(j=(0,r.jsx)(u.PaneLayoutContext.Provider,{value:E,children:v}),w[38]=E,w[39]=v,w[40]=j):j=w[40],j}function iP(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,l={},o=null,r=0,s=null,a=null,d=new Map,c=!1;function u(e){i.delete(e),s=e,p()}return{collapse:function(e){i.add(e),s===e&&(s=null),p()},expand:u,maximize:function(e){a=e,p()},mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),o&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let l=Array.from(t.childNodes).indexOf(i);if(n.unshift(l),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||iT,l=n.get(t)||iT,o=Math.max(i.length,l.length);for(let e=0;e<o;e+=1){let t=i[e]||-1,n=l[e]||-1;if(t!==n)return t-n}return 0})}(o,t),u(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),a===e&&(a=null),p()}},resize:function(e,i,o){let r=t.indexOf(i),s=n.get(i);if(!s)return;let a=t[r+1],u=n.get(a);if(u){if("start"===e&&(c=!0,l.left={element:i,flex:s.flex||1,width:i.offsetWidth},l.right={element:a,flex:u.flex||1,width:a.offsetWidth},p()),"move"===e&&l.left&&l.right){let e,t,n,r,c,m,h,g,f,x,b,y;d=new Map;let{leftW:v,rightW:j,leftFlex:w,rightFlex:S}=(e={flex:l.left.flex+l.right.flex,width:l.left.width+l.right.width},t=s.minWidth??204,n=u.minWidth??204,r=Math.min(s.maxWidth||1/0,e.width-n),c=Math.min(u.maxWidth||1/0,e.width-t),m=t-l.left.width,m<(h=l.right.width-c)&&(m=h),g=l.right.width-n,g>(f=r-l.left.width)&&(g=f),x=Math.min(Math.max(o,m),g),b=l.left.width+x,y=l.right.width-x,{leftFlex:b/e.width*e.flex,leftW:b,rightFlex:y/e.width*e.flex,rightW:y});d.set(i,{flex:w,width:v}),d.set(a,{flex:S,width:j}),p()}if("end"===e){c=!1;let e=d.get(i),t=d.get(a);n.set(i,{...s,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:e?.flex??s.flex}),n.set(a,{...u,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:t?.flex??u.flex}),d=new Map,delete l.left,delete l.right,p()}}},setRootElement:function(e){o=e},setRootWidth:function(e){r=e,p()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function p(){if(!r)return;let l=[];for(let e of t)e!==s&&l.unshift(e);s&&l.unshift(s);let o=new WeakMap,u=l.length,p=l[0],m=r-(u-1)*51;for(let e of l){let t=n.get(e);if(!t)continue;let l=t.currentMinWidth||t.minWidth||204,r=e===p,s=i.has(e),c=l>m,u=!r&&(s||c),h=d.get(e);o.set(e,{element:e,collapsed:u,currentMinWidth:h?.width??t.currentMinWidth,currentMaxWidth:h?.width??t.currentMaxWidth,flex:h?.flex??t.flex??1,maximized:e===a}),u?m-=51:m-=l-51}let h=[];for(let e of t){let t=o.get(e);t&&h.push(t)}for(let n of e)n({expandedElement:s||t[t.length-1]||null,panes:h,resizing:c})}}()}function iE(e){let t,n,i,l=(0,s.c)(12),{children:o,currentMinWidth:a,flex:d,minWidth:c,paneKey:u,title:p,tone:m}=e,h=void 0===p?"Error":p,g=void 0===m?"critical":m;return l[0]!==h?(t=(0,r.jsx)(iv,{title:h}),l[0]=h,l[1]=t):t=l[1],l[2]!==o?(n=(0,r.jsx)(ie,{overflow:"auto",children:(0,r.jsx)(ej.Box,{paddingX:4,paddingY:5,children:o})}),l[2]=o,l[3]=n):n=l[3],l[4]!==a||l[5]!==d||l[6]!==c||l[7]!==u||l[8]!==t||l[9]!==n||l[10]!==g?(i=(0,r.jsxs)(n8,{currentMinWidth:a,flex:d,id:u,minWidth:c,tone:g,children:[t,n]}),l[4]=a,l[5]=d,l[6]=c,l[7]=u,l[8]=t,l[9]=n,l[10]=g,l[11]=i):i=l[11],i}function ik(e){let t,n,i,l=(0,s.c)(6),{children:o,ms:d}=e,c=void 0===d?0:d,[u,p]=(0,a.useState)(c<=0);if(l[0]!==c?(t=()=>{if(c<=0)return;let e=setTimeout(()=>p(!0),c);return()=>{clearTimeout(e)}},n=[c],l[0]=c,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,a.useEffect)(t,n),!u||!o){let e;return l[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(r.Fragment,{}),l[3]=e):e=l[3],e}return l[4]!==o?(i="function"==typeof o?o():o,l[4]=o,l[5]=i):i=l[5],i}function iD(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(d.isDev){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?`Structure path: ${e.join(" ➝ ")}`:""];t.push({ms:1e4,message:n.join(`
`)})}let n=(0,e3.of)(null);return(0,e4.merge)(...t.map(e=>n.pipe((0,eO.mapTo)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,eB.delay)(e.ms))))}let iF=(0,e_.styled)(ej.Flex)`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`,iA=(0,a.memo)(e=>{let t,n,i,l,o,c,u,p,m,h,g=(0,s.c)(28),{delay:f,flex:x,message:b,minWidth:y,paneKey:v,path:j,selected:w,title:S,tone:_}=e,I=void 0===f?300:f,T=void 0===b?iD:b,{t:R}=(0,d.useTranslation)(C);e:{if("function"==typeof T){let e;g[0]!==T||g[1]!==j?(e=T(j?j.split(";"):[]),g[0]=T,g[1]=j,g[2]=e):e=g[2],t=e;break e}t=T}let P=t;g[3]!==P||g[4]!==R?(n=()=>"string"==typeof P?P:R("panes.resolving.default-message"),g[3]=P,g[4]=R,g[5]=n):n=g[5];let[E,k]=(0,a.useState)(n);g[6]!==P||g[7]!==R?(i=()=>{if("object"!=typeof P||"function"!=typeof P.subscribe)return;let e=P.subscribe(e=>{k("messageKey"in e?R(e.messageKey):e.message)});return()=>e.unsubscribe()},l=[P,R],g[6]=P,g[7]=R,g[8]=i,g[9]=l):(i=g[8],l=g[9]),(0,a.useEffect)(i,l);let[D,F]=(0,a.useState)(null),[A,M]=(0,a.useState)(!1);g[10]!==D?(o=()=>{if(D)return(0,ew._raf2)(()=>M(!0))},c=[D],g[10]=D,g[11]=o,g[12]=c):(o=g[11],c=g[12]),(0,a.useEffect)(o,c);let V=A?"":void 0,L=S||E;g[13]!==L?(u=(0,r.jsx)(d.LoadingBlock,{showText:!0,title:L}),g[13]=L,g[14]=u):u=g[14],g[15]!==u||g[16]!==V?(p=(0,r.jsx)(iF,{align:"center","data-mounted":V,direction:"column",height:"fill",justify:"center",ref:F,children:u}),g[15]=u,g[16]=V,g[17]=p):p=g[17];let z=p;return g[18]!==z||g[19]!==I?(m=(0,r.jsx)(ie,{children:z}),g[18]=z,g[19]=I,g[20]=m):m=g[20],g[21]!==x||g[22]!==y||g[23]!==v||g[24]!==w||g[25]!==m||g[26]!==_?(h=(0,r.jsx)(n8,{flex:x,id:v,minWidth:y,selected:w,tone:_,children:m}),g[21]=x,g[22]=y,g[23]=v,g[24]=w,g[25]=m,g[26]=_,g[27]=h):h=g[27],h});function iM(){let e=(0,a.useContext)(u.DocumentPaneContext);if(!e)throw Error("DocumentPane: missing context value");return e}function iV(e){let t,n,i=(0,s.c)(8),{children:l,documentId:o,documentType:a}=e;return i[0]!==l||i[1]!==o||i[2]!==a?(t=(0,r.jsx)(iL,{documentId:o,documentType:a,children:l}),i[0]=l,i[1]=o,i[2]=a,i[3]=t):t=i[3],i[4]!==o||i[5]!==a||i[6]!==t?(n=(0,r.jsx)(d.CommentsEnabledProvider,{documentId:o,documentType:a,children:t}),i[4]=o,i[5]=a,i[6]=t,i[7]=n):n=i[7],n}function iL(e){let t,n,i,l,o,c,u=(0,s.c)(26),{children:p,documentId:m,documentType:h}=e,{enabled:g}=(0,d.useCommentsEnabled)(),{connectionState:f,onPathOpen:x,inspector:b,openInspector:y}=iM(),{selectedReleaseId:v}=(0,d.usePerspective)(),{params:j,setParams:w}=l_(),{resolveIntentLink:S}=(0,eE.useRouter)(),C=j?.comment,_=(0,a.useRef)(j);u[0]!==j?(t=()=>{_.current=j},n=[j],u[0]=j,u[1]=t,u[2]=n):(t=u[1],n=u[2]),(0,a.useLayoutEffect)(t,n),u[3]!==m||u[4]!==h||u[5]!==S?(i=e=>{let t=S("edit",{id:m,type:h,inspect:d.COMMENTS_INSPECTOR_NAME,comment:e});return`${window.location.origin}${t}`},u[3]=m,u[4]=h,u[5]=S,u[6]=i):i=u[6];let I=i;u[7]!==w?(l=()=>{w({..._.current,comment:void 0})},u[7]=w,u[8]=l):l=u[8];let T=l;u[9]!==b?.name||u[10]!==y?(o=()=>{b?.name!==d.COMMENTS_INSPECTOR_NAME&&y(d.COMMENTS_INSPECTOR_NAME)},u[9]=b?.name,u[10]=y,u[11]=o):o=u[11];let R=o;if(!g){let e;return u[12]!==p?(e=(0,r.jsx)(r.Fragment,{children:p}),u[12]=p,u[13]=e):e=u[13],e}let P=b?.name===d.COMMENTS_INSPECTOR_NAME,E="connecting"===f;return u[14]!==p||u[15]!==m||u[16]!==h||u[17]!==I||u[18]!==T||u[19]!==R||u[20]!==x||u[21]!==C||u[22]!==v||u[23]!==P||u[24]!==E?(c=(0,r.jsx)(d.CommentsProvider,{documentId:m,documentType:h,getCommentLink:I,isCommentsOpen:P,isConnecting:E,onClearSelectedComment:T,onCommentsOpen:R,onPathOpen:x,selectedCommentId:C,sortOrder:"desc",type:"field",releaseId:v,children:p}),u[14]=p,u[15]=m,u[16]=h,u[17]=I,u[18]=T,u[19]=R,u[20]=x,u[21]=C,u[22]=v,u[23]=P,u[24]=E,u[25]=c):c=u[25],c}function iz(e){let t,n,i,l,o,c=(0,s.c)(14),{children:u}=e,{actions:p,editState:m,isInitialValueLoading:h,revisionId:g}=iM(),f=(0,a.useRef)(null);c[0]!==m||c[1]!==h||c[2]!==g?(t=m?{...m,revision:g||void 0,initialValueResolved:!h}:null,c[0]=m,c[1]=h,c[2]=g,c[3]=t):t=c[3];let x=t;if(!x)return null;c[4]===Symbol.for("react.memo_cache_sentinel")?(n=()=>f.current?.(),c[4]=n):n=c[4],c[5]!==x?(i={...x,onComplete:n},c[5]=x,c[6]=i):i=c[6];let b=p||d.EMPTY_ARRAY;return c[7]!==x||c[8]!==u?(l=e=>{let{states:t}=e;return(0,r.jsx)(iB,{states:t,actionProps:x,children:u})},c[7]=x,c[8]=u,c[9]=l):l=c[9],c[10]!==i||c[11]!==b||c[12]!==l?(o=(0,r.jsx)(d.GetHookCollectionState,{args:i,hooks:b,resetRef:f,children:l}),c[10]=i,c[11]=b,c[12]=l,c[13]=o):o=c[13],o}iA.displayName="Memo(LoadingPane)";let iO=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule","discardVersion","unpublishVersion"];function iB(e){let t,n,i,l=(0,s.c)(9),{states:o,children:a,actionProps:c}=e,{t:p}=(0,d.useTranslation)(C);l[0]!==c?(t=(0,d.getDocumentIdForCanvasLink)(c),l[0]=c,l[1]=t):t=l[1];let{isLinked:m}=(0,d.useCanvasCompanionDoc)(t);return l[2]!==m||l[3]!==o||l[4]!==p?(n=m?o.map(e=>e.action&&iO.includes(e.action)?e:{...e,disabled:!0,title:p("action.disabled-by-canvas.tooltip")}):o,l[2]=m,l[3]=o,l[4]=p,l[5]=n):n=l[5],l[6]!==a||l[7]!==n?(i=(0,r.jsx)(u.DocumentActionsStateContext.Provider,{value:n,children:a}),l[6]=a,l[7]=n,l[8]=i):i=l[8],i}function iH(){let e=(0,a.useContext)(u.StructureToolContext);if(!e)throw Error("StructureTool: missing context value");return e}let i$={},iN="inspect:",iG=[{id:"inspectors"},{id:"links"}],iU="sanity/structure/history";function iq(e){let t,n,i,l,o,c,u,p,m,h=(0,s.c)(22),{documentId:g,documentType:f,inspectors:x,onMenuItems:b}=e,y=x.length;h[0]!==y?(t=()=>Array.from(Array(y)),h[0]=y,h[1]=t):t=h[1];let[v,j]=(0,a.useState)(t);h[2]!==y||h[3]!==v?(n=()=>{if(v.length!==y){let e=Array.from(Array(y));for(let t=0;t<y;t++)e[t]=v[t];j(e)}},i=[y,v],h[2]=y,h[3]=v,h[4]=n,h[5]=i):(n=h[4],i=h[5]),(0,a.useEffect)(n,i),h[6]===Symbol.for("react.memo_cache_sentinel")?(l=(e,t)=>{j(n=>{let i=[...n];return i[e]=t,i})},h[6]=l):l=h[6];let w=l;if(h[7]!==v||h[8]!==b?(o=()=>{b(v.filter(Boolean))},c=[v,b],h[7]=v,h[8]=b,h[9]=o,h[10]=c):(o=h[9],c=h[10]),(0,a.useEffect)(o,c),h[11]!==g||h[12]!==f||h[13]!==x){let e;h[15]!==g||h[16]!==f?(e=(e,t)=>e.useMenuItem?[function({documentId:e,documentType:t,index:n,setMenuItem:i,useMenuItem:l}){return(0,a.memo)(function(){let o,r,c,u=(0,s.c)(4);u[0]===Symbol.for("react.memo_cache_sentinel")?(o={documentId:e,documentType:t},u[0]=o):o=u[0];let p=l(o),m=(0,d.useUnique)(p);return u[1]!==m?(r=()=>{i(n,m)},c=[m],u[1]=m,u[2]=r,u[3]=c):(r=u[2],c=u[3]),(0,a.useEffect)(r,c),null})}({documentId:g,documentType:f,index:t,setMenuItem:w,useMenuItem:e.useMenuItem}),e.name]:[iK,""],h[15]=g,h[16]=f,h[17]=e):e=h[17],u=x.map(e),h[11]=g,h[12]=f,h[13]=x,h[14]=u}else u=h[14];let S=u;return h[18]!==S?(p=S.map(iW),h[18]=S,h[19]=p):p=h[19],h[20]!==p?(m=(0,r.jsx)(r.Fragment,{children:p}),h[20]=p,h[21]=m):m=h[21],m}function iW(e){let[t,n]=e;return n&&(0,r.jsx)(t,{},n)}function iK(){return null}function iY(){let e,t,n,i,l=(0,s.c)(22),{connectionState:o,schemaType:r,editState:a,isDeleted:c,lastRevisionDocument:u}=iM(),{selectedPerspectiveName:p}=(0,d.usePerspective)(),{t:m}=(0,d.useTranslation)(C);e:{if(c){e=u;break e}if(p&&(0,d.isPublishedPerspective)(p)){e=a?.published;break e}e=a?.version||a?.draft||a?.published}let h=e,g=!!h;t:{if(c&&u&&r)try{let e;l[0]!==u||l[1]!==r?(e=(0,d.prepareForPreview)(u,r),l[0]=u,l[1]=r,l[2]=e):e=l[2],t=e;break t}catch(e){console.warn("Failed to prepare preview for deleted document:",e),t=null;break t}t=null}let f=t,x=g&&!c;l[3]!==h||l[4]!==r||l[5]!==x?(n={enabled:x,schemaType:r,value:h},l[3]=h,l[4]=r,l[5]=x,l[6]=n):n=l[6];let{error:b,value:y}=(0,d.unstable_useValuePreview)(n);if("connecting"===o&&!g){let e;return l[7]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},l[7]=e):e=l[7],e}if(c&&f){let e;return l[8]!==f.title?(e={error:void 0,title:f.title},l[8]=f.title,l[9]=e):e=l[9],e}if(!y&&!c){let e,t,n=r?.title||r?.name;return l[10]!==m||l[11]!==n?(e=m("panes.document-header-title.new.text",{schemaType:n}),l[10]=m,l[11]=n,l[12]=e):e=l[12],l[13]!==e?(t={error:void 0,title:e},l[13]=e,l[14]=t):t=l[14],t}if(b){let e,t;return l[15]!==b.message||l[16]!==m?(e=m("panes.document-list-pane.error.text",{error:b.message}),l[15]=b.message,l[16]=m,l[17]=e):e=l[17],l[18]!==e?(t={error:e,title:void 0},l[18]=e,l[19]=t):t=l[19],t}let v=y?.title;return l[20]!==v?(i={error:void 0,title:v},l[20]=v,l[21]=i):i=l[21],i}iq.displayName="DocumentInspectorMenuItemsResolver";let iX=["patch","commit"],iJ=(0,a.memo)(function(){let e,t,n,i,l,o=(0,s.c)(13),{push:c}=(0,ew.useToast)(),{documentId:u,documentType:p,value:m}=iM(),h=iY(),g=h.error,f=(0,d.useDocumentOperationEvent)(u,p),x=(0,a.useRef)(f),b=l_(),{t:y}=(0,d.useTranslation)(C),{handleOpenDialog:v}=(0,d.useDocumentLimitsUpsellContext)();e:{if(!h.title&&!g&&!iX.includes(f?.op)&&"string"==typeof m.title&&f?.type==="success"){e=m.title;break e}e=h.title}let j=e;o[0]!==y||o[1]!==j?(t=j||y("panes.document-operation-results.operation-undefined-title"),o[0]=y,o[1]=j,o[2]=t):t=o[2];let w=t;o[3]!==w?(n=w.length>25?`${w.slice(0,25)}...`:w,o[3]=w,o[4]=n):n=o[4];let S=n;return o[5]!==S||o[6]!==f||o[7]!==v||o[8]!==b||o[9]!==c||o[10]!==y?(i=()=>{let e;if(f&&f!==x.current){if("error"===f.type){if((0,d.isDocumentLimitError)(f.error))return void v("document_action");c({closable:!0,duration:3e4,status:"error",title:y("panes.document-operation-results.operation-error",{context:f.op}),description:(0,r.jsxs)("details",{children:[(0,r.jsx)("summary",{children:y("panes.document-operation-results.error.summary.title")}),f.error.message]})})}return"success"!==f.type||iX.includes(f.op)||c({closable:!0,status:"success",title:(0,r.jsx)(d.Translate,{context:f.op,i18nKey:"panes.document-operation-results.operation-success",t:y,values:{op:f.op,title:S},components:{Strong:"strong"}})}),"success"===f.type&&"delete"===f.op&&(e=setTimeout(()=>b.closeCurrentAndAfter(),0)),x.current=f,()=>clearTimeout(e)}},l=[f,b,c,y,S,v],o[5]=S,o[6]=f,o[7]=v,o[8]=b,o[9]=c,o[10]=y,o[11]=i,o[12]=l):(i=o[11],l=o[12]),(0,a.useEffect)(i,l),null}),iQ=(0,e_.styled)(ej.Card)({position:"relative",zIndex:"1",lineHeight:"0"});function iZ(e){let t,n,i,l,o,a,c,u,p,h,g,f,x=(0,s.c)(25);x[0]!==e?({as:i,children:t,closeButtonLabel:n,onClose:l,title:a,...o}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=i,x[4]=l,x[5]=o,x[6]=a):(t=x[1],n=x[2],i=x[3],l=x[4],o=x[5],a=x[6]);let{t:b}=(0,d.useTranslation)(C);return x[7]!==a?(c=(0,r.jsx)(ej.Box,{flex:1,padding:3,children:(0,r.jsx)(ej.Text,{as:"h1",size:1,weight:"medium",children:a})}),x[7]=a,x[8]=c):c=x[8],x[9]!==b?(u=b("document-inspector.close-button.tooltip"),x[9]=b,x[10]=u):u=x[10],x[11]!==u?(p={content:u},x[11]=u,x[12]=p):p=x[12],x[13]!==n||x[14]!==l||x[15]!==p?(h=(0,r.jsx)(ej.Box,{flex:"none",padding:1,children:(0,r.jsx)(ev.Button,{"aria-label":n,icon:m.CloseIcon,mode:"bleed",onClick:l,tooltipProps:p})}),x[13]=n,x[14]=l,x[15]=p,x[16]=h):h=x[16],x[17]!==c||x[18]!==h?(g=(0,r.jsxs)(ej.Flex,{padding:2,children:[c,h]}),x[17]=c,x[18]=h,x[19]=g):g=x[19],x[20]!==t||x[21]!==i||x[22]!==o||x[23]!==g?(f=(0,r.jsxs)(iQ,{...o,as:i,children:[g,t]}),x[20]=t,x[21]=i,x[22]=o,x[23]=g,x[24]=f):f=x[24],f}function i0(e){let t,n,i,l=(0,s.c)(14),{documentId:o,documentType:a,flex:c}=e,{collapsed:u}=n9(),{closeInspector:p,inspector:m}=iM(),{features:h}=iH();l[0]!==p||l[1]!==m?(t=()=>{m&&p(m.name)},l[0]=p,l[1]=m,l[2]=t):t=l[2];let g=t;if(u||!m)return null;let f=m.component;l[3]!==f||l[4]!==o||l[5]!==a||l[6]!==g?(n=(0,r.jsx)(f,{onClose:g,documentId:o,documentType:a}),l[3]=f,l[4]=o,l[5]=a,l[6]=g,l[7]=n):n=l[7];let x=n;if(h.resizablePanes){let e;return l[8]!==x||l[9]!==c?(e=(0,r.jsx)(d.Resizable,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,resizerPosition:"left",maxWidth:540,minWidth:320,children:x}),l[8]=x,l[9]=c,l[10]=e):e=l[10],e}return l[11]!==x||l[12]!==c?(i=(0,r.jsx)(ej.Box,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,children:x}),l[11]=x,l[12]=c,l[13]=i):i=l[13],i}function i1(e,t,n){let i,l,o,r,a=(0,s.c)(16),c=(0,d.useKeyValueStore)();a[0]!==t||a[1]!==e?(i=["studio.structure-tool",e,t].filter(Boolean),a[0]=t,a[1]=e,a[2]=i):i=a[2];let u=i.join(".");if(a[3]!==n||a[4]!==c||a[5]!==u){let e;a[7]!==n?(e=e=>null===e?n:e,a[7]=n,a[8]=e):e=a[8],l=c.getKey(u).pipe((0,eH.map)(e)),a[3]=n,a[4]=c,a[5]=u,a[6]=l}else l=a[6];let p=(0,eP.useObservable)(l,n);a[9]!==c||a[10]!==u||a[11]!==p?(o=async e=>{e!==p&&await c.setKey(u,e)},a[9]=c,a[10]=u,a[11]=p,a[12]=o):o=a[12];let m=o;return a[13]!==m||a[14]!==p?(r=[p,m],a[13]=m,a[14]=p,a[15]=r):r=a[15],r}let i2={id:"parsed",title:"document-inspector.view-mode.parsed"},i3={id:"raw",title:"document-inspector.view-mode.raw-json"},i4=[i2,i3],i5=new tB.default({maxSize:1e3});function i6(e){let{path:t}=e,n=i5.get(t);void 0!==n&&i5.set(t,!n)}function i8(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function i7(e){i8(e.target)}function i9(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),i8(e.currentTarget))}let le=e_.styled.div(({theme:e})=>{let{color:t,fonts:n,space:i}=e.sanity;return e_.css`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${n.code.family};
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,ej.rem)(i[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,ej.rem)(i[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - ${(0,ej.rem)(i[4])} + 3px);
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,ej.rem)(i[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${t.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${t.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,ej.rem)(i[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${t.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${t.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${t.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function lt(e){let t,n,i,l=(0,s.c)(8),{onChange:o,query:a}=e;l[0]!==o?(t=e=>o(e.target.value),l[0]=o,l[1]=t):t=l[1];let c=t,{t:u}=(0,d.useTranslation)(C);l[2]!==u?(n=u("document-inspector.search.placeholder"),l[2]=u,l[3]=n):n=l[3];let p=a||"";return l[4]!==c||l[5]!==n||l[6]!==p?(i=(0,r.jsx)(ej.TextInput,{icon:m.SearchIcon,onChange:c,placeholder:n,radius:2,value:p}),l[4]=c,l[5]=n,l[6]=p,l[7]=i):i=l[7],i}function ln(e){let t,n,i,l,o,a,c,u,p,m,h,g,f,x,b,y,v=(0,s.c)(49),{value:j}=e,{onInspectClose:w,paneKey:S}=iM(),_=`${S}_inspect_`,[I,T]=i1("inspect-view-mode",null,"parsed");v[0]!==I?(t=i4.find(e=>e.id===I),v[0]=I,v[1]=t):t=v[1];let R=t;v[2]!==T?(n=async()=>{await T(i2.id)},v[2]=T,v[3]=n):n=v[3];let P=n;v[4]!==T?(i=async()=>{await T(i3.id)},v[4]=T,v[5]=i):i=v[5];let E=i,{t:k}=(0,d.useTranslation)(C),D=`${_}dialog`;v[6]!==k||v[7]!==j?(l=(0,d.isRecord)(j)&&(0,d.isString)(j._id)&&(0,d.isString)(j._type)?(0,r.jsx)(d.Translate,{t:k,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,r.jsx)("em",{children:(0,r.jsx)(sM,{document:j})})}}):(0,r.jsx)("em",{children:k("document-inspector.dialog.title-no-value")}),v[6]=k,v[7]=j,v[8]=l):l=v[8],v[9]===Symbol.for("react.memo_cache_sentinel")?(o={position:"sticky",bottom:0,zIndex:3},v[9]=o):o=v[9];let F=`${_}tabpanel`,A=`${_}tab-${i2.id}`;v[10]!==k?(a=k(i2.title),v[10]=k,v[11]=a):a=v[11];let M=R===i2;v[12]!==P||v[13]!==F||v[14]!==A||v[15]!==a||v[16]!==M?(c=(0,r.jsx)(ev.Tab,{"aria-controls":F,id:A,label:a,onClick:P,selected:M}),v[12]=P,v[13]=F,v[14]=A,v[15]=a,v[16]=M,v[17]=c):c=v[17];let V=`${_}tabpanel`,L=`${_}tab-${i3.id}`;v[18]!==k?(u=k(i3.title),v[18]=k,v[19]=u):u=v[19];let z=R===i3;v[20]!==E||v[21]!==V||v[22]!==L||v[23]!==u||v[24]!==z?(p=(0,r.jsx)(ev.Tab,{"aria-controls":V,id:L,label:u,onClick:E,selected:z}),v[20]=E,v[21]=V,v[22]=L,v[23]=u,v[24]=z,v[25]=p):p=v[25],v[26]!==c||v[27]!==p?(m=(0,r.jsx)(ej.Card,{padding:3,paddingTop:0,shadow:1,style:o,children:(0,r.jsxs)(ej.TabList,{space:1,children:[c,p]})}),v[26]=c,v[27]=p,v[28]=m):m=v[28];let O=`${_}tab-${I}`,B=`${_}tabpanel`;return v[29]===Symbol.for("react.memo_cache_sentinel")?(h={outline:"none"},v[29]=h):h=v[29],v[30]!==j||v[31]!==R?(g=R===i2&&(0,r.jsx)(le,{children:(0,r.jsx)(tO,{data:j,isExpanded:function e(t,n){let i=i5.get(t);return void 0===i?(i5.set(t,Array.isArray(n)||(0,d.isRecord)(n)),e(t,n)):i},onClick:i6,search:lt,filterOptions:{ignoreCase:!0}})}),v[30]=j,v[31]=R,v[32]=g):g=v[32],v[33]!==j||v[34]!==R?(f=R===i3&&(0,r.jsx)(ej.Code,{language:"json",tabIndex:0,onKeyDown:i9,onDoubleClick:i7,size:1,children:JSON.stringify(j,null,2)}),v[33]=j,v[34]=R,v[35]=f):f=v[35],v[36]!==O||v[37]!==B||v[38]!==g||v[39]!==f?(x=(0,r.jsxs)(ew.TabPanel,{"aria-labelledby":O,flex:1,id:B,overflow:"auto",padding:4,style:h,children:[g,f]}),v[36]=O,v[37]=B,v[38]=g,v[39]=f,v[40]=x):x=v[40],v[41]!==m||v[42]!==x?(b=(0,r.jsxs)(ej.Flex,{direction:"column",height:"fill",children:[m,x]}),v[41]=m,v[42]=x,v[43]=b):b=v[43],v[44]!==w||v[45]!==b||v[46]!==D||v[47]!==l?(y=(0,r.jsx)(ev.Dialog,{bodyHeight:"fill",id:D,header:l,onClose:w,onClickOutside:w,padding:!1,width:2,children:b}),v[44]=w,v[45]=b,v[46]=D,v[47]=l,v[48]=y):y=v[48],y}function li(e){let t,n,i,l,o,a,d,c,u,p,m,h=(0,s.c)(22);h[0]!==e?({action:n,content:i,icon:t,tone:o,paddingY:a,...l}=e,h[0]=e,h[1]=t,h[2]=n,h[3]=i,h[4]=l,h[5]=o,h[6]=a):(t=h[1],n=h[2],i=h[3],l=h[4],o=h[5],a=h[6]);let g=void 0===o?"transparent":o,f=void 0===a?2:a;return h[7]!==t?(d=t&&(0,r.jsx)(ej.Text,{size:0,children:(0,r.jsx)(t,{})}),h[7]=t,h[8]=d):d=h[8],h[9]!==i?(c=(0,r.jsx)(ej.Flex,{align:"center",flex:1,gap:2,paddingY:2,children:i}),h[9]=i,h[10]=c):c=h[10],h[11]!==n?(u=n&&(0,r.jsx)(ev.Button,{...n,mode:n.mode||"ghost",tone:n.tone||"default"}),h[11]=n,h[12]=u):u=h[12],h[13]!==d||h[14]!==c||h[15]!==u?(p=(0,r.jsxs)(ej.Flex,{align:"center",gap:3,paddingX:2,children:[d,c,u]}),h[13]=d,h[14]=c,h[15]=u,h[16]=p):p=h[16],h[17]!==f||h[18]!==l||h[19]!==p||h[20]!==g?(m=(0,r.jsx)(ej.Box,{padding:1,children:(0,r.jsx)(ej.Card,{radius:3,paddingX:2,paddingY:f,tone:g,...l,children:p})}),h[17]=f,h[18]=l,h[19]=p,h[20]=g,h[21]=m):m=h[21],m}function ll(){let e=(0,s.c)(3),{isDeleted:t,isDeleting:n,ready:i}=iM(),{selectedPerspective:l}=(0,d.usePerspective)();if(!i)return null;if(!(0,d.isPublishedPerspective)(l)&&!(0,d.isDraftPerspective)(l)&&"archived"===l.state){let t;return e[0]!==l?(t=(0,r.jsx)(lr,{release:l}),e[0]=l,e[1]=t):t=e[1],t}if(t&&!n){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(lo,{}),e[2]=t):t=e[2],t}}function lo(){let e,t,n,i,l,o,a=(0,s.c)(17),{documentId:c,documentType:u}=iM(),{restore:p}=(0,d.useDocumentOperation)(c,u),{navigateIntent:h}=(0,eE.useRouter)();a[0]!==c||a[1]!==u||a[2]!==h||a[3]!==p?(e=()=>{p.execute("lastRevision"),h("edit",{id:c,type:u})},a[0]=c,a[1]=u,a[2]=h,a[3]=p,a[4]=e):e=a[4];let g=e,{t:f}=(0,d.useTranslation)(C);return a[5]!==f?(t=f("banners.deleted-document-banner.restore-button.text"),a[5]=f,a[6]=t):t=a[6],a[7]!==g||a[8]!==t?(n={onClick:g,text:t},a[7]=g,a[8]=t,a[9]=n):n=a[9],a[10]!==f?(i=f("banners.deleted-document-banner.text"),a[10]=f,a[11]=i):i=a[11],a[12]!==i?(l=(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:i}),a[12]=i,a[13]=l):l=a[13],a[14]!==n||a[15]!==l?(o=(0,r.jsx)(li,{action:n,content:l,"data-testid":"deleted-document-banner",icon:m.ReadOnlyIcon}),a[14]=n,a[15]=l,a[16]=o):o=a[16],o}let lr=e=>{let t,n,i,l=(0,s.c)(8),{release:o}=e,{t:a}=(0,d.useTranslation)();return l[0]!==o.metadata?.title||l[1]!==a?(t=o.metadata?.title||a("release.placeholder-untitled-release"),l[0]=o.metadata?.title,l[1]=a,l[2]=t):t=l[2],l[3]!==t?(n={title:t},l[3]=t,l[4]=n):n=l[4],l[5]!==a||l[6]!==n?(i=(0,r.jsx)(li,{tone:"caution",content:(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:(0,r.jsx)(d.Translate,{t:a,i18nKey:"banners.deleted-release-banner.text",values:n})}),"data-testid":"deleted-release-banner",icon:m.DocumentRemoveIcon}),l[5]=a,l[6]=n,l[7]=i):i=l[7],i};function ls(){let e,t,n=(0,s.c)(5),{schemaType:i}=iM(),{t:l}=(0,d.useTranslation)(C);return(0,eS.isDeprecatedSchemaType)(i)?(n[0]!==l?(e=(0,r.jsx)(d.Translate,{t:l,i18nKey:"banners.deprecated-document-type-banner.text"}),n[0]=l,n[1]=e):e=n[1],n[2]!==i.deprecated.reason||n[3]!==e?(t=(0,r.jsx)(li,{content:(0,r.jsxs)(ej.Text,{size:1,weight:"medium",children:[e," ",i.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:m.ErrorOutlineIcon}),n[2]=i.deprecated.reason,n[3]=e,n[4]=t):t=n[4],t):null}let la=(0,tp.defineEvent)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),ld=(0,tp.defineEvent)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),lc=(0,e_.styled)(ej.Box)`
  box-sizing: border-box;
`;function lu(e){let t,n,i,l,o,c,u,p,m,h,g,f,x,b,y,v=(0,s.c)(56),{onClose:j,onRequestSubmitted:w}=e,{t:S}=(0,d.useTranslation)(C),_=(0,tu.useTelemetry)(),I=`request-permissions-${(0,a.useId)()}`,T=(0,d.useProjectId)();v[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},v[0]=t):t=v[0];let R=(0,d.useClient)(t),P=(0,ew.useToast)(),E=(0,d.useZIndex)(),[k,D]=(0,a.useState)(!1),[F,A]=(0,a.useState)(""),[M,V]=(0,a.useState)(),[L,z]=(0,a.useState)(!1),[O,B]=(0,a.useState)(!1);e:{let e,t="administrator";if(!T||!R){let e;v[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,e3.of)(t),v[1]=e):e=v[1],n=e;break e}if(v[2]!==R.observable||v[3]!==T){let n,i;v[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(lm).find(lp)?"editor":t,v[5]=n):n=v[5],v[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,e3.of)(t),v[6]=i):i=v[6],e=R.observable.request({url:`/projects/${T}/roles`}).pipe((0,eH.map)(n),(0,eN.startWith)(t),(0,e$.catchError)(i)),v[2]=R.observable,v[3]=T,v[4]=e}else e=v[4];n=e}let H=(0,eP.useObservable)(n);v[7]!==R||v[8]!==F||v[9]!==w||v[10]!==T||v[11]!==H||v[12]!==_||v[13]!==P?(i=()=>{D(!0),R.request({url:`/access/project/${T}/requests`,method:"post",body:{note:F,requestUrl:window?.location.href,requestedRole:H,type:"role"}}).then(e=>{e&&(w&&w(),_.log(ld),P.push({title:"Edit access requested"}))}).catch(e=>{let t=e?.response?.statusCode,n=e?.response?.body?.message;429===t&&(z(!0),V(n)),409===t?(B(!0),V(n)):P.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{D(!1)})},v[7]=R,v[8]=F,v[9]=w,v[10]=T,v[11]=H,v[12]=_,v[13]=P,v[14]=i):i=v[14];let $=i,N=E.fullscreen;v[15]!==S?(l=S("request-permission-dialog.header.text"),v[15]=S,v[16]=l):l=v[16],v[17]!==S?(o=S("confirm-dialog.cancel-button.fallback-text"),v[17]=S,v[18]=o):o=v[18],v[19]!==j||v[20]!==o?(c={onClick:j,text:o},v[19]=j,v[20]=o,v[21]=c):c=v[21];let G=L||O;return v[22]!==S?(u=S("request-permission-dialog.confirm-button.text"),v[22]=S,v[23]=u):u=v[23],v[24]!==k||v[25]!==$||v[26]!==G||v[27]!==u?(p={onClick:$,loading:k,disabled:G,text:u,tone:"primary",type:"submit"},v[24]=k,v[25]=$,v[26]=G,v[27]=u,v[28]=p):p=v[28],v[29]!==p||v[30]!==c?(m={cancelButton:c,confirmButton:p},v[29]=p,v[30]=c,v[31]=m):m=v[31],v[32]!==S?(h=S("request-permission-dialog.description.text"),v[32]=S,v[33]=h):h=v[33],v[34]!==h?(g=(0,r.jsx)(ej.Text,{children:h}),v[34]=h,v[35]=g):g=v[35],v[36]!==O||v[37]!==L||v[38]!==k||v[39]!==M||v[40]!==F||v[41]!==$||v[42]!==S?(f=L||O?(0,r.jsx)(ej.Card,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,r.jsxs)(ej.Text,{size:1,children:[L&&(0,r.jsx)(r.Fragment,{children:M??S("request-permission-dialog.warning.limit-reached.text")}),O&&(0,r.jsx)(r.Fragment,{children:M??S("request-permission-dialog.warning.denied.text")})]})}):(0,r.jsxs)(ej.Stack,{space:3,paddingBottom:0,children:[(0,r.jsx)(ej.TextInput,{placeholder:S("request-permission-dialog.note-input.placeholder.text"),disabled:k,onKeyDown:e=>{"Enter"===e.key&&$()},maxLength:150,value:F,onChange:e=>{A(e.currentTarget.value)}}),(0,r.jsx)(ej.Text,{align:"right",muted:!0,size:1,children:`${F.length}/150`})]}),v[36]=O,v[37]=L,v[38]=k,v[39]=M,v[40]=F,v[41]=$,v[42]=S,v[43]=f):f=v[43],v[44]!==g||v[45]!==f?(x=(0,r.jsx)(lc,{children:(0,r.jsxs)(ej.Stack,{space:4,children:[g,f]})}),v[44]=g,v[45]=f,v[46]=x):x=v[46],v[47]!==I||v[48]!==j||v[49]!==m||v[50]!==x||v[51]!==l?(b=(0,r.jsx)(ev.Dialog,{width:1,id:I,header:l,footer:m,onClose:j,onClickOutside:j,children:x}),v[47]=I,v[48]=j,v[49]=m,v[50]=x,v[51]=l,v[52]=b):b=v[52],v[53]!==b||v[54]!==E.fullscreen?(y=(0,r.jsx)(ew.DialogProvider,{position:"fixed",zOffset:N,children:b}),v[53]=b,v[54]=E.fullscreen,v[55]=y):y=v[55],y}function lp(e){return"editor"===e.name}function lm(e){return e?.appliesToUsers}(0,e_.styled)(ej.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;let lh={loading:!0,error:!1,status:void 0},lg={loading:!1,error:!1,status:"none"},lf={loading:!1,error:!1,status:"declined"},lx={loading:!1,error:!1,status:"pending"},lb={loading:!1,error:!1,status:"expired"};function ly(e){let t,n,i,l,o,c,u,p,h=(0,s.c)(29),{requiredPermission:g}=e,f=(0,d.useCurrentUser)(),{data:x,loading:b,error:y}=(()=>{let e,t,n,i=(0,s.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},i[0]=e):e=i[0];let l=(0,d.useClient)(e),o=(0,d.useProjectId)();e:{var r,a;let e;if(!l||!o){let e;i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,e3.of)(lg),i[1]=e):e=i[1],t=e;break e}i[2]!==l||i[3]!==o?(r=l,a=o,e=r.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,eH.map)(e=>{if(!e||0===e.length)return lg;let t=e.filter(e=>e.resourceId===a&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,tH.isAfter)((0,t$.addWeeks)(new Date(n.createdAt),2),new Date)?lf:t.find(e=>"pending"===e.status&&(0,tH.isAfter)((0,t$.addWeeks)(new Date(e.createdAt),2),new Date))?lx:t.find(e=>"pending"===e.status&&(0,tN.isBefore)((0,t$.addWeeks)(new Date(e.createdAt),2),new Date))?lb:lg}),(0,e$.catchError)(e=>(console.error("Failed to fetch access requests",e),(0,e3.of)({loading:!1,error:!0,status:void 0}))),(0,eN.startWith)(lh)),i[2]=l,i[3]=o,i[4]=e):e=i[4],t=e}let c=t,{loading:u,error:p,status:m}=(0,eP.useObservable)(c,lh);return i[5]!==p||i[6]!==u||i[7]!==m?(n={data:m,loading:u,error:p},i[5]=p,i[6]=u,i[7]=m,i[8]=n):n=i[8],n})(),[v,j]=(0,a.useState)(!1),w="pending"===x||"declined"===x||v,S=f?.roles||[],_=1===S.length&&"viewer"===S[0].name,[I,T]=(0,a.useState)(!1);h[0]===Symbol.for("react.memo_cache_sentinel")?(t={style:"short"},h[0]=t):t=h[0];let R=(0,d.useListFormat)(t),{t:P}=(0,d.useTranslation)(C),E=(0,tu.useTelemetry)(),k=S.map(lj),D=R.formatToParts(k).map(lv);return h[1]!==D?(n={Roles:()=>(0,r.jsx)(r.Fragment,{children:D})},h[1]=D,h[2]=n):n=h[2],h[3]!==k||h[4]!==D.length?(i={count:D.length,roles:k},h[3]=k,h[4]=D.length,h[5]=i):i=h[5],h[6]!==g||h[7]!==P||h[8]!==n||h[9]!==i?(l=(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:(0,r.jsx)(d.Translate,{t:P,i18nKey:"banners.permission-check-banner.missing-permission",components:n,values:i,context:g})}),h[6]=g,h[7]=P,h[8]=n,h[9]=i,h[10]=l):l=h[10],h[11]!==_||h[12]!==w||h[13]!==y||h[14]!==b||h[15]!==x||h[16]!==T||h[17]!==P||h[18]!==E?(o=_&&x&&!y&&!b?{onClick:w?void 0:()=>{T(!0),E.log(la)},text:P(w?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:w?"default":"primary",disabled:w,mode:w?"bleed":void 0}:void 0,h[11]=_,h[12]=w,h[13]=y,h[14]=b,h[15]=x,h[16]=T,h[17]=P,h[18]=E,h[19]=o):o=h[19],h[20]!==l||h[21]!==o?(c=(0,r.jsx)(li,{content:l,action:o,"data-testid":"permission-check-banner",icon:m.ReadOnlyIcon}),h[20]=l,h[21]=o,h[22]=c):c=h[22],h[23]!==T||h[24]!==I?(u=I&&(0,r.jsx)(lu,{onClose:()=>T(!1),onRequestSubmitted:()=>{j(!0),T(!1)}}),h[23]=T,h[24]=I,h[25]=u):u=h[25],h[26]!==c||h[27]!==u?(p=(0,r.jsxs)(r.Fragment,{children:[c,u]}),h[26]=c,h[27]=u,h[28]=p):p=h[28],p}function lv(e){return"element"===e.type?(0,r.jsx)("code",{children:e.value},e.value):e.value}function lj(e){return e.title}let lw=(0,a.memo)(()=>{let e,t,n,i,l,o,a,u,p=(0,s.c)(30),h=(0,d.useDocumentPreviewStore)(),{selectedReleaseId:g}=(0,d.usePerspective)(),{params:f,groupIndex:x,routerPanesState:b,replaceCurrent:y,BackLink:v}=l_(),j=b[x]?.[0].id,w=b[x-1]?.[0],S=w?.id,_=!!w?.params?.rev;p[0]!==f?(e=f?.parentRefPath&&(0,td.fromString)(f.parentRefPath)||null,p[0]=f,p[1]=e):e=p[1];let I=e,{t:T}=(0,d.useTranslation)(C);e:{let e,n=I?.[0];if(!S||!n||!I){let e;p[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,e3.of)({loading:!1}),p[2]=e):e=p[2],t=e;break e}if(p[3]!==h||p[4]!==S||p[5]!==I||p[6]!==n||p[7]!==g){let t,i=(0,c.getPublishedId)(S),l=(0,td.fromString)(n),o=l.findIndex(lS);p[9]!==I?(t=e=>{let{draft:t,published:n,version:i}=e;return{loading:!1,result:{availability:{draft:t.availability,published:n.availability,...i?.availability?{version:i.availability}:{}},refValue:(0,td.get)(i?.snapshot||t.snapshot||n.snapshot,I)?._ref}}},p[9]=I,p[10]=t):t=p[10],e=(0,e5.concat)((0,e3.of)({loading:!0}),h.unstable_observePathsDocumentPair(i,-1===o?l:l.slice(0,o),{version:g}).pipe((0,eG.debounceTime)(750),(0,eH.map)(t))),p[3]=h,p[4]=S,p[5]=I,p[6]=n,p[7]=g,p[8]=e}else e=p[8];t=e}let R=t;p[11]===Symbol.for("react.memo_cache_sentinel")?(n={loading:!0},p[11]=n):n=p[11];let P=(0,eP.useObservable)(R,n);p[12]!==f||p[13]!==P.loading||p[14]!==P.result||p[15]!==y?(i=()=>{P.loading||P.result?.refValue&&y({id:P.result.refValue,params:f})},p[12]=f,p[13]=P.loading,p[14]=P.result,p[15]=y,p[16]=i):i=p[16];let E=i;return S&&I&&!_&&!P.loading&&(P.result?.availability.draft.available||P.result?.availability.published.available)&&P.result?.refValue!==j?(p[17]!==v||p[18]!==E||p[19]!==P.result?.refValue||p[20]!==T?(l=P.result?.refValue?{onClick:E,icon:m.SyncIcon,text:T("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:v,icon:m.CloseIcon,text:T("banners.reference-changed-banner.reason-removed.close-button.text")},p[17]=v,p[18]=E,p[19]=P.result?.refValue,p[20]=T,p[21]=l):l=p[21],p[22]!==P.result?.refValue||p[23]!==T?(o=T(P.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text"),p[22]=P.result?.refValue,p[23]=T,p[24]=o):o=p[24],p[25]!==o?(a=(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:o}),p[25]=o,p[26]=a):a=p[26],p[27]!==l||p[28]!==a?(u=(0,r.jsx)(li,{action:l,"data-testid":"reference-changed-banner",content:a,icon:m.WarningOutlineIcon,tone:"caution"}),p[27]=l,p[28]=a,p[29]=u):u=p[29],u):null});function lS(e){return"object"==typeof e&&"_key"in e}function lC(){let e,t=(0,s.c)(2),{t:n}=(0,d.useTranslation)(C);return t[0]!==n?(e=(0,r.jsx)(li,{tone:"caution",icon:m.WarningOutlineIcon,content:(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(d.Translate,{t:n,i18nKey:"banners.scheduled-draft-override-banner.text"})})}),t[0]=n,t[1]=e):e=t[1],e}function l_(){return(0,a.useContext)(u.PaneRouterContext)}function lI(){let e,t,n,i,l,o,a,c,u,p,m=(0,s.c)(28),{t:h}=(0,d.useTranslation)(C),{t:g}=(0,d.useTranslation)(),{data:f}=(0,d.useArchivedReleases)(),{params:x,setParams:b}=l_();m[0]!==x||m[1]!==b?(e=()=>{b({...x,rev:x?.historyEvent||void 0,since:void 0,historyVersion:void 0})},m[0]=x,m[1]=b,m[2]=e):e=m[2];let y=e;if(m[3]!==f||m[4]!==x?.historyVersion){let e;m[6]!==x?.historyVersion?(e=e=>(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===x?.historyVersion,m[6]=x?.historyVersion,m[7]=e):e=m[7],t=f.find(e),m[3]=f,m[4]=x?.historyVersion,m[5]=t}else t=m[5];let v=t;e:{if(v?.state==="published"){n="banners.published-release.description";break e}if(v&&(0,d.isCardinalityOneRelease)(v)){n="banners.archived-scheduled-draft.description";break e}n="banners.archived-release.description"}let j=n;m[8]!==v?.metadata.title||m[9]!==g?(i=v?.metadata.title||g("release.placeholder-untitled-release"),m[8]=v?.metadata.title,m[9]=g,m[10]=i):i=m[10];let w=i;return m[11]!==w?(l={title:w},m[11]=w,m[12]=l):l=m[12],m[13]!==v?(o=(0,d.getVersionInlineBadge)(v),m[13]=v,m[14]=o):o=m[14],m[15]!==o?(a={VersionBadge:o},m[15]=o,m[16]=a):a=m[16],m[17]!==j||m[18]!==h||m[19]!==l||m[20]!==a?(c=(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(d.Translate,{t:h,i18nKey:j,values:l,components:a})}),m[17]=j,m[18]=h,m[19]=l,m[20]=a,m[21]=c):c=m[21],m[22]!==y||m[23]!==x?.archivedRelease?(u=x?.archivedRelease?void 0:{text:"Go back to published version",onClick:y},m[22]=y,m[23]=x?.archivedRelease,m[24]=u):u=m[24],m[25]!==c||m[26]!==u?(p=(0,r.jsx)(li,{tone:"caution",content:c,action:u}),m[25]=c,m[26]=u,m[27]=p):p=m[27],p}lw.displayName="Memo(ReferenceChangedBanner)";let lT=e_.styled.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 180px;
  display: flex;
`,lR=e=>{let t,n,i,l,o,c,u,p,h,g,f,x,b=(0,s.c)(24),{onClose:y,isLockedByCanvas:v}=e,{t:j}=(0,d.useTranslation)(C),w=(0,a.useRef)(null);b[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>[w.current],b[0]=t):t=b[0],(0,ej.useClickOutsideEvent)(y,t),b[1]!==v||b[2]!==j?(n=j(v?"canvas.banner.popover-heading":"canvas.banner.editable.popover-heading"),b[1]=v,b[2]=j,b[3]=n):n=b[3];let S=n;b[4]!==v||b[5]!==j?(i=j(v?"canvas.banner.popover-description":"canvas.banner.editable.popover-description"),b[4]=v,b[5]=j,b[6]=i):i=b[6];let _=i;return b[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(lT,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),b[7]=l):l=b[7],b[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(ej.Text,{size:1,weight:"semibold",children:"Canvas"}),b[8]=o):o=b[8],b[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsxs)(ej.Flex,{paddingY:1,gap:2,children:[o,(0,r.jsx)(ej.Text,{size:1,muted:!0,children:(0,r.jsx)(m.ComposeSparklesIcon,{})})]}),b[9]=c):c=b[9],b[10]!==S?(u=(0,r.jsx)(ej.Box,{paddingTop:3,children:(0,r.jsx)(ej.Heading,{size:1,children:S})}),b[10]=S,b[11]=u):u=b[11],b[12]!==_?(p=(0,r.jsx)(ej.Box,{paddingTop:4,children:(0,r.jsx)(ej.Text,{size:1,children:_})}),b[12]=_,b[13]=p):p=b[13],b[14]!==u||b[15]!==p?(h=(0,r.jsxs)(ej.Flex,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[c,u,p]}),b[14]=u,b[15]=p,b[16]=h):h=b[16],b[17]!==j?(g=j("canvas.banner.popover-button-text"),b[17]=j,b[18]=g):g=b[18],b[19]!==g?(f=(0,r.jsx)(ej.Flex,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,r.jsx)(ev.Button,{mode:"bleed",text:g,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:m.LaunchIcon})}),b[19]=g,b[20]=f):f=b[20],b[21]!==f||b[22]!==h?(x=(0,r.jsx)(ej.Card,{radius:3,overflow:"hidden",width:0,ref:w,children:(0,r.jsxs)(ej.Container,{width:0,children:[l,h,f]})}),b[21]=f,b[22]=h,b[23]=x):x=b[23],x},lP=e=>{let t,n,i,l,o,c,u,p,h=(0,s.c)(21),{documentId:g}=e,{t:f}=(0,d.useTranslation)(C),[x,b]=(0,a.useState)(!1),y=(0,d.getDocumentVariantType)(g),{isLockedByCanvas:v}=(0,d.useCanvasCompanionDoc)(g);e:{let e;if(!v){let e;h[0]!==f?(e=f("canvas.banner.editable.linked-text"),h[0]=f,h[1]=e):e=h[1],t=e;break e}if("published"===y){let e;h[2]!==f?(e=f("canvas.banner.linked-text.published"),h[2]=f,h[3]=e):e=h[3],t=e;break e}if("draft"===y){let e;h[4]!==f?(e=f("canvas.banner.linked-text.draft"),h[4]=f,h[5]=e):e=h[5],t=e;break e}h[6]!==f?(e=f("canvas.banner.linked-text.version"),h[6]=f,h[7]=e):e=h[7],t=e}let j=t;h[8]===Symbol.for("react.memo_cache_sentinel")?(n=()=>b(lk),h[8]=n):n=h[8];let w=n;h[9]===Symbol.for("react.memo_cache_sentinel")?(i=()=>b(!1),h[9]=i):i=h[9];let S=i;return h[10]!==j?(l=(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:j}),h[10]=j,h[11]=l):l=h[11],h[12]!==v?(o=(0,r.jsx)(lR,{onClose:S,isLockedByCanvas:v}),h[12]=v,h[13]=o):o=h[13],h[14]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(ev.Button,{tooltipProps:null,mode:"bleed",tone:"default",icon:m.InfoOutlineIcon,onClick:w}),h[14]=c):c=h[14],h[15]!==x||h[16]!==o?(u=(0,r.jsx)(ev.Popover,{open:x,size:0,tone:"default",portal:!0,placement:"bottom-start",content:o,children:c}),h[15]=x,h[16]=o,h[17]=u):u=h[17],h[18]!==l||h[19]!==u?(p=(0,r.jsxs)(ej.Flex,{align:"center",gap:2,children:[l,u]}),h[18]=l,h[19]=u,h[20]=p):p=h[20],p};function lE(){let e,t,n,i,l=(0,s.c)(10),{documentId:o,displayed:a}=iM(),{t:c}=(0,d.useTranslation)(C),u=a?._id||o,{companionDoc:p}=(0,d.useCanvasCompanionDoc)(u),m=(0,d.useNavigateToCanvasDoc)(p?.canvasDocumentId,"banner");return p?(l[0]!==u?(e=(0,r.jsx)(lP,{documentId:u}),l[0]=u,l[1]=e):e=l[1],l[2]!==c?(t=c("canvas.banner.edit-in-canvas-action"),l[2]=c,l[3]=t):t=l[3],l[4]!==m||l[5]!==t?(n={mode:"ghost",text:t,onClick:m},l[4]=m,l[5]=t,l[6]=n):n=l[6],l[7]!==e||l[8]!==n?(i=(0,r.jsx)(li,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:e,action:n}),l[7]=e,l[8]=n,l[9]=i):i=l[9],i):null}function lk(e){return!e}let lD=e=>{let t,n,i,l,o,a,c,u,p,h=(0,s.c)(27),{schemaType:g,selectedPerspective:f,reason:x}=e,{t:b}=(0,d.useTranslation)(C),{document:y}=(0,d.useWorkspace)(),{drafts:v}=y,{enabled:j}=v;h[0]!==j||h[1]!==g?(t=e=>{let{perspective:t}=e;return{disabled:!(0,d.isPerspectiveWriteable)({selectedPerspective:t,isDraftModelEnabled:j,schemaType:g}).result}},h[0]=j,h[1]=g,h[2]=t):t=h[2];let w=t;return h[3]!==x||h[4]!==b?(n="PUBLISHED_NOT_WRITEABLE"===x&&b("banners.choose-new-document-destination.cannot-create-published-document"),h[3]=x,h[4]=b,h[5]=n):n=h[5],h[6]!==x||h[7]!==b?(i="DRAFTS_NOT_WRITEABLE"===x&&b("banners.choose-new-document-destination.cannot-create-draft-document"),h[6]=x,h[7]=b,h[8]=i):i=h[8],h[9]!==x||h[10]!==f||h[11]!==b?(l="RELEASE_NOT_ACTIVE"===x&&(0,d.isReleaseDocument)(f)&&(0,r.jsx)(d.Translate,{t:b,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:f.metadata.title},components:{VersionBadge:(0,d.getVersionInlineBadge)(f)}}),h[9]=x,h[10]=f,h[11]=b,h[12]=l):l=h[12],h[13]!==b?(o=b("banners.choose-new-document-destination.choose-destination"),h[13]=b,h[14]=o):o=h[14],h[15]!==o?(a=(0,r.jsxs)(r.Fragment,{children:[" ",o]}),h[15]=o,h[16]=a):a=h[16],h[17]!==n||h[18]!==i||h[19]!==l||h[20]!==a?(c=(0,r.jsxs)(ej.Text,{size:1,children:[n,i,l,a]}),h[17]=n,h[18]=i,h[19]=l,h[20]=a,h[21]=c):c=h[21],h[22]!==w?(u=(0,r.jsx)(d.ReleasesNav,{menuItemProps:w}),h[22]=w,h[23]=u):u=h[23],h[24]!==u||h[25]!==c?(p=(0,r.jsx)(li,{tone:"caution",icon:m.WarningOutlineIcon,content:(0,r.jsxs)(ej.Flex,{align:"center",gap:2,children:[c,u]})}),h[24]=u,h[25]=c,h[26]=p):p=h[26],p};function lF(){let e,t,n=(0,s.c)(5),{value:i}=iM(),{documentLinkedBannerContent:l}=(0,d.useSanityCreateConfig)().components??{};n[0]!==i?(e=(0,d.getSanityCreateLinkMetadata)(i),n[0]=i,n[1]=e):e=n[1];let o=e;return l&&o?(n[2]!==l||n[3]!==o?(t=(0,r.jsx)(li,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,r.jsx)(l,{metadata:o})}),n[2]=l,n[3]=o,n[4]=t):t=n[4],t):null}function lA(e){let t,n,i,l,o,c,u,p,m,h,g,f,x=(0,s.c)(39),{documentId:b,currentRelease:y,isScheduledRelease:v}=e,j=y??d.LATEST;x[0]!==j?(t=(0,d.getReleaseTone)(j),x[0]=j,x[1]=t):t=x[1];let w=t,{t:S}=(0,d.useTranslation)(C),{t:_}=(0,d.useTranslation)(),{createVersion:I}=(0,d.useVersionOperations)(),[T,R]=(0,a.useState)(),P=(0,ew.useToast)();x[2]!==I||x[3]!==y._id||x[4]!==b||x[5]!==S||x[6]!==P?(n=async()=>{if(y._id){R({status:"creating",lastUpdate:new Date});try{await I((0,d.getReleaseIdFromReleaseDocumentId)(y._id),b),R({status:"created",lastUpdate:new Date})}catch(e){P.push({status:"error",closable:!0,title:S("banners.release.error.title"),description:S("banners.release.error.description",{message:e.message})}),R(void 0)}}},x[2]=I,x[3]=y._id,x[4]=b,x[5]=S,x[6]=P,x[7]=n):n=x[7];let E=n,k=function(e){let t,n,i,l=(0,s.c)(4);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Date,l[0]=t):t=l[0];let[o,r]=(0,a.useState)(t);return 200!==l[1]?(n=()=>{let e=setInterval(()=>{r(new Date)},200);return()=>clearInterval(e)},i=[200],l[1]=200,l[2]=n,l[3]=i):(n=l[2],i=l[3]),(0,a.useEffect)(n,i),o}(200),D=T?.status==="created"&&k.getTime()-T.lastUpdate.getTime()>1e3;return x[8]!==S?(i=S("banners.release.waiting.title"),x[8]=S,x[9]=i):i=x[9],x[10]!==S?(l=S("banners.release.waiting.description"),x[10]=S,x[11]=l):l=x[11],x[12]!==D||x[13]!==i||x[14]!==l?(o={status:"info",id:"add-document-to-release",enabled:D,closable:!0,title:i,description:l},x[12]=D,x[13]=i,x[14]=l,x[15]=o):o=x[15],(0,d.useConditionalToast)(o),x[16]!==y.metadata?.title||x[17]!==_?(c=y?.metadata?.title||_("release.placeholder-untitled-release"),x[16]=y.metadata?.title,x[17]=_,x[18]=c):c=x[18],x[19]!==c?(u={title:c},x[19]=c,x[20]=u):u=x[20],x[21]!==y?(p=(0,d.getVersionInlineBadge)(y),x[21]=y,x[22]=p):p=x[22],x[23]!==p?(m={VersionBadge:p},x[23]=p,x[24]=m):m=x[24],x[25]!==S||x[26]!==m||x[27]!==u?(h=(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(d.Translate,{i18nKey:"banners.release.not-in-release",t:S,values:u,components:m})}),x[25]=S,x[26]=m,x[27]=u,x[28]=h):h=x[28],x[29]!==E||x[30]!==v||x[31]!==S||x[32]!==w||x[33]!==T?(g=v?void 0:{text:S("banners.release.action.add-to-release"),tone:w,disabled:!!T,onClick:E,mode:"default"},x[29]=E,x[30]=v,x[31]=S,x[32]=w,x[33]=T,x[34]=g):g=x[34],x[35]!==h||x[36]!==g||x[37]!==w?(f=(0,r.jsx)(li,{tone:w,content:h,action:g}),x[35]=h,x[36]=g,x[37]=w,x[38]=f):f=x[38],f}let lM=(0,tp.defineEvent)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),lV=e=>{let t,n,i,l,o,u,p,h,g,f,x,b,y,v,j,w=(0,s.c)(47),{displayed:S,documentId:_,schemaType:I,i18nKey:T,isEditBlocking:R}=e,{t:P}=(0,d.useTranslation)(C),[E,k]=(0,a.useState)(!1),[D,F]=(0,a.useState)(!1),A=(0,tu.useTelemetry)(),{publish:M,discardChanges:V}=(0,d.useDocumentOperation)(_,S?._type||"");w[0]!==M||w[1]!==A?(t=()=>{M.execute(),k(!0),A.log(lM,{liveEditResolveType:"publish"})},w[0]=M,w[1]=A,w[2]=t):t=w[2];let L=t;w[3]!==V||w[4]!==A?(n=()=>{V.execute(),F(!0),A.log(lM,{liveEditResolveType:"discard"})},w[3]=V,w[4]=A,w[5]=n):n=w[5];let z=n;w[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>()=>{k(!1),F(!1)},w[6]=i):i=w[6],(0,a.useEffect)(i);let O=nE();w[7]!==O||w[8]!==S?._id||w[9]!==I.name?(l=()=>{typeof S?._id>"u"||O.navigateDiffView({mode:"version",previousDocument:{type:I.name,id:(0,c.getPublishedId)(S?._id)},nextDocument:{type:I.name,id:(0,c.getDraftId)(S?._id)}})},w[7]=O,w[8]=S?._id,w[9]=I.name,w[10]=l):l=w[10];let B=l;return w[11]!==I.title?(o={schemaType:I.title},w[11]=I.title,w[12]=o):o=w[12],w[13]!==T||w[14]!==P||w[15]!==o?(u=(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:(0,r.jsx)(d.Translate,{t:P,i18nKey:T,values:o})}),w[13]=T,w[14]=P,w[15]=o,w[16]=u):u=w[16],w[17]!==P?(p=P("banners.obsolete-draft.actions.compare-draft.text"),w[17]=P,w[18]=p):p=w[18],w[19]!==B||w[20]!==p?(h=(0,r.jsx)(ev.Button,{text:p,mode:"ghost",onClick:B}),w[19]=B,w[20]=p,w[21]=h):h=w[21],w[22]!==P?(g=P("banners.obsolete-draft.actions.publish-draft.text"),w[22]=P,w[23]=g):g=w[23],w[24]!==R||w[25]!==P?(f=R?{content:P("banners.live-edit-draft-banner.publish.tooltip")}:{},w[24]=R,w[25]=P,w[26]=f):f=w[26],w[27]!==L||w[28]!==E||w[29]!==f||w[30]!==g?(x=(0,r.jsx)(ev.Button,{onClick:L,text:g,tooltipProps:f,loading:E,tone:"positive"}),w[27]=L,w[28]=E,w[29]=f,w[30]=g,w[31]=x):x=w[31],w[32]!==P?(b=P("banners.obsolete-draft.actions.discard-draft.text"),w[32]=P,w[33]=b):b=w[33],w[34]!==R||w[35]!==P?(y=R?{content:P("banners.live-edit-draft-banner.discard.tooltip")}:{},w[34]=R,w[35]=P,w[36]=y):y=w[36],w[37]!==z||w[38]!==D||w[39]!==b||w[40]!==y?(v=(0,r.jsx)(ev.Button,{onClick:z,text:b,tooltipProps:y,loading:D,tone:"caution"}),w[37]=z,w[38]=D,w[39]=b,w[40]=y,w[41]=v):v=w[41],w[42]!==x||w[43]!==v||w[44]!==u||w[45]!==h?(j=(0,r.jsx)(li,{content:(0,r.jsxs)(ej.Flex,{align:"center",justify:"space-between",gap:2,children:[u,h,x,v]}),"data-testid":"live-edit-type-banner",icon:m.ErrorOutlineIcon}),w[42]=x,w[43]=v,w[44]=u,w[45]=h,w[46]=j):j=w[46],j};function lL(e){let t,n,i=(0,s.c)(4),{documentId:l,isPinnedDraftOrPublished:o}=e;i[0]!==l?(t={documentId:l},i[0]=l,i[1]=t):t=i[1];let a=(0,d.useOnlyHasVersions)(t);return(0,c.isVersionId)(l)&&a&&o?(i[2]!==l?(n=(0,r.jsx)(lz,{documentId:l}),i[2]=l,i[3]=n):n=i[3],n):null}function lz(e){let t,n,i,l,o,a,u,p,m,h=(0,s.c)(35),{documentId:g}=e,{data:f}=(0,d.useActiveReleases)(),x=(0,d.useSetPerspective)();h[0]!==g?(t=(0,c.getVersionFromId)(g)??"",h[0]=g,h[1]=t):t=h[1];let b=t;if(h[2]!==f||h[3]!==b){let e;h[5]!==b?(e=e=>e._id.includes(b),h[5]=b,h[6]=e):e=h[6],n=f.find(e),h[2]=f,h[3]=b,h[4]=n}else n=h[4];let y=n,{t:v}=(0,d.useTranslation)();h[7]!==g?(i={documentId:g},h[7]=g,h[8]=i):i=h[8];let{data:j}=(0,d.useDocumentVersions)(i);if(h[9]!==f||h[10]!==j||h[11]!==v){let e,t;h[13]!==j?(e=e=>j.find(t=>{let n=(0,c.getVersionFromId)(t)??"";return(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===n})&&!(0,d.isCardinalityOneRelease)(e),h[13]=j,h[14]=e):e=h[14],h[15]!==v?(t=e=>e.metadata.title||v("release.placeholder-untitled-release"),h[15]=v,h[16]=t):t=h[16],l=f.filter(e).map(t),h[9]=f,h[10]=j,h[11]=v,h[12]=l}else l=h[12];let w=l;h[17]!==y?(o=y&&(0,d.getReleaseTone)(y),h[17]=y,h[18]=o):o=h[18];let S=o,{t:_}=(0,d.useTranslation)(C);h[19]!==b||h[20]!==x?(a=async()=>{x(b)},h[19]=b,h[20]=x,h[21]=a):a=h[21];let I=a;return 0===w.length?null:(h[22]!==w[0]||h[23]!==w.length||h[24]!==_?(u=(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(ej.Flex,{direction:"row",gap:1,wrap:"wrap",children:w.length>1?(0,r.jsx)(d.Translate,{t:_,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,r.jsxs)(d.VersionInlineBadge,{children:[" ",w[0]]})},values:{count:w.length-1}}):(0,r.jsx)(d.Translate,{t:_,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,r.jsxs)(d.VersionInlineBadge,{children:[" ",w[0]]})}})})}),h[22]=w[0],h[23]=w.length,h[24]=_,h[25]=u):u=h[25],h[26]!==w.length||h[27]!==I||h[28]!==_||h[29]!==S?(p=w.length>0?{text:_("banners.release.action.open-to-edit"),tone:S,onClick:I,mode:"default"}:void 0,h[26]=w.length,h[27]=I,h[28]=_,h[29]=S,h[30]=p):p=h[30],h[31]!==u||h[32]!==p||h[33]!==S?(m=(0,r.jsx)(li,{tone:S,"data-testid":"open-release-to-edit-banner",content:u,action:p}),h[31]=u,h[32]=p,h[33]=S,h[34]=m):m=h[34],m)}function lO(){let e,t,n=(0,s.c)(4),{revisionNotFound:i}=iM(),{t:l}=(0,d.useTranslation)(C);return i?(n[0]!==l?(e=l("banners.revision-not-found.description"),n[0]=l,n[1]=e):e=n[1],n[2]!==e?(t=(0,r.jsx)(li,{tone:"caution","data-test-id":"revision-not-found-banner",icon:m.WarningOutlineIcon,content:(0,r.jsx)(ej.Text,{size:1,children:e})}),n[2]=e,n[3]=t):t=n[3],t):null}function lB(e){let t,n,i,l,o,a=(0,s.c)(12),{currentRelease:c}=e,u=c??d.LATEST;a[0]!==u?(t=(0,d.getReleaseTone)(u),a[0]=u,a[1]=t):t=a[1];let p=t,{t:h}=(0,d.useTranslation)();return a[2]!==c?(n=(0,d.formatRelativeLocalePublishDate)(c),a[2]=c,a[3]=n):n=a[3],a[4]!==n?(i={date:n},a[4]=n,a[5]=i):i=a[5],a[6]!==i||a[7]!==h?(l=(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(d.Translate,{t:h,i18nKey:"release.banner.scheduled-for-publishing-on",values:i})}),a[6]=i,a[7]=h,a[8]=l):l=a[8],a[9]!==l||a[10]!==p?(o=(0,r.jsx)(li,{tone:p,icon:m.LockIcon,content:l}),a[9]=l,a[10]=p,a[11]=o):o=a[11],o}function lH(){let e=(0,s.c)(18),{value:t,editState:n}=iM(),{selectedPerspective:i}=(0,d.usePerspective)(),l=(0,d.isGoingToUnpublish)(t)||n?.version&&(0,d.isGoingToUnpublish)(n?.version),{t:o}=(0,d.useTranslation)(C),{t:a}=(0,d.useTranslation)();if((0,d.isReleaseDocument)(i)&&l){let t,n,l,s,c,u,p;e[0]!==i.metadata?.title||e[1]!==a?(t=i.metadata?.title||a("release.placeholder-untitled-release"),e[0]=i.metadata?.title,e[1]=a,e[2]=t):t=e[2];let h=t;return e[3]!==h?(n={title:h},e[3]=h,e[4]=n):n=e[4],e[5]!==i?(l=(0,d.getVersionInlineBadge)(i),e[5]=i,e[6]=l):l=e[6],e[7]!==l?(s={VersionBadge:l},e[7]=l,e[8]=s):s=e[8],e[9]!==o||e[10]!==n||e[11]!==s?(c=(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(d.Translate,{t:o,i18nKey:"banners.unpublished-release-banner.text",values:n,components:s})}),e[9]=o,e[10]=n,e[11]=s,e[12]=c):c=e[12],e[13]!==o?(u=(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(d.Translate,{t:o,i18nKey:"banners.unpublished-release-banner.text-with-published"})}),e[13]=o,e[14]=u):u=e[14],e[15]!==c||e[16]!==u?(p=(0,r.jsx)(li,{tone:"critical",content:(0,r.jsxs)(ej.Stack,{space:2,children:[c,u]}),icon:m.UnpublishIcon}),e[15]=c,e[16]=u,e[17]=p):p=e[17],p}return null}let l$=(0,e_.styled)(ej.Stack)`
  ${({theme:e})=>e_.css`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${e.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${e.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}
`,lN=e=>{let t,n,i,l,o=(0,s.c)(14),{documentId:a,schemaType:c,title:u}=e,p=a===c.name,h=c.description,{t:g}=(0,d.useTranslation)(C);if(!1===c.__experimental_formPreviewTitle)return null;o[0]!==h||o[1]!==p||o[2]!==c.name||o[3]!==c.title?(t=!p&&(0,r.jsxs)(ej.Inline,{space:1,children:[(0,r.jsx)(ej.Text,{muted:!0,size:1,children:c.title??c.name}),h&&(0,r.jsx)(ev.Tooltip,{content:h,placement:"right",children:(0,r.jsx)(m.InfoOutlineIcon,{"data-testid":"schema-description-icon"})})]}),o[0]=h,o[1]=p,o[2]=c.name,o[3]=c.title,o[4]=t):t=o[4];let f=!u;return o[5]!==g||o[6]!==u?(n=u??g("document-view.form-view.form-title-fallback"),o[5]=g,o[6]=u,o[7]=n):n=o[7],o[8]!==f||o[9]!==n?(i=(0,r.jsx)(ej.Heading,{as:"h2","data-heading":!0,muted:f,"data-testid":"document-panel-document-title",children:n}),o[8]=f,o[9]=n,o[10]=i):i=o[10],o[11]!==t||o[12]!==i?(l=(0,r.jsxs)(l$,{marginBottom:6,space:4,children:[t,i]}),o[11]=t,o[12]=i,o[13]=l):l=o[13],l},lG=e=>e.preventDefault(),lU=(0,a.forwardRef)(function(e,t){let n,i,l,o,c,u,p,m,h,g,f,x,b,y,v,j=(0,s.c)(77),{hidden:w,margins:S}=e,{collapsedFieldSets:_,collapsedPaths:I,displayed:T,editState:R,documentId:P,documentType:E,fieldActions:k,onChange:D,validation:F,ready:A,formState:M,onFocus:V,connectionState:L,onBlur:z,onSetCollapsedPath:O,onPathOpen:B,onSetCollapsedFieldSet:H,onSetActiveFieldGroup:$,openPath:N,compareValue:G,hasUpstreamVersion:U}=iM(),{selectedReleaseId:q,selectedPerspective:W}=(0,d.usePerspective)(),K=(0,d.useDocumentStore)(),Y=(0,d.useDocumentPresence)(P),{title:X}=iY(),[J]=(0,a.useState)(lq),Q=R?.transactionSyncLock?.enabled,{t:Z}=(0,d.useTranslation)(C);j[0]!==Z?(n=Z("document-view.form-view.sync-lock-toast.title"),j[0]=Z,j[1]=n):n=j[1],j[2]!==Z?(i=Z("document-view.form-view.sync-lock-toast.description"),j[2]=Z,j[3]=i):i=j[3],j[4]!==Q||j[5]!==n||j[6]!==i?(l={id:"sync-lock",status:"warning",enabled:Q,title:n,description:i,closable:!0},j[4]=Q,j[5]=n,j[6]=i,j[7]=l):l=j[7],(0,d.useConditionalToast)(l),j[8]!==P||j[9]!==K.pair||j[10]!==E||j[11]!==J||j[12]!==q?(o=()=>{let e=K.pair.documentEvents(P,E,q).pipe((0,eU.tap)(e=>{var t,n;let i,l,o;"mutation"===e.type&&J.publish((i=(t=e).mutations.map(e=>e.patch).filter(Boolean),{type:"mutation",snapshot:t.document,patches:(0,d.fromMutationPatches)(t.origin,i)})),"rebase"===e.type&&J.publish((l=(n=e).remoteMutations.map(e=>e.patch).filter(Boolean),o=n.localMutations.map(e=>e.patch).filter(Boolean),{type:"rebase",snapshot:n.document,patches:(0,d.fromMutationPatches)("remote",l).concat((0,d.fromMutationPatches)("local",o))}))})).subscribe();return()=>{e.unsubscribe()}},j[8]=P,j[9]=K.pair,j[10]=E,j[11]=J,j[12]=q,j[13]=o):o=j[13],j[14]!==P||j[15]!==K||j[16]!==E||j[17]!==J||j[18]!==q?(c=[P,K,E,J,q],j[14]=P,j[15]=K,j[16]=E,j[17]=J,j[18]=q,j[19]=c):c=j[19],(0,a.useEffect)(o,c);let ee=!!T?._rev;j[20]!==J||j[21]!==T?(u=()=>{J.publish({type:"mutation",patches:[],snapshot:T})},j[20]=J,j[21]=T,j[22]=u):u=j[22];let et=(0,a.useEffectEvent)(u);j[23]!==et||j[24]!==ee?(p=()=>{ee&&et()},j[23]=et,j[24]=ee,j[25]=p):p=j[25],j[26]!==ee?(m=[ee],j[26]=ee,j[27]=m):m=j[27],(0,a.useEffect)(p,m);let[en,ei]=(0,a.useState)(null),[el,eo]=(0,a.useState)(!1);j[28]!==el||j[29]!==en||j[30]!==M?.focusPath.length||j[31]!==A?(h=()=>{!el&&A&&!M?.focusPath.length&&en&&(eo(!0),(0,ew.focusFirstDescendant)(en))},j[28]=el,j[29]=en,j[30]=M?.focusPath.length,j[31]=A,j[32]=h):h=j[32];let er=M?.focusPath.length;j[33]!==el||j[34]!==en||j[35]!==A||j[36]!==er?(g=[el,en,er,A],j[33]=el,j[34]=en,j[35]=A,j[36]=er,j[37]=g):g=j[37],(0,a.useEffect)(h,g),j[38]!==t?(f=e=>{ei(e),"function"==typeof t?t(e):t&&(t.current=e)},j[38]=t,j[39]=f):f=j[39];let es=f,ea="reconnecting"===L||M?.readOnly||!R?.ready,ed=ea?"true":void 0;return j[40]!==_||j[41]!==I||j[42]!==G||j[43]!==L||j[44]!==P||j[45]!==R?.draft||j[46]!==R?.published||j[47]!==k||j[48]!==M||j[49]!==U||j[50]!==w||j[51]!==ea||j[52]!==z||j[53]!==D||j[54]!==V||j[55]!==B||j[56]!==$||j[57]!==H||j[58]!==O||j[59]!==N||j[60]!==J||j[61]!==Y||j[62]!==W||j[63]!==Z||j[64]!==X||j[65]!==F?(x="connecting"!==L||R?.draft||R?.published?null===M||w?(0,r.jsx)(ej.Box,{padding:2,children:(0,r.jsx)(ej.Text,{children:Z("document-view.form-view.form-hidden")})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(lN,{documentId:P,schemaType:M.schemaType,title:X}),(0,r.jsx)(d.FormBuilder,{__internal_fieldActions:k,__internal_patchChannel:J,changed:M.changed,collapsedFieldSets:_,collapsedPaths:I,compareValue:G??void 0,focused:M.focused,focusPath:M.focusPath,groups:M.groups,id:"root",members:M.members,onChange:D,onFieldGroupSelect:$,onPathBlur:z,onPathFocus:V,onPathOpen:B,onSetFieldSetCollapsed:H,onSetPathCollapsed:O,openPath:N,perspective:W,hasUpstreamVersion:U,presence:Y,readOnly:ea,schemaType:M.schemaType,validation:F,value:M.value})]}):(0,r.jsx)(ik,{ms:300,children:(0,r.jsxs)(ej.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,r.jsx)(ej.Spinner,{muted:!0}),(0,r.jsx)(ej.Box,{marginTop:3,children:(0,r.jsx)(ej.Text,{align:"center",muted:!0,size:1,children:Z("document-view.form-view.loading")})})]})}),j[40]=_,j[41]=I,j[42]=G,j[43]=L,j[44]=P,j[45]=R?.draft,j[46]=R?.published,j[47]=k,j[48]=M,j[49]=U,j[50]=w,j[51]=ea,j[52]=z,j[53]=D,j[54]=V,j[55]=B,j[56]=$,j[57]=H,j[58]=O,j[59]=N,j[60]=J,j[61]=Y,j[62]=W,j[63]=Z,j[64]=X,j[65]=F,j[66]=x):x=j[66],j[67]!==es||j[68]!==ed||j[69]!==x?(b=(0,r.jsx)(ej.Box,{as:"form",onSubmit:lG,ref:es,"data-testid":"form-view","data-read-only":ed,children:x}),j[67]=es,j[68]=ed,j[69]=x,j[70]=b):b=j[70],j[71]!==S||j[72]!==b?(y=(0,r.jsx)(d.PresenceOverlay,{margins:S,children:b}),j[71]=S,j[72]=b,j[73]=y):y=j[73],j[74]!==w||j[75]!==y?(v=(0,r.jsx)(ej.Container,{hidden:w,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:y}),j[74]=w,j[75]=y,j[76]=v):v=j[76],v});function lq(){return(0,d.createPatchChannel)()}function lW(){let e,t,n=(0,s.c)(11),{activeViewId:i,paneKey:l,views:o}=iM(),a=`${l}tabpanel`;if(n[0]!==i||n[1]!==l||n[2]!==a||n[3]!==o){let t;n[5]!==i||n[6]!==l||n[7]!==a?(t=(e,t)=>(0,r.jsx)(lK,{icon:e.icon,id:`${l}tab-${e.id}`,isActive:i===e.id,label:e.title,tabPanelId:a,viewId:0===t?null:e.id??null},e.id),n[5]=i,n[6]=l,n[7]=a,n[8]=t):t=n[8],e=o.map(t),n[0]=i,n[1]=l,n[2]=a,n[3]=o,n[4]=e}else e=n[4];return n[9]!==e?(t=(0,r.jsx)(ej.TabList,{space:1,children:e}),n[9]=e,n[10]=t):t=n[10],t}function lK(e){let t,n,i,l,o,a,d,c,u,p=(0,s.c)(20);p[0]!==e?({icon:t,id:n,isActive:i,label:l,tabPanelId:a,viewId:d,...o}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=i,p[4]=l,p[5]=o,p[6]=a,p[7]=d):(t=p[1],n=p[2],i=p[3],l=p[4],o=p[5],a=p[6],d=p[7]);let{ready:m,editState:h}=iM(),{setView:g}=l_();p[8]!==g||p[9]!==d?(c=()=>g(d),p[8]=g,p[9]=d,p[10]=c):c=p[10];let f=c,x=!m&&!h?.draft&&!h?.published;return p[11]!==f||p[12]!==t||p[13]!==n||p[14]!==i||p[15]!==l||p[16]!==o||p[17]!==x||p[18]!==a?(u=(0,r.jsx)(ev.Tab,{...o,"aria-controls":a,disabled:x,icon:t,id:n,label:l,onClick:f,selected:i}),p[11]=f,p[12]=t,p[13]=n,p[14]=i,p[15]=l,p[16]=o,p[17]=x,p[18]=a,p[19]=u):u=p[19],u}let lY={paneDataItems:[],routerPanes:[],resolvedPanes:[],maximizedPane:null,setMaximizedPane:()=>{}};function lX(){return(0,a.useContext)(u.ResolvedPanesContext)??lY}let lJ=Object.freeze({}),lQ=Symbol("LOADING_PANE"),lZ="documentPanelPortalElement",l0=(0,tp.defineEvent)({name:"Maximized Document Pane Clicked",version:1,description:"User pressed to maximize a document by click the focus pane button"}),l1=(0,tp.defineEvent)({name:"Maximized Document Pane Collapsed",version:1,description:"User disabled the maximization on a document pane by clicking the focus pane button"}),l2=(0,tp.defineEvent)({name:"Maximized Document Pane Navigated Via Breadcrumbs",version:1,description:"User navigated to a different document pane via the breadcrumbs in the document header"});function l3(e){let t,n,i,l,o,a,c,u,p=(0,s.c)(27),{paneData:m,index:h}=e,{pane:g}=m,f=(0,eE.useRouter)(),{t:x}=(0,d.useTranslation)(C),b=(0,eE.useRouterState)(),y=(0,tu.useTelemetry)();p[0]!==b?.panes?(t=b?.panes||[],p[0]=b?.panes,p[1]=t):t=p[1];let v=t,{perspectiveStack:j}=(0,d.usePerspective)(),w=g!==lQ&&"title"in g?g.title:null,S=g!==lQ&&"document"===g.type?g.options.id:null,_=g!==lQ&&"document"===g.type?g.options.type:null,I=S??"",T=_??"";p[2]!==j||p[3]!==I||p[4]!==T?(n={documentId:I,documentType:T,perspectiveStack:j},p[2]=j,p[3]=I,p[4]=T,p[5]=n):n=p[5];let{value:R,isLoading:P}=(0,d.useDocumentPreviewValues)(n);e:{if(S&&!P){let e;p[6]!==R?.title||p[7]!==x?(e=R?.title||x("panes.document-header-title.untitled.text"),p[6]=R?.title,p[7]=x,p[8]=e):e=p[8],i=e;break e}i=w}let E=i;p[9]!==m.groupIndex||p[10]!==f||p[11]!==v||p[12]!==y?(l=()=>{y.log(l2),f.navigate({panes:v.slice(0,m.groupIndex)})},p[9]=m.groupIndex,p[10]=f,p[11]=v,p[12]=y,p[13]=l):l=p[13];let k=l;if(!E&&!P)return null;p[14]!==E||p[15]!==x?(o=E||x("panes.document-header-title.untitled.text"),p[14]=E,p[15]=x,p[16]=o):o=p[16],p[17]!==E||p[18]!==x?(a=E||x("panes.document-header-title.untitled.text"),p[17]=E,p[18]=x,p[19]=a):a=p[19],p[20]!==a?(c={content:a},p[20]=a,p[21]=c):c=p[21];let D=+(0!==h);return p[22]!==k||p[23]!==D||p[24]!==o||p[25]!==c?(u=(0,r.jsx)(ev.Button,{mode:"bleed",text:o,tooltipProps:c,onClick:k,paddingLeft:D}),p[22]=k,p[23]=D,p[24]=o,p[25]=c,p[26]=u):u=p[26],u}function l4(e){let t,n,i=(0,s.c)(7),{paneDataItems:l,currentPaneIndex:o}=e;if(i[0]!==o||i[1]!==l){let e;i[3]!==o?(e=(e,t)=>{if(t>o)return null;let n=e.pane!==lQ&&"document"===e.pane.type;return(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)(l3,{paneData:e,index:t}),t<o&&(n?(0,r.jsx)(ej.Box,{padding:1,children:(0,r.jsx)(m.ArrowRightIcon,{})}):(0,r.jsx)(ej.Text,{children:"/"}))]},`breadcrumb-item-${e.key}-${t}`)},i[3]=o,i[4]=e):e=i[4],t=l.map(e),i[0]=o,i[1]=l,i[2]=t}else t=i[2];return i[5]!==t?(n=(0,r.jsx)(ej.Flex,{direction:"row",align:"center","data-testid":"document-header-breadcrumb",children:t}),i[5]=t,i[6]=n):n=i[6],n}function l5(){let e,t,n,i=(0,s.c)(23),{connectionState:l,schemaType:o,title:a,value:c,index:u}=iM(),{paneDataItems:p}=lX(),{title:m,error:h}=iY(),{t:g}=(0,d.useTranslation)(C);i[0]!==p?(e=p.some(l6),i[0]=p,i[1]=e):e=i[1];let f=e;if("connecting"===l&&!c){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(r.Fragment,{}),i[2]=e):e=i[2],e}if(a){let e;return i[3]!==a?(e=(0,r.jsx)(r.Fragment,{children:a}),i[3]=a,i[4]=e):e=i[4],e}if(!c){let e,t,n=o?.title||o?.name;return i[5]!==g||i[6]!==n?(e=g("panes.document-header-title.new.text",{schemaType:n}),i[5]=g,i[6]=n,i[7]=e):e=i[7],i[8]!==e?(t=(0,r.jsx)(r.Fragment,{children:e}),i[8]=e,i[9]=t):t=i[9],t}if(h){let e,t;return i[10]!==h||i[11]!==g?(e=g("panes.document-header-title.error.text",{error:h}),i[10]=h,i[11]=g,i[12]=e):e=i[12],i[13]!==e?(t=(0,r.jsx)(r.Fragment,{children:e}),i[13]=e,i[14]=t):t=i[14],t}return i[15]!==m||i[16]!==f||i[17]!==u||i[18]!==p||i[19]!==g?(t=f?(0,r.jsx)(l4,{paneDataItems:p,currentPaneIndex:u}):m||(0,r.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:g("panes.document-header-title.untitled.text")}),i[15]=m,i[16]=f,i[17]=u,i[18]=p,i[19]=g,i[20]=t):t=i[20],i[21]!==t?(n=(0,r.jsx)(r.Fragment,{children:t}),i[21]=t,i[22]=n):n=i[22],n}function l6(e){return e.maximized}let l8=e=>{let t,n,i,l,o,a,c=(0,s.c)(16);c[0]!==e?({documentExists:t,...n}=e,c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]);let{isFavorited:u,isReady:p,favorite:h,unfavorite:g}=(0,d.useManageFavorite)(n),{t:f}=(0,d.useTranslation)(C),x=u?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";c[3]!==f||c[4]!==x?(i=f(x),c[3]=f,c[4]=x,c[5]=i):i=c[5];let b=i,y=u?g:h,v=!p||!t;return c[6]!==b?(l={content:(0,r.jsx)(ej.Text,{size:1,children:b}),placement:"right"},c[6]=b,c[7]=l):l=c[7],c[8]!==u?(o=(0,r.jsx)(ej.Text,{size:1,children:u?(0,r.jsx)(m.StarFilledIcon,{}):(0,r.jsx)(m.StarIcon,{})}),c[8]=u,c[9]=o):o=c[9],c[10]!==b||c[11]!==y||c[12]!==v||c[13]!==l||c[14]!==o?(a=(0,r.jsx)(ev.Button,{mode:"bleed",onClick:y,disabled:v,"aria-label":b,"aria-live":"assertive",tooltipProps:l,children:o}),c[10]=b,c[11]=y,c[12]=v,c[13]=l,c[14]=o,c[15]=a):a=c[15],a},l7=(0,a.memo)(function(){let e,t,n,i,l,o,a=(0,s.c)(24),{editState:c,connectionState:u,views:p,documentId:h,displayed:g}=iM(),{features:f}=iH(),{index:x,BackLink:b}=l_(),{activeWorkspace:y}=(0,d.useActiveWorkspace)(),v=p.length>1,{collapsed:j,isLast:w}=n9(),S=w&&!j?-1:0,_=f.backButton&&x>0,{t:I}=(0,d.useTranslation)(C);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(l5,{}),a[0]=e):e=a[0];let T=e;a[1]!==v?(t=v&&(0,r.jsx)(lW,{}),a[1]=v,a[2]=t):t=a[2];let R=t;a[3]!==b||a[4]!==_||a[5]!==I?(n=_&&(0,r.jsx)(ev.Button,{as:b,"data-as":"a",icon:m.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:I("pane-header.back-button.text")}}),a[3]=b,a[4]=_,a[5]=I,a[6]=n):n=a[6];let P=n,E=g?._id??h,k=g?._type??"";a[7]!==y.dataset||a[8]!==y.projectId?(i=[y.projectId,y.dataset],a[7]=y.dataset,a[8]=y.projectId,a[9]=i):i=a[9];let D=i.join("."),F=(c?.ready&&(c.version??c.draft??c.published)!==null)??!1;a[10]!==y.dataset||a[11]!==y.name||a[12]!==y.projectId||a[13]!==E||a[14]!==k||a[15]!==D||a[16]!==F?(l=(0,r.jsx)(d.CapabilityGate,{capability:"comlink",condition:"available",children:(0,r.jsx)(l8,{resourceType:"studio",documentId:E,documentType:k,resourceId:D,schemaName:y.name,projectId:y.projectId,dataset:y.dataset,documentExists:F})}),a[10]=y.dataset,a[11]=y.name,a[12]=y.projectId,a[13]=E,a[14]=k,a[15]=D,a[16]=F,a[17]=l):l=a[17];let A=l,M="connecting"===u&&!c?.draft&&!c?.published;return a[18]!==P||a[19]!==A||a[20]!==M||a[21]!==S||a[22]!==R?(o=(0,r.jsx)(iv,{loading:M,title:T,tabs:R,tabIndex:S,backButton:P,appendTitle:A}),a[18]=P,a[19]=A,a[20]=M,a[21]=S,a[22]=R,a[23]=o):o=a[23],o}),l9=(0,e_.styled)(ej.Box)({position:"relative"}),oe=(0,e_.styled)(d.ScrollContainer)(({$disabled:e})=>e?{height:"100%"}:e_.css`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),ot=function(e){let t,n,i,l,o,u,p,m,h,g,f,x,b,y,v,j,w=(0,s.c)(109),{footerHeight:S,headerHeight:C,isInspectOpen:_,rootElement:I,setDocumentPanelPortalElement:T,footer:R}=e,{activeViewId:P,displayed:E,documentId:k,editState:D,inspector:F,value:A,views:M,ready:V,schemaType:L,permissions:z,isPermissionsLoading:O}=iM();if(w[0]!==A){let e=(0,d.getSanityCreateLinkMetadata)(A);t=(0,d.isSanityCreateLinked)(e),w[0]=A,w[1]=t}else t=w[1];let B=t,{params:H}=l_(),{collapsed:$}=n3(),{collapsed:N}=n9(),G=(0,ej.usePortal)(),{features:U}=iH(),[q,W]=(0,a.useState)(null),[K,Y]=(0,a.useState)(null),X=(0,a.useRef)(null),J=(0,d.useWorkspace)(),Q=A._createdAt?"update":"create";w[2]!==P||w[3]!==M?(n=M.find(e=>e.id===P)||M[0]||{type:"form"},w[2]=P,w[3]=M,w[4]=n):n=w[4];let Z=n,ee=U.splitPanes&&q||G.element;e:{let e;if($){let e,t=C||0,n=S?S+2:2;w[5]!==t||w[6]!==n?(e=[t,0,n,0],w[5]=t,w[6]=n,w[7]=e):e=w[7],i=e;break e}w[8]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],w[8]=e):e=w[8],i=e}let et=i,en="form"!==Z.type;w[9]!==Z.component||w[10]!==Z.options||w[11]!==Z.type||w[12]!==E||w[13]!==k||w[14]!==D?.draft||w[15]!==D?.published||w[16]!==L||w[17]!==A?(l=()=>{if("component"===Z.type&&Z.component){let e=Z.component;return(0,r.jsx)(e,{document:{draft:D?.draft||null,displayed:E||A,historical:E,published:D?.published||null},documentId:k,options:Z.options,schemaType:L})}return!1},w[9]=Z.component,w[10]=Z.options,w[11]=Z.type,w[12]=E,w[13]=k,w[14]=D?.draft,w[15]=D?.published,w[16]=L,w[17]=A,w[18]=l):l=w[18],w[19]!==l?(o=l(),w[19]=l,w[20]=o):o=w[20];let ei=o;w[21]!==K?(u=()=>{K?.scrollTo&&K.scrollTo(0,0)},w[21]=K,w[22]=u):u=w[22],w[23]!==k||w[24]!==K?(p=[k,K],w[23]=k,w[24]=K,w[25]=p):p=w[25],(0,a.useEffect)(u,p),w[26]!==ee||w[27]!==T?(m=()=>{ee&&T(ee)},h=[ee,T],w[26]=ee,w[27]=T,w[28]=m,w[29]=h):(m=w[28],h=w[29]),(0,a.useEffect)(m,h),w[30]!==E||w[31]!==_||w[32]!==A?(g=_?(0,r.jsx)(ln,{value:E||A}):null,w[30]=E,w[31]=_,w[32]=A,w[33]=g):g=w[33];let el=g,eo=!!(!N&&F),{selectedPerspective:er,selectedReleaseId:es}=(0,d.usePerspective)(),ea=H?.historyVersion;w[34]!==E||w[35]!==k||w[36]!==ea?(f={historyVersion:ea,displayed:E,documentId:k},w[34]=E,w[35]=k,w[36]=ea,w[37]=f):f=w[37];let ed=(0,d.useFilteredReleases)(f);t:{let e,t,n,i,l,o,s,a,u,p,m,h,g,f;if(H?.historyVersion){let e;w[38]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(lI,{}),w[38]=e):e=w[38],x=e;break t}w[39]!==er?(e=(0,d.isReleaseDocument)(er)&&(0,d.isReleaseScheduledOrScheduling)(er),w[39]=er,w[40]=e):e=w[40];let b=e,y=!!(b&&E?._id&&(0,c.getVersionFromId)(E?._id)===es);if(w[41]!==D||w[42]!==L||w[43]!==er||w[44]!==J.document.drafts.enabled?(n=function({isSelectedPerspectiveWriteable:e,editState:t}){return(0,d.isNewDocument)(t)&&!e.result}({isSelectedPerspectiveWriteable:t=(0,d.isPerspectiveWriteable)({selectedPerspective:er,isDraftModelEnabled:J.document.drafts.enabled,schemaType:L}),editState:D}),w[41]=D,w[42]=L,w[43]=er,w[44]=J.document.drafts.enabled,w[45]=t,w[46]=n):(t=w[45],n=w[46]),n){let e;w[47]!==t.reason||w[48]!==t.result||w[49]!==L||w[50]!==er?(e=!t.result&&(0,r.jsx)(lD,{schemaType:L,selectedPerspective:er,reason:t.reason}),w[47]=t.reason,w[48]=t.result,w[49]=L,w[50]=er,w[51]=e):e=w[51],x=e;break t}if(y){let e;w[52]!==er?(e=(0,r.jsx)(lB,{currentRelease:er}),w[52]=er,w[53]=e):e=w[53],x=e;break t}let v=ed.currentReleases.some(d.isCardinalityOneRelease),j=E?._id&&(0,c.isDraftId)(E._id);if("drafts"===er&&v&&j){let e;w[54]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(lC,{}),w[54]=e):e=w[54],x=e;break t}w[55]!==er?(i=(0,d.isSystemBundle)(er),w[55]=er,w[56]=i):i=w[56];let S=i,C=D?.version&&(0,d.isGoingToUnpublish)(D?.version);if(E?._id&&(0,c.getVersionFromId)(E._id)!==es&&V&&!S&&!1===(0,d.isNewDocument)(D)&&!C){let e;w[57]!==b||w[58]!==er||w[59]!==A._id?(e=(0,r.jsx)(lA,{documentId:A._id,currentRelease:er,isScheduledRelease:b}),w[57]=b,w[58]=er,w[59]=A._id,w[60]=e):e=w[60],x=e;break t}let _=function({editState:e,workspace:t,schemaType:n}){if(!e?.ready)return{result:void 0};let i=null!==e.draft,{document:{drafts:{enabled:l}}}=t;return!1===i?{result:!1}:l?!0===n.liveEdit?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}}({editState:D,workspace:J,schemaType:L});if("form"===Z.type&&!es&&_.result){if("DRAFT_MODEL_INACTIVE"===_.reason){let e;w[61]!==E||w[62]!==k||w[63]!==L?(e=(0,r.jsx)(lV,{displayed:E,documentId:k,schemaType:L,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),w[61]=E,w[62]=k,w[63]=L,w[64]=e):e=w[64],x=e;break t}if("LIVE_EDIT_ACTIVE"===_.reason){let e;w[65]!==E||w[66]!==k||w[67]!==L?(e=(0,r.jsx)(lV,{displayed:E,documentId:k,schemaType:L,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),w[65]=E,w[66]=k,w[67]=L,w[68]=e):e=w[68],x=e;break t}}if("form"!==Z.type||O){x=null;break t}w[69]!==B?(l=B&&(0,r.jsx)(lF,{}),w[69]=B,w[70]=l):l=w[70],w[71]!==z?.granted||w[72]!==Q?(o=!z?.granted&&(0,r.jsx)(ly,{requiredPermission:Q}),w[71]=z?.granted,w[72]=Q,w[73]=o):o=w[73],w[74]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)(lO,{}),a=(0,r.jsx)(lw,{}),u=(0,r.jsx)(ls,{}),p=(0,r.jsx)(lE,{}),m=(0,r.jsx)(ll,{}),h=(0,r.jsx)(lH,{}),w[74]=s,w[75]=a,w[76]=u,w[77]=p,w[78]=m,w[79]=h):(s=w[74],a=w[75],u=w[76],p=w[77],m=w[78],h=w[79]);let I=E?._id??k;w[80]!==S||w[81]!==I?(g=(0,r.jsx)(lL,{documentId:I,isPinnedDraftOrPublished:S}),w[80]=S,w[81]=I,w[82]=g):g=w[82],w[83]!==l||w[84]!==o||w[85]!==g?(f=(0,r.jsxs)(r.Fragment,{children:[l,o,s,a,u,p,m,h,g]}),w[83]=l,w[84]=o,w[85]=g,w[86]=f):f=w[86],x=f}let ec=x;w[87]!==K?(b={documentScrollElement:K},w[87]=K,w[88]=b):b=w[88];let eu=b,ep=U.resizablePanes||!eo;return w[89]!==ei||w[90]!==ec||w[91]!==K||w[92]!==R||w[93]!==en||w[94]!==el||w[95]!==$||w[96]!==et||w[97]!==ee||w[98]!==eu||w[99]!==ep?(y=ep&&(0,r.jsxs)(ej.Flex,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,r.jsxs)(d.LegacyLayerProvider,{zOffset:"paneHeader",children:[ec,(0,r.jsx)(l7,{})]}),(0,r.jsx)(l9,{flex:2,children:(0,r.jsx)(ej.PortalProvider,{element:ee,__unstable_elements:eu,children:(0,r.jsx)(ej.BoundaryElementProvider,{element:K,children:(0,r.jsxs)(d.VirtualizerScrollInstanceProvider,{scrollElement:K,containerElement:X,children:[(0,r.jsxs)(oe,{$disabled:$||!1,"data-testid":"document-panel-scroller",ref:Y,children:[(0,r.jsx)(lU,{hidden:en,margins:et,ref:X}),ei]}),el,(0,r.jsx)("div",{"data-testid":"document-panel-portal",ref:W})]})})})}),R]}),w[89]=ei,w[90]=ec,w[91]=K,w[92]=R,w[93]=en,w[94]=el,w[95]=$,w[96]=et,w[97]=ee,w[98]=eu,w[99]=ep,w[100]=y):y=w[100],w[101]!==k||w[102]!==I||w[103]!==L||w[104]!==eo?(v=eo&&(0,r.jsx)(ej.BoundaryElementProvider,{element:I,children:(0,r.jsx)(i0,{documentId:k,documentType:L.name,flex:1})}),w[101]=k,w[102]=I,w[103]=L,w[104]=eo,w[105]=v):v=w[105],w[106]!==y||w[107]!==v?(j=(0,r.jsx)(ie,{children:(0,r.jsxs)(ej.Flex,{height:"fill",children:[y,v]})}),w[106]=y,w[107]=v,w[108]=j):j=w[108],j};ot.displayName="DocumentPanel";let on=e=>{let t,n,i,l,o,r,c,u=(0,s.c)(26),{id:p,type:h,revision:g,release:f}=e,{restore:x}=(0,d.useDocumentOperation)(p,h,f),{revisionNotFound:b}=iM(),y=(0,d.useDocumentOperationEvent)(p,h),{navigateIntent:v}=(0,eE.useRouter)(),j=(0,a.useRef)(y),[w,S]=(0,a.useState)(!1),{t:_}=(0,d.useTranslation)(C);u[0]!==x||u[1]!==g?(t=()=>{x.execute(g),S(!1)},u[0]=x,u[1]=g,u[2]=t):t=u[2];let I=t;u[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{S(!1)},u[3]=n):n=u[3];let T=n;u[4]!==y||u[5]!==p||u[6]!==v||u[7]!==h?(i=()=>{y&&y!==j.current&&("success"===y.type&&"restore"===y.op&&v("edit",{id:p,type:h}),j.current=y)},l=[y,p,v,h],u[4]=y,u[5]=p,u[6]=v,u[7]=h,u[8]=i,u[9]=l):(i=u[8],l=u[9]),(0,a.useEffect)(i,l),u[10]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{S(!0)},u[10]=o):o=u[10];let R=o;e:{if(w){let e,t;u[11]!==_?(e=_("action.restore.confirm.message"),u[11]=_,u[12]=e):e=u[12],u[13]!==I||u[14]!==e?(t={type:"confirm",tone:"critical",onCancel:T,onConfirm:I,message:e},u[13]=I,u[14]=e,u[15]=t):t=u[15],r=t;break e}r=null}let P=r,E="@initial"===g,k=void 0===g;t:{let e,t,n;if(k||b){c=null;break t}u[16]!==_?(e=_("action.restore.label"),u[16]=_,u[17]=e):e=u[17];let i=E?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";u[18]!==_||u[19]!==i?(t=_(i),u[18]=_,u[19]=i,u[20]=t):t=u[20],u[21]!==P||u[22]!==E||u[23]!==t||u[24]!==e?(n={label:e,tone:"caution",onHandle:R,title:t,icon:m.RevertIcon,dialog:P,disabled:E},u[21]=P,u[22]=E,u[23]=t,u[24]=e,u[25]=n):n=u[25],c=n}return c};function oi(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}on.action="restore",on.displayName="HistoryRestoreAction";let ol=(0,eA.default)(oi);function oo(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,l=[],o=0;for(let e=0;e<t.length;e+=1){let n=t[e];l.push(function e(t,n){return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,`${n}-${i}-${t.type}`)),disabled:t.disabled,expanded:t.expanded??!0,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:t.renderAsButton??!1}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:t.renderAsButton??!1,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,`${e}-${n.type}`))}o+=l.length;let r=[];for(let e of i)r.find(t=>t.key===e.id)||r.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let s=[];for(let t=0;t<n.length;t+=1){let i=n[t],l=i.group&&r.find(e=>e.key===i.group),a="string"==typeof i.disabled?{reason:i.disabled}:i.disabled;i.group&&!l&&(l={type:"group",key:i.group,disabled:a,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},r.push(l)),l?l.children.push({type:"item",key:`${o+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):s.push({type:"item",key:`${o+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...s,...r,...l]}let or=["left","bottom"],os={small:0,medium:1,large:2,full:"auto"};function oa(e){let t,n,i,l=(0,s.c)(16),{dialog:o,referenceElement:a}=e,{t:c}=(0,d.useTranslation)(C),{cancelButtonIcon:u,cancelButtonText:p,confirmButtonIcon:m,confirmButtonText:h,message:g,onCancel:f,onConfirm:x,tone:b}=o;return l[0]!==p||l[1]!==c?(t=p||c("confirm-dialog.cancel-button.fallback-text"),l[0]=p,l[1]=c,l[2]=t):t=l[2],l[3]!==h||l[4]!==c?(n=h||c("confirm-dialog.confirm-button.fallback-text"),l[3]=h,l[4]=c,l[5]=n):n=l[5],l[6]!==u||l[7]!==m||l[8]!==g||l[9]!==f||l[10]!==x||l[11]!==a||l[12]!==t||l[13]!==n||l[14]!==b?(i=(0,r.jsx)(tc.ConfirmPopover,{cancelButtonIcon:u,cancelButtonText:t,confirmButtonIcon:m,confirmButtonText:n,message:g,onCancel:f,onConfirm:x,open:!0,referenceElement:a,tone:b,placement:"top",fallbackPlacements:or}),l[6]=u,l[7]=m,l[8]=g,l[9]=f,l[10]=x,l[11]=a,l[12]=t,l[13]=n,l[14]=b,l[15]=i):i=l[15],i}function od(e){let t,n,i,l=(0,s.c)(12),{dialog:o}=e,c=(0,a.useId)();l[0]!==o.footer?(t=o.footer&&(0,r.jsx)(ej.Box,{paddingX:4,paddingY:3,children:o.footer}),l[0]=o.footer,l[1]=t):t=l[1];let u=t,p=!1===o.showCloseButton,m=void 0===o.width?1:os[o.width];return l[2]!==o.content?(n=(0,r.jsx)(ej.Box,{padding:4,children:o.content}),l[2]=o.content,l[3]=n):n=l[3],l[4]!==o.header||l[5]!==o.onClose||l[6]!==c||l[7]!==u||l[8]!==p||l[9]!==m||l[10]!==n?(i=(0,r.jsx)(d.LegacyLayerProvider,{zOffset:"fullscreen",children:(0,r.jsx)(ew.Dialog,{animate:!0,__unstable_hideCloseButton:p,footer:u,header:o.header,id:c,onClose:o.onClose,onClickOutside:o.onClose,width:m,children:n})}),l[4]=o.header,l[5]=o.onClose,l[6]=c,l[7]=u,l[8]=p,l[9]=m,l[10]=n,l[11]=i):i=l[11],i}function oc(e){let t,n,i=(0,s.c)(5),{dialog:l,referenceElement:o}=e;return i[0]!==l?(t=(0,r.jsx)(ou,{dialog:l}),i[0]=l,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,r.jsx)(ej.Popover,{content:t,fallbackPlacements:or,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:o}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n}function ou(e){let t,n,i,l=(0,s.c)(6),{dialog:o}=e,{content:d,onClose:c}=o,{isTopLayer:u}=(0,ej.useLayer)(),p=(0,a.useRef)(null);return l[0]!==u||l[1]!==c?(t=e=>{"Escape"===e.key&&u&&c()},l[0]=u,l[1]=c,l[2]=t):t=l[2],(0,ej.useGlobalKeyDown)(t),l[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[p.current],l[3]=n):n=l[3],(0,ej.useClickOutsideEvent)(u&&c,n),l[4]!==d?(i=(0,r.jsx)("div",{ref:p,children:d}),l[4]=d,l[5]=i):i=l[5],i}function op(e){let t,n=(0,s.c)(3),{children:i}=e,{element:l,elements:o}=(0,ej.usePortal)(),a=o?.[lZ]||l;return n[0]!==i||n[1]!==a?(t=(0,r.jsx)(ej.PortalProvider,{element:a,children:i}),n[0]=i,n[1]=a,n[2]=t):t=n[2],t}function om(e){let t,n,i=(0,s.c)(17),{dialog:l,referenceElement:o}=e,d=void 0===o?null:o,c=(0,a.useId)();if("confirm"===l.type){let e;return i[0]!==l||i[1]!==d?(e=(0,r.jsx)(oa,{dialog:l,referenceElement:d}),i[0]=l,i[1]=d,i[2]=e):e=i[2],e}if("popover"===l.type){let e;return i[3]!==l||i[4]!==d?(e=(0,r.jsx)(oc,{dialog:l,referenceElement:d}),i[3]=l,i[4]=d,i[5]=e):e=i[5],e}if("dialog"===l.type||!l.type){let e;return i[6]!==l?(e=(0,r.jsx)(op,{children:(0,r.jsx)(od,{dialog:l})}),i[6]=l,i[7]=e):e=i[7],e}if("custom"===l.type){let e,t=l?.component;return i[8]!==t?(e=(0,r.jsx)(op,{children:t}),i[8]=t,i[9]=e):e=i[9],e}return console.warn(`Unsupported modal type ${l.type}`),i[10]!==l.content||i[11]!==l.type?(t=l.content||(0,r.jsxs)(ej.Text,{size:1,children:["Unexpected modal type (",(0,r.jsx)("code",{children:l.type}),")"]}),i[10]=l.content,i[11]=l.type,i[12]=t):t=i[12],i[13]!==c||i[14]!==t||i[15]!==l.onClose?(n=(0,r.jsx)(ev.Dialog,{id:c,onClose:l.onClose,onClickOutside:l.onClose,width:1,children:t}),i[13]=c,i[14]=t,i[15]=l.onClose,i[16]=n):n=i[16],n}let oh=(0,a.memo)(function(e){let t,n,i,l,o=(0,s.c)(9),{actionStates:c,children:u,referenceElement:p}=e,[m,h]=(0,a.useState)(-1),g=c[m];o[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{h(e)},o[0]=t):t=o[0];let f=t;o[1]!==u?(n=u({handleAction:f}),o[1]=u,o[2]=n):n=o[2];let x=n;return o[3]!==g||o[4]!==p?(i=g&&g.dialog&&(0,r.jsx)(d.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,r.jsx)(om,{dialog:g.dialog,referenceElement:p})}),o[3]=g,o[4]=p,o[5]=i):i=o[5],o[6]!==x||o[7]!==i?(l=(0,r.jsxs)(r.Fragment,{children:[i,x]}),o[6]=x,o[7]=i,o[8]=l):l=o[8],l});function og(e){let t,n,i,l=(0,s.c)(10),{actionStates:o,disabled:c}=e,u=(0,a.useId)(),[p,m]=(0,a.useState)(null);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={placement:"top-end",portal:!0,preventOverflow:!0},l[0]=t):t=l[0];let h=t,{t:g}=(0,d.useTranslation)(C);l[1]!==o||l[2]!==c||l[3]!==u||l[4]!==g?(n=e=>{let{handleAction:t}=e;return(0,r.jsx)(ev.MenuButton,{id:`${u}-action-menu`,button:(0,r.jsx)(d.ContextMenuButton,{"aria-label":g("buttons.action-menu-button.aria-label"),disabled:c,"data-testid":"action-menu-button",tooltipProps:{content:g("buttons.action-menu-button.tooltip")}}),menu:(0,r.jsx)(ej.Menu,{padding:1,children:o.map((e,n)=>(0,r.jsx)(of,{actionState:e,disabled:c,index:n,onAction:t},n))}),popover:h,ref:m})},l[1]=o,l[2]=c,l[3]=u,l[4]=g,l[5]=n):n=l[5];let f=n;return l[6]!==o||l[7]!==p||l[8]!==f?(i=(0,r.jsx)(oh,{actionStates:o,referenceElement:p,children:f}),l[6]=o,l[7]=p,l[8]=f,l[9]=i):i=l[9],i}function of(e){let t,n,i,l,o,a=(0,s.c)(20),{actionState:d,disabled:c,index:u,onAction:p}=e,{onHandle:m}=d;a[0]!==u||a[1]!==p||a[2]!==m?(t=()=>{p(u),m&&m()},a[0]=u,a[1]=p,a[2]=m,a[3]=t):t=a[3];let h=t;a[4]!==d.shortcut?(n=d.shortcut?String(d.shortcut).split("+").map(ox):void 0,a[4]=d.shortcut,a[5]=n):n=a[5];let g=n;a[6]!==d.label?(i=d.label.replace(" ",""),a[6]=d.label,a[7]=i):i=a[7];let f=`action-${i}`,x=c||!!d.disabled;return a[8]!==d.disabled||a[9]!==d.title?(l=d.disabled&&{tooltipProps:{content:d.title}},a[8]=d.disabled,a[9]=d.title,a[10]=l):l=a[10],a[11]!==d.icon||a[12]!==d.label||a[13]!==d.tone||a[14]!==h||a[15]!==g||a[16]!==f||a[17]!==x||a[18]!==l?(o=(0,r.jsx)(ev.MenuItem,{"data-testid":f,disabled:x,hotkeys:g,icon:d.icon,onClick:h,text:d.label,tone:d.tone,...l}),a[11]=d.icon,a[12]=d.label,a[13]=d.tone,a[14]=h,a[15]=g,a[16]=f,a[17]=x,a[18]=l,a[19]=o):o=a[19],o}function ox(e){return e.slice(0,1).toUpperCase()+e.slice(1)}let ob=e=>{let t=(0,s.c)(16),{release:n}=e,{t:i}=(0,d.useTranslation)();if("archived"===n.state){let e,n;return t[0]!==i?(e=i("release.chip.tooltip.archived"),t[0]=i,t[1]=e):e=t[1],t[2]!==e?(n=(0,r.jsx)(ej.Text,{size:1,children:e}),t[2]=e,t[3]=n):n=t[3],n}if("asap"===n.metadata.releaseType){let e,n;return t[4]!==i?(e=i("release.type.asap"),t[4]=i,t[5]=e):e=t[5],t[6]!==e?(n=(0,r.jsx)(ej.Text,{size:1,children:e}),t[6]=e,t[7]=n):n=t[7],n}if("scheduled"===n.metadata.releaseType){let e,l="active"===n.state;return t[8]!==l||t[9]!==n||t[10]!==i?(e=n.metadata.intendedPublishAt&&(0,r.jsx)(ej.Text,{size:1,children:l?(0,r.jsx)(d.Translate,{t:i,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,d.formatRelativeLocalePublishDate)(n)}}):(0,r.jsx)(d.Translate,{t:i,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,d.formatRelativeLocalePublishDate)(n)}})}),t[8]=l,t[9]=n,t[10]=i,t[11]=e):e=t[11],e}if("undecided"===n.metadata.releaseType){let e,n;return t[12]!==i?(e=i("release.type.undecided"),t[12]=i,t[13]=e):e=t[13],t[14]!==e?(n=(0,r.jsx)(ej.Text,{size:1,children:e}),t[14]=e,t[15]=n):n=t[15],n}return null},oy={dateStyle:"medium",timeStyle:"short"},ov=(0,a.memo)(function(){let e,t,n,i,l,o,a,u,p,m,h,g,f,x,b,y,v,j,w,S=(0,s.c)(97),{selectedReleaseId:C,selectedPerspectiveName:_}=(0,d.usePerspective)(),{t:I}=(0,d.useTranslation)(),T=(0,d.useSetPerspective)(),{params:R,setParams:P}=l_(),E=(0,d.useDateTimeFormat)(oy),{loading:k}=(0,d.useActiveReleases)(),D=(0,d.useSchema)(),{editState:F,displayed:A,documentType:M,documentId:V}=iM(),L=A&&!A._createdAt,z=(0,d.useGetDefaultPerspective)(),O=R?.historyVersion;S[0]!==A||S[1]!==V||S[2]!==O?(e={historyVersion:O,displayed:A,documentId:V},S[0]=A,S[1]=V,S[2]=O,S[3]=e):e=S[3];let B=(0,d.useFilteredReleases)(e);S[4]!==V?(t={documentId:V},S[4]=V,S[5]=t):t=S[5];let H=(0,d.useOnlyHasVersions)(t),$=(0,d.useWorkspace)(),{onSetScheduledDraftPerspective:N}=(0,d.useSingleDocRelease)();S[6]!==N||S[7]!==R?.scheduledDraft||S[8]!==T?(n=()=>{R?.scheduledDraft?N(""):T("drafts")},S[6]=N,S[7]=R?.scheduledDraft,S[8]=T,S[9]=n):n=S[9];let G=n;S[10]!==z||S[11]!==N||S[12]!==R||S[13]!==P||S[14]!==T?(i=e=>()=>{if((0,d.isReleaseDocument)(e)&&(0,d.isCardinalityOneRelease)(e))return void N((0,d.getReleaseIdFromReleaseDocumentId)(e._id));"published"===e&&R?.historyVersion&&P({...R,rev:R?.historyEvent||void 0,since:void 0,historyVersion:void 0});let t=(0,d.isReleaseDocument)(e)?(0,d.getReleaseIdFromReleaseDocumentId)(e._id):e===z?"":e;R?.scheduledDraft?P({...R,scheduledDraft:void 0},{perspective:t}):T(t)},S[10]=z,S[11]=N,S[12]=R,S[13]=P,S[14]=T,S[15]=i):i=S[15];let U=i;if(S[16]!==M||S[17]!==D){let e=D.get(M);l=!!e&&!0===e.liveEdit,S[16]=M,S[17]=D,S[18]=l}else l=S[18];let q=l;e:{if(q&&!C){o=!1;break e}o=!F?.published}let W=o;S[19]!==A?._id||S[20]!==F?.version||S[21]!==R?(a=e=>{if(!R?.historyVersion){let t=F?.version&&(0,d.isGoingToUnpublish)(F?.version)&&(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===(0,c.getVersionFromId)(F?.version?._id);return{selected:!!((0,d.getReleaseIdFromReleaseDocumentId)(e._id)===(0,c.getVersionFromId)(A?._id||"")||t)}}let t=(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===R.historyVersion;return{selected:t,disabled:t}},S[19]=A?._id,S[20]=F?.version,S[21]=R,S[22]=a):a=S[22];let K=a;S[23]!==A?._id||S[24]!==F?.draft?._id||S[25]!==q||S[26]!==_||S[27]!==C?(u=()=>!!(q&&!F?.draft?._id&&!C||(0,c.isPublishedId)(A?._id||"")&&(0,d.isPublishedPerspective)(_||"")),S[23]=A?._id,S[24]=F?.draft?._id,S[25]=q,S[26]=_,S[27]=C,S[28]=u):u=S[28];let Y=u();t:{let e=A?._id||"";if(Y||R?.historyVersion||_||(0,c.isVersionId)(e)){p=!1;break t}if((0,c.isDraftId)(e)){p=!0;break t}if((0,c.isPublishedId)(e)&&F?.published&&(0,d.isPublishedPerspective)(_||"")){p=!1;break t}p=!0}let X=p;S[29]!==F?.draft||S[30]!==L||S[31]!==q||S[32]!==H||S[33]!==C?(m=()=>!!H||!!L&&!!C||(!!F?.draft||!!q)&&!!(L&&C||q),S[29]=F?.draft,S[30]=L,S[31]=q,S[32]=H,S[33]=C,S[34]=m):m=S[34];let J=m(),Q=$.document.drafts?.enabled;S[35]!==E||S[36]!==F?.published||S[37]!==I?(h=(0,r.jsx)(ej.Text,{size:1,children:F?.published&&F?.published?._updatedAt?(0,r.jsx)(d.Translate,{t:I,i18nKey:"release.chip.tooltip.published-date",values:{date:E.format(new Date(F?.published._updatedAt))}}):(0,r.jsx)(r.Fragment,{children:I("release.chip.tooltip.not-published")})}),S[35]=E,S[36]=F?.published,S[37]=I,S[38]=h):h=S[38],S[39]!==U?(g=U("published"),S[39]=U,S[40]=g):g=S[40],S[41]!==I?(f=I("release.chip.published"),S[41]=I,S[42]=f):f=S[42];let Z=F?.published?._id||F?.id||"",ee=F?.published?._id||F?.id||"",et=!F?.published;return S[43]!==M||S[44]!==B.notCurrentReleases||S[45]!==k||S[46]!==Z||S[47]!==ee||S[48]!==et?(x={documentId:Z,menuReleaseId:ee,releases:B.notCurrentReleases,releasesLoading:k,documentType:M,fromRelease:"published",isVersion:!1,disabled:et},S[43]=M,S[44]=B.notCurrentReleases,S[45]=k,S[46]=Z,S[47]=ee,S[48]=et,S[49]=x):x=S[49],S[50]!==G||S[51]!==Y||S[52]!==W||S[53]!==h||S[54]!==g||S[55]!==f||S[56]!==x?(b=(0,r.jsx)(d.VersionChip,{tooltipContent:h,disabled:W,onClick:g,selected:Y,text:f,tone:"positive",onCopyToDraftsNavigate:G,contextValues:x}),S[50]=G,S[51]=Y,S[52]=W,S[53]=h,S[54]=g,S[55]=f,S[56]=x,S[57]=b):b=S[57],S[58]!==E||S[59]!==M||S[60]!==F?.draft||S[61]!==F?.id||S[62]!==F?.published?._id||S[63]!==B.notCurrentReleases||S[64]!==G||S[65]!==U||S[66]!==J||S[67]!==Q||S[68]!==X||S[69]!==q||S[70]!==k||S[71]!==I?(y=Q&&(0,r.jsx)(d.VersionChip,{tooltipContent:(0,r.jsx)(ej.Text,{size:1,children:F?.draft?(0,r.jsx)(r.Fragment,{children:F?.draft._updatedAt?(0,r.jsx)(d.Translate,{t:I,i18nKey:"release.chip.tooltip.edited-date",values:{date:E.format(new Date(F?.draft._updatedAt))}}):(0,r.jsx)(d.Translate,{t:I,i18nKey:"release.chip.tooltip.created-date",values:{date:E.format(new Date(F?.draft._createdAt))}})}):(0,r.jsx)(r.Fragment,{children:I(q?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:X,disabled:J,text:I("release.chip.draft"),tone:F?.draft?"caution":"neutral",onClick:U("drafts"),onCopyToDraftsNavigate:G,contextValues:{documentId:F?.draft?._id||F?.published?._id||F?.id||"",menuReleaseId:F?.draft?._id||F?.published?._id||F?.id||"",releases:B.notCurrentReleases,releasesLoading:k,documentType:M,fromRelease:"draft",isVersion:!1}}),S[58]=E,S[59]=M,S[60]=F?.draft,S[61]=F?.id,S[62]=F?.published?._id,S[63]=B.notCurrentReleases,S[64]=G,S[65]=U,S[66]=J,S[67]=Q,S[68]=X,S[69]=q,S[70]=k,S[71]=I,S[72]=y):y=S[72],S[73]!==A?._id||S[74]!==M||S[75]!==B.inCreation||S[76]!==B.notCurrentReleases||S[77]!==G||S[78]!==k||S[79]!==I?(v=B.inCreation&&(0,r.jsx)(d.VersionChip,{tooltipContent:(0,r.jsx)(ob,{release:B.inCreation}),selected:!0,onClick:oj,locked:!1,tone:(0,d.getReleaseTone)(B.inCreation),text:B.inCreation.metadata.title||I("release.placeholder-untitled-release"),onCopyToDraftsNavigate:G,contextValues:{disabled:!0,documentId:A?._id||"",menuReleaseId:B.inCreation._id,releases:B.notCurrentReleases,releasesLoading:k,documentType:M,fromRelease:(0,d.getReleaseIdFromReleaseDocumentId)(B.inCreation._id),releaseState:B.inCreation.state,isVersion:!0,release:B.inCreation}}),S[73]=A?._id,S[74]=M,S[75]=B.inCreation,S[76]=B.notCurrentReleases,S[77]=G,S[78]=k,S[79]=I,S[80]=v):v=S[80],S[81]!==A||S[82]!==M||S[83]!==F?.version||S[84]!==B.currentReleases||S[85]!==B.notCurrentReleases||S[86]!==K||S[87]!==G||S[88]!==U||S[89]!==k||S[90]!==I?(j=A&&B.currentReleases?.map(e=>(0,r.jsx)(d.VersionChip,{tooltipContent:(0,r.jsx)(ob,{release:e}),...K(e),onClick:U(e),text:e.metadata.title||I("release.placeholder-untitled-release"),tone:(0,d.getReleaseTone)(e),locked:(0,d.isReleaseScheduledOrScheduling)(e),onCopyToDraftsNavigate:G,contextValues:{documentId:A?._id||"",menuReleaseId:e._id,releases:B.notCurrentReleases,releasesLoading:k,documentType:M,fromRelease:(0,d.getReleaseIdFromReleaseDocumentId)(e._id),releaseState:e.state,isVersion:!0,isGoingToUnpublish:!!F?.version&&(0,d.isGoingToUnpublish)(F?.version),release:e}},e._id)),S[81]=A,S[82]=M,S[83]=F?.version,S[84]=B.currentReleases,S[85]=B.notCurrentReleases,S[86]=K,S[87]=G,S[88]=U,S[89]=k,S[90]=I,S[91]=j):j=S[91],S[92]!==b||S[93]!==y||S[94]!==v||S[95]!==j?(w=(0,r.jsxs)(r.Fragment,{children:[b,y,v,j]}),S[92]=b,S[93]=y,S[94]=v,S[95]=j,S[96]=w):w=S[96],w});function oj(){}let ow=(0,e_.styled)(ej.Card)(e=>{let t=(0,tU.getTheme_v2)(e.theme);return e_.css`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    ${e.$showGradient&&e_.css`
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 150px;
        background: linear-gradient(to right, ${(0,tU.rgba)(t.color.bg,0)}, var(--card-bg-color));
        transition: 'opacity 300ms ease-out';
        pointer-events: none;
      }
    `}
  `}),oS=(0,a.memo)((0,a.forwardRef)(function(e,t){let n,i,l,o,c,u,p,h=(0,s.c)(41),{menuItems:g}=e,{editState:f,onMenuAction:x,onPaneClose:b,onPaneSplit:y,onSetMaximizedPane:v,menuItemGroups:j,schemaType:w,connectionState:S,views:_,unstable_languageFilter:I,documentId:T}=iM(),{features:R}=iH(),{index:P,BackLink:E,hasGroupSiblings:k}=l_(),{maximizedPane:D}=lX(),{actions:F}=(0,d.useFieldActions)(),[A,M]=(0,a.useState)(null),V=(0,a.useRef)(null),L=function(e){let t,n,i=(0,s.c)(3),[l,o]=(0,a.useState)(!1);return i[0]!==e?(t=()=>{let t=()=>{let t=e.current;if(!t)return;let{scrollWidth:n,clientWidth:i}=t;if(!(n>i))return void o(!1);let{scrollLeft:l}=t;o(!(l+i>=n))},{intersectionObserver:n,mutationObserver:i}=function(){t();let n=e.current;if(!n)return{intersectionObserver:null,mutationObserver:null};let i=new IntersectionObserver(e=>{let t=e[0];t&&o(!t.isIntersecting)}),l=()=>{i.disconnect();let e=n.children[n.children.length-1];i.observe(e)};l();let r=new MutationObserver(()=>{l(),t()});return r.observe(n,{childList:!0,subtree:!1}),{intersectionObserver:i,mutationObserver:r}}();return()=>{n?.disconnect(),i?.disconnect()}},n=[e],i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,a.useEffect)(t,n),l}(V),z=(0,tu.useTelemetry)();h[0]!==F||h[1]!==j||h[2]!==g||h[3]!==x?(n=oo({actionHandler:x,fieldActions:F,menuItems:g,menuItemGroups:j}),h[0]=F,h[1]=j,h[2]=g,h[3]=x,h[4]=n):n=h[4];let O=n;h[5]!==O?(i=O.filter(oi),h[5]=O,h[6]=i):i=h[6];let B=i;h[7]!==O?(l=O.filter(ol),h[7]=O,h[8]=l):l=h[8];let H=l,{collapsed:$,isLast:N}=n9(),G=N&&!$?-1:0,U=R.splitViews&&y&&_.length>1,q=U&&k,W=R.backButton&&P>0,K=!q&&!W&&!!E,{t:Y}=(0,d.useTranslation)(C),X=D?.pane&&"object"==typeof D.pane&&"document"===D.pane.type&&D.pane.options.id===T;h[9]!==X||h[10]!==v||h[11]!==z?(o=()=>{v?.(),X?z.log(l1):z.log(l0)},h[9]=X,h[10]=v,h[11]=z,h[12]=o):o=h[12];let J=o;h[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(l5,{}),h[13]=c):c=h[13];let Q=c;h[14]!==E||h[15]!==W||h[16]!==Y?(u=W&&(0,r.jsx)(ev.Button,{as:E,"data-as":"a",icon:m.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:Y("pane-header.back-button.text")}}),h[14]=E,h[15]=W,h[16]=Y,h[17]=u):u=h[17];let Z=u;return h[18]!==E||h[19]!==Z||h[20]!==$||h[21]!==S||h[22]!==H||h[23]!==f||h[24]!==J||h[25]!==X||h[26]!==B||h[27]!==b||h[28]!==y||h[29]!==v||h[30]!==t||h[31]!==A||h[32]!==w||h[33]!==L||h[34]!==K||h[35]!==U||h[36]!==q||h[37]!==Y||h[38]!==G||h[39]!==I?(p=(0,r.jsx)(ev.TooltipDelayGroupProvider,{children:$?(0,r.jsx)(iv,{border:!0,ref:t,loading:"connecting"===S&&!f?.draft&&!f?.published,title:Q,tabIndex:G,backButton:Z}):(0,r.jsx)(ej.Card,{hidden:$,style:{lineHeight:0},borderBottom:!0,children:(0,r.jsxs)(ej.Flex,{gap:3,paddingY:3,children:[(0,r.jsx)(ow,{$showGradient:L,children:(0,r.jsx)(ej.Flex,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:V,children:(0,r.jsx)(ov,{})})}),(0,r.jsx)(ej.Box,{flex:"none",paddingRight:3,children:(0,r.jsxs)(ej.Flex,{align:"center",gap:1,children:[I.length>0&&(0,r.jsx)(r.Fragment,{children:I.map((e,t)=>(0,r.jsx)(e,{schemaType:w},`language-filter-${t}`))}),B.map(oI),f&&(0,r.jsx)(ag,{group:"paneActions",children:e=>{let{states:t}=e;return(0,r.jsx)(oC,{contextMenuNodes:H,setReferenceElement:M,referenceElement:A,states:t})}}),U&&(0,r.jsx)(ev.Button,{"aria-label":Y("buttons.split-pane-button.aria-label"),icon:m.SplitVerticalIcon,mode:"bleed",onClick:y,tooltipProps:{content:Y("buttons.split-pane-button.tooltip")}},"split-pane-button"),q&&(0,r.jsx)(ev.Button,{icon:m.CloseIcon,mode:"bleed",onClick:b,tooltipProps:{content:Y("buttons.split-pane-close-button.title")}},"close-view-button"),v&&(0,r.jsx)(ev.Button,{"aria-label":Y(X?"buttons.focus-pane-button.aria-label.collapse":"buttons.focus-pane-button.aria-label.focus"),icon:X?m.CollapseIcon:m.ExpandIcon,mode:"bleed",onClick:J,tooltipProps:{content:Y(X?"buttons.focus-pane-button.tooltip.collapse":"buttons.focus-pane-button.tooltip.focus")},"data-testid":X?"focus-pane-button-collapse":"focus-pane-button-focus"},"focus-pane-button"),K&&(0,r.jsx)(ev.Button,{icon:m.CloseIcon,mode:"bleed",tooltipProps:{content:Y("buttons.split-pane-close-group-button.title")},as:E},"close-view-button")]})})]})})}),h[18]=E,h[19]=Z,h[20]=$,h[21]=S,h[22]=H,h[23]=f,h[24]=J,h[25]=X,h[26]=B,h[27]=b,h[28]=y,h[29]=v,h[30]=t,h[31]=A,h[32]=w,h[33]=L,h[34]=K,h[35]=U,h[36]=q,h[37]=Y,h[38]=G,h[39]=I,h[40]=p):p=h[40],p})),oC=(0,a.memo)(function(e){let t,n,i=(0,s.c)(7),{setReferenceElement:l,referenceElement:o,contextMenuNodes:d}=e,c=(0,a.useDeferredValue)(e.states);return i[0]!==c?(t=c.filter(oT),i[0]=c,i[1]=t):t=i[1],i[2]!==d||i[3]!==o||i[4]!==l||i[5]!==t?(n=(0,r.jsx)(o_,{setReferenceElement:l,referenceElement:o,contextMenuNodes:d,states:t}),i[2]=d,i[3]=o,i[4]=l,i[5]=t,i[6]=n):n=i[6],n}),o_=(0,a.memo)(function(e){let t,n,i=(0,s.c)(8),{states:l,setReferenceElement:o,contextMenuNodes:a,referenceElement:d}=e;i[0]!==a||i[1]!==o||i[2]!==l?(t=e=>{let{handleAction:t}=e;return(0,r.jsx)("div",{ref:o,children:(0,r.jsx)(ic,{nodes:a,actionsNodes:l.length>0?l.map((e,n)=>(0,r.jsx)(of,{actionState:e,disabled:!!e.disabled,index:n,onAction:t},e.label)):void 0},"context-menu")})},i[0]=a,i[1]=o,i[2]=l,i[3]=t):t=i[3];let c=t;return i[4]!==d||i[5]!==c||i[6]!==l?(n=(0,r.jsx)(oh,{actionStates:l,referenceElement:d,children:c}),i[4]=d,i[5]=c,i[6]=l,i[7]=n):n=i[7],n});function oI(e){return(0,r.jsx)(iw,{node:e},e.key)}function oT(e){return!e.action||e.action!==on.action}function oR(e){let t,n,i=(0,s.c)(3),{size:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},i[0]=t):t=i[0],i[1]!==l?(n=(0,r.jsx)(ev.Button,{"aria-hidden":!0,disabled:!0,size:l,style:t,text:"-"}),i[1]=l,i[2]=n):n=i[2],n}let oP={primary:"primary",success:"positive",warning:"caution",danger:"critical"},oE=(0,a.memo)(function(e){let t,n,i=(0,s.c)(4),{states:l}=e;return 0===l.length?null:(i[0]!==l?(t=l.map(oA),i[0]=l,i[1]=t):t=i[1],i[2]!==t?(n=(0,r.jsx)(ej.Inline,{space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n)}),ok=(0,a.memo)(function(e){let t,n=(0,s.c)(2),i=(0,a.useDeferredValue)(e.states);return n[0]!==i?(t=(0,r.jsx)(oE,{states:i}),n[0]=i,n[1]=t):t=n[1],t});function oD(){let e,t=(0,s.c)(3),{badges:n,editState:i}=iM();return i&&n?(t[0]!==n||t[1]!==i?(e=(0,r.jsx)(af,{badges:n,badgeProps:i,children:oF}),t[0]=n,t[1]=i,t[2]=e):e=t[2],e):null}function oF(e){let{states:t}=e;return(0,r.jsx)(ok,{states:t})}function oA(e,t){return(0,r.jsx)(ev.Tooltip,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,r.jsx)(ej.Badge,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?oP[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},`${e.label}-${t}`)}let oM={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},oV=e=>{let t,n,i,l,o,c=(0,s.c)(32),{id:u,type:p,draft:h,release:g}=e,{delete:f}=(0,d.useDocumentOperation)(u,p,g),[x,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),{t:j}=(0,d.useTranslation)(C);c[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{v(!1)},c[0]=t):t=c[0];let w=t;c[1]!==f?(n=e=>{v(!1),b(!0),f.execute(e),b(!1)},c[1]=f,c[2]=n):n=c[2];let S=n;c[3]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{v(!0)},c[3]=i):i=c[3];let _=i;c[4]!==u||c[5]!==g||c[6]!==p?(l={id:u,type:p,version:g,permission:"delete"},c[4]=u,c[5]=g,c[6]=p,c[7]=l):l=c[7];let[I,T]=(0,d.useDocumentPairPermissions)(l),R=(0,d.useCurrentUser)();e:{let e,t,n,i;if(!T&&!I?.granted){let e,t,n;c[8]!==j?(e=j("action.delete.label"),c[8]=j,c[9]=e):e=c[9],c[10]!==R?(t=(0,r.jsx)(d.InsufficientPermissionsMessage,{context:"delete-document",currentUser:R}),c[10]=R,c[11]=t):t=c[11],c[12]!==e||c[13]!==t?(n={tone:"critical",icon:m.TrashIcon,disabled:!0,label:e,title:t},c[12]=e,c[13]=t,c[14]=n):n=c[14],o=n;break e}let l=x||!!f.disabled||T;c[15]!==f.disabled||c[16]!==j?(e=f.disabled&&j(oM[f.disabled])||"",c[15]=f.disabled,c[16]=j,c[17]=e):e=c[17],c[18]!==x||c[19]!==j?(t=j(x?"action.delete.running.label":"action.delete.label"),c[18]=x,c[19]=j,c[20]=t):t=c[20],c[21]!==h?._id||c[22]!==S||c[23]!==u||c[24]!==y||c[25]!==p?(n=y&&{type:"custom",component:(0,r.jsx)(s6,{action:"delete",id:h?._id||u,type:p,onCancel:w,onConfirm:S})},c[21]=h?._id,c[22]=S,c[23]=u,c[24]=y,c[25]=p,c[26]=n):n=c[26],c[27]!==l||c[28]!==e||c[29]!==t||c[30]!==n?(i={tone:"critical",icon:m.TrashIcon,disabled:l,title:e,label:t,shortcut:"Ctrl+Alt+D",onHandle:_,dialog:n},c[27]=l,c[28]=e,c[29]=t,c[30]=n,c[31]=i):i=c[31],o=i}return o};function oL(e){let t,n,i,l,o,c,u=(0,s.c)(18),{publishedExists:p,onCancel:m,onConfirm:h}=e,{t:g}=(0,d.useTranslation)(C),f=`deletion-confirmation-${(0,a.useId)()}`;return u[0]!==g?(t=g("action.discard-changes.confirm-dialog.header.text"),u[0]=g,u[1]=t):t=u[1],u[2]!==g?(n=g("action.discard-changes.label"),u[2]=g,u[3]=n):n=u[3],u[4]!==h||u[5]!==n?(i={confirmButton:{text:n,onClick:h}},u[4]=h,u[5]=n,u[6]=i):i=u[6],u[7]!==p||u[8]!==g?(l=g(p?"action.discard-changes.confirm-dialog.confirm-discard-changes":"action.discard-changes.confirm-dialog.confirm-discard-changes-draft"),u[7]=p,u[8]=g,u[9]=l):l=u[9],u[10]!==l?(o=(0,r.jsx)(ej.Text,{size:1,children:l}),u[10]=l,u[11]=o):o=u[11],u[12]!==f||u[13]!==m||u[14]!==t||u[15]!==i||u[16]!==o?(c=(0,r.jsx)(ev.Dialog,{width:1,id:f,header:t,footer:i,onClose:m,onClickOutside:m,children:o}),u[12]=f,u[13]=m,u[14]=t,u[15]=i,u[16]=o,u[17]=c):c=u[17],c}oV.action="delete",oV.displayName="DeleteAction";let oz={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},oO=e=>{let t,n,i,l,o,u=(0,s.c)(29),{id:p,type:h,published:g,liveEdit:f,release:x}=e,{discardChanges:b}=(0,d.useDocumentOperation)(p,h,x),[y,v]=(0,a.useState)(!1);u[0]!==p||u[1]!==x||u[2]!==h?(t={id:p,type:h,version:x,permission:"discardDraft"},u[0]=p,u[1]=x,u[2]=h,u[3]=t):t=u[3];let[j,w]=(0,d.useDocumentPairPermissions)(t),S=(0,d.useCurrentUser)(),{displayed:_}=iM(),{t:I}=(0,d.useTranslation)(C),T=_?._id&&(0,c.isPublishedId)(_?._id);u[4]!==b?(n=()=>{b.execute(),v(!1)},u[4]=b,u[5]=n):n=u[5];let R=n;u[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{v(!1)},u[6]=i):i=u[6];let P=i;u[7]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{v(!0)},u[7]=l):l=u[7];let E=l;e:{let e,t,n,i;if(f||T){o=null;break e}if(!w&&!j?.granted){let e,t,n;u[8]!==I?(e=I("action.discard-changes.label"),u[8]=I,u[9]=e):e=u[9],u[10]!==S?(t=(0,r.jsx)(d.InsufficientPermissionsMessage,{context:"discard-changes",currentUser:S}),u[10]=S,u[11]=t):t=u[11],u[12]!==e||u[13]!==t?(n={tone:"critical",icon:m.ResetIcon,disabled:!0,label:e,title:t},u[12]=e,u[13]=t,u[14]=n):n=u[14],o=n;break e}let l=!!b.disabled||w,s=b.disabled&&oz[b.disabled]||"";u[15]!==I||u[16]!==s?(e=I(s),u[15]=I,u[16]=s,u[17]=e):e=u[17],u[18]!==I?(t=I("action.discard-changes.label"),u[18]=I,u[19]=t):t=u[19],u[20]!==R||u[21]!==y||u[22]!==g?(n=y&&{type:"custom",component:(0,r.jsx)(oL,{onCancel:P,onConfirm:R,publishedExists:!!g})},u[20]=R,u[21]=y,u[22]=g,u[23]=n):n=u[23],u[24]!==n||u[25]!==l||u[26]!==e||u[27]!==t?(i={tone:"critical",icon:m.ResetIcon,disabled:l,title:e,label:t,onHandle:E,dialog:n},u[24]=n,u[25]=l,u[26]=e,u[27]=t,u[28]=i):i=u[28],o=i}return o};oO.action="discardChanges",oO.displayName="DiscardChangesAction";let oB={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},oH=e=>{let t,n,i,l=(0,s.c)(29),{id:o,type:c,release:u,mapDocument:p}=e,h=(0,d.useDocumentStore)(),{duplicate:g}=(0,d.useDocumentOperation)(o,c,u),{navigateIntent:f}=(0,eE.useRouter)(),[x,b]=(0,a.useState)(!1);l[0]!==o||l[1]!==u||l[2]!==c?(t={id:o,type:c,version:u,permission:"duplicate"},l[0]=o,l[1]=u,l[2]=c,l[3]=t):t=l[3];let[y,v]=(0,d.useDocumentPairPermissions)(t),{t:j}=(0,d.useTranslation)(C),w=(0,d.useCurrentUser)();l[4]!==h.pair||l[5]!==g||l[6]!==o||l[7]!==p||l[8]!==f||l[9]!==c?(n=async()=>{let e=(0,eC.uuid)();b(!0);let t=(0,e6.firstValueFrom)(h.pair.operationEvents(o,c).pipe((0,eJ.filter)(o$)));g.execute(e,{mapDocument:p}),await t,f("edit",{id:e,type:c}),b(!1)},l[4]=h.pair,l[5]=g,l[6]=o,l[7]=p,l[8]=f,l[9]=c,l[10]=n):n=l[10];let S=n;e:{let e,t,n;if(!v&&!y?.granted){let e,t,n;l[11]!==j?(e=j("action.duplicate.label"),l[11]=j,l[12]=e):e=l[12],l[13]!==w?(t=(0,r.jsx)(d.InsufficientPermissionsMessage,{context:"duplicate-document",currentUser:w}),l[13]=w,l[14]=t):t=l[14],l[15]!==e||l[16]!==t?(n={icon:m.CopyIcon,disabled:!0,label:e,title:t},l[15]=e,l[16]=t,l[17]=n):n=l[17],i=n;break e}let o=x||!!g.disabled||v;l[18]!==x||l[19]!==j?(e=j(x?"action.duplicate.running.label":"action.duplicate.label"),l[18]=x,l[19]=j,l[20]=e):e=l[20],l[21]!==g.disabled||l[22]!==j?(t=g.disabled?j(oB[g.disabled]):"",l[21]=g.disabled,l[22]=j,l[23]=t):t=l[23],l[24]!==S||l[25]!==o||l[26]!==e||l[27]!==t?(n={icon:m.CopyIcon,disabled:o,label:e,title:t,onHandle:S},l[24]=S,l[25]=o,l[26]=e,l[27]=t,l[28]=n):n=l[28],i=n}return i};function o$(e){return"duplicate"===e.op&&"success"===e.type}oH.action="duplicate",oH.displayName="DuplicateAction";let oN=(0,tp.defineEvent)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),oG={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"},oU={status:"published"};function oq(e,t,n){return"ALREADY_PUBLISHED"===e&&t?(0,r.jsx)(oW,{publishedAt:t}):n(oG[e])}function oW(e){let t,n,i,l=(0,s.c)(6),{publishedAt:o}=e,{t:a}=(0,d.useTranslation)(C);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},l[0]=t):t=l[0];let c=(0,d.useRelativeTime)(o,t);return l[1]!==a||l[2]!==c?(n=a("action.publish.already-published.tooltip",{timeSincePublished:c}),l[1]=a,l[2]=c,l[3]=n):n=l[3],l[4]!==n?(i=(0,r.jsx)("span",{children:n}),l[4]=n,l[5]=i):i=l[5],i}let oK=e=>{let t,n,i,l,o,u,p,h,g,f,x,b=(0,s.c)(79),{id:y,type:v,liveEdit:j,draft:w,published:S,release:_}=e,[I,T]=(0,a.useState)(null),{publish:R}=(0,d.useDocumentOperation)(y,v),{changesOpen:P,documentId:E,documentType:k,value:D}=iM(),F=(0,d.useValidationStatus)(D._id,v),A=(0,d.useSyncState)(y,v),M=(0,d.useEditState)(E,k),{t:V}=(0,d.useTranslation)(C);b[0]!==M?.draft||b[1]!==M?.published?(t=M?.draft||M?.published||{},b[0]=M?.draft,b[1]=M?.published,b[2]=t):t=b[2];let L=t._rev;b[3]!==F.validation?(n=F.validation.some(eS.isValidationErrorMarker),b[3]=F.validation,b[4]=n):n=b[4];let z=n,[O,B]=(0,a.useState)(!1),H=A.isSyncing,$=F.isValidating;b[5]!==y||b[6]!==v?(i={id:y,type:v,permission:"publish"},b[5]=y,b[6]=v,b[7]=i):i=b[7];let[N,G]=(0,d.useDocumentPairPermissions)(i),U=(0,d.useCurrentUser)();b[8]!==z||b[9]!==R.disabled||b[10]!==S||b[11]!==V?(l=R.disabled?oq(R.disabled,(S||{})._updatedAt,V)||"":z?V("action.publish.validation-issues.tooltip"):"",b[8]=z,b[9]=R.disabled,b[10]=S,b[11]=V,b[12]=l):l=b[12];let q=l,W=S?._rev;b[13]!==W||b[14]!==R?(o=()=>{R.execute(),T({status:"publishing",publishRevision:W})},b[13]=W,b[14]=R,b[15]=o):o=b[15];let K=o;b[16]!==K||b[17]!==z||b[18]!==H||b[19]!==O||b[20]!==L||b[21]!==F.isValidating||b[22]!==F.revision?(u=()=>{let e=!1===F.isValidating&&F.revision!==L;O&&!H&&e&&(z||K(),B(!1))},b[16]=K,b[17]=z,b[18]=H,b[19]=O,b[20]=L,b[21]=F.isValidating,b[22]=F.revision,b[23]=u):u=b[23],b[24]!==K||b[25]!==z||b[26]!==H||b[27]!==$||b[28]!==O||b[29]!==L||b[30]!==F.isValidating||b[31]!==F.revision?(p=[H,K,z,O,F.revision,L,$,F.isValidating],b[24]=K,b[25]=z,b[26]=H,b[27]=$,b[28]=O,b[29]=L,b[30]=F.isValidating,b[31]=F.revision,b[32]=p):p=b[32],(0,a.useEffect)(u,p),b[33]!==W||b[34]!==I?(h=()=>{let e=I?.status==="publishing"&&W!==I.publishRevision,t=e?oU:null,n=setTimeout(()=>{T(t)},e?200:4e3);return()=>clearTimeout(n)},b[33]=W,b[34]=I,b[35]=h):h=b[35],b[36]!==P||b[37]!==W||b[38]!==I?(g=[P,I,W],b[36]=P,b[37]=W,b[38]=I,b[39]=g):g=b[39],(0,a.useEffect)(h,g);let Y=(0,tu.useTelemetry)();b[40]!==K||b[41]!==w?._createdAt||b[42]!==S||b[43]!==L||b[44]!==A.isSyncing||b[45]!==Y||b[46]!==F.isValidating||b[47]!==F.revision?(f=()=>{Y.log(oN,{publishedImmediately:!w?._createdAt,previouslyPublished:!!S}),A.isSyncing||F.isValidating||F.revision!==L?B(!0):K()},b[40]=K,b[41]=w?._createdAt,b[42]=S,b[43]=L,b[44]=A.isSyncing,b[45]=Y,b[46]=F.isValidating,b[47]=F.revision,b[48]=f):f=b[48];let X=f;e:{let e,t,n;if(_||j){x=null;break e}if((0,c.isPublishedId)(D._id)&&null!==w){let e,t,n;b[49]!==V?(e=V("action.publish.label"),b[49]=V,b[50]=e):e=b[50];let i=S?._updatedAt;b[51]!==V||b[52]!==i?(t=oq("ALREADY_PUBLISHED",i,V),b[51]=V,b[52]=i,b[53]=t):t=b[53],b[54]!==e||b[55]!==t?(n={tone:"default",icon:m.PublishIcon,label:e,title:t,disabled:!0},b[54]=e,b[55]=t,b[56]=n):n=b[56],x=n;break e}if(!G&&!N?.granted){let e,t,n;b[57]!==V?(e=V("action.publish.label"),b[57]=V,b[58]=e):e=b[58],b[59]!==U?(t=(0,r.jsx)(d.InsufficientPermissionsMessage,{context:"publish-document",currentUser:U}),b[59]=U,b[60]=t):t=b[60],b[61]!==e||b[62]!==t?(n={tone:"default",icon:m.PublishIcon,label:e,title:t,disabled:!0},b[61]=e,b[62]=t,b[63]=n):n=b[63],x=n;break e}let i=!!(O||M?.transactionSyncLock?.enabled||I?.status==="publishing"||I?.status==="published"||z||R.disabled),l=i||G;b[64]!==O||b[65]!==I?.status||b[66]!==V?(e=V(I?.status==="published"?"action.publish.published.label":O||I?.status==="publishing"?"action.publish.running.label":"action.publish.draft.label"),b[64]=O,b[65]=I?.status,b[66]=V,b[67]=e):e=b[67],b[68]!==O||b[69]!==I?.status||b[70]!==V||b[71]!==q?(t=O?V("action.publish.waiting"):I?.status==="published"||I?.status==="publishing"?null:q,b[68]=O,b[69]=I?.status,b[70]=V,b[71]=q,b[72]=t):t=b[72];let o=i||O?null:"Ctrl+Alt+P";b[73]!==X||b[74]!==l||b[75]!==e||b[76]!==t||b[77]!==o?(n={disabled:l,tone:"default",label:e,icon:m.PublishIcon,title:t,shortcut:o,onHandle:X},b[73]=X,b[74]=l,b[75]=e,b[76]=t,b[77]=o,b[78]=n):n=b[78],x=n}return x};oK.action="publish",oK.displayName="PublishAction";let oY={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},oX=e=>{let t,n,i,l,o,c,u=(0,s.c)(22),{id:p,type:h,draft:g,liveEdit:f,release:x}=e,{unpublish:b}=(0,d.useDocumentOperation)(p,h),[y,v]=(0,a.useState)(!1);u[0]!==p||u[1]!==h?(t={id:p,type:h,permission:"unpublish"},u[0]=p,u[1]=h,u[2]=t):t=u[2];let[j,w]=(0,d.useDocumentPairPermissions)(t),S=(0,d.useCurrentUser)(),{t:_}=(0,d.useTranslation)(C),{selectedPerspective:I}=(0,d.usePerspective)(),T="drafts"===I;u[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{v(!1)},u[3]=n):n=u[3];let R=n;u[4]!==b?(i=()=>{v(!1),b.execute()},u[4]=b,u[5]=i):i=u[5];let P=i;e:{if(y){let e,t=g?._id||p;u[6]!==P||u[7]!==t||u[8]!==h?(e={type:"dialog",onClose:R,content:(0,r.jsx)(s6,{id:t,type:h,action:"unpublish",onCancel:R,onConfirm:P})},u[6]=P,u[7]=t,u[8]=h,u[9]=e):e=u[9],l=e;break e}l=null}let E=l;return u[10]!==S||u[11]!==E||u[12]!==T||u[13]!==w||u[14]!==f||u[15]!==j?.granted||u[16]!==x||u[17]!==_||u[18]!==b.disabled?(o=()=>x||T||f?null:w||j?.granted?{tone:"critical",icon:m.UnpublishIcon,disabled:!!b.disabled||w,label:_("action.unpublish.label"),title:b.disabled?_(oY[b.disabled]):"",onHandle:()=>v(!0),dialog:E}:{tone:"critical",icon:m.UnpublishIcon,label:"Unpublish",title:(0,r.jsx)(d.InsufficientPermissionsMessage,{context:"unpublish-document",currentUser:S}),disabled:!0},u[10]=S,u[11]=E,u[12]=T,u[13]=w,u[14]=f,u[15]=j?.granted,u[16]=x,u[17]=_,u[18]=b.disabled,u[19]=o):o=u[19],u[20]!==o?(c=o(),u[20]=o,u[21]=c):c=u[21],c};oX.action="unpublish",oX.displayName="UnpublishAction";let oJ=(0,a.memo)(function(e){let t,n,i,l,o,c,u,p,m,h=(0,s.c)(37),{disabled:g,states:f}=e,{__internal_tasks:x}=(0,d.useSource)(),{editState:b}=iM(),{params:y}=l_(),v=!!y?.rev,{selectedReleaseId:j}=(0,d.usePerspective)();h[0]!==f?([t,...n]=f,h[0]=f,h[1]=t,h[2]=n):(t=h[1],n=h[2]);let[w,S]=(0,a.useState)(null);e:{let e,n,l,o;if(!t||!t.title&&!t.shortcut){i=null;break e}h[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},h[3]=e):e=h[3],h[4]!==t.title?(n=t.title&&(0,r.jsx)(ej.Text,{size:1,children:t.title}),h[4]=t.title,h[5]=n):n=h[5],h[6]!==t.shortcut?(l=t.shortcut&&(0,r.jsx)(ev.Hotkeys,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(o4)}),h[6]=t.shortcut,h[7]=l):l=h[7],h[8]!==n||h[9]!==l?(o=(0,r.jsxs)(ej.Flex,{style:e,align:"center",gap:3,children:[n,l]}),h[8]=n,h[9]=l,h[10]=o):o=h[10],i=o}let C=i;h[11]!==b?.liveEdit||h[12]!==t||h[13]!==j||h[14]!==v?(l=v?!!t:j?t&&!(0,d.isSanityDefinedAction)(t):t&&!b?.liveEdit,h[11]=b?.liveEdit,h[12]=t,h[13]=j,h[14]=v,h[15]=l):l=h[15];let _=l;h[16]!==t||h[17]!==n||h[18]!==_?(o=_?n:[t,...n].filter(Boolean),h[16]=t,h[17]=n,h[18]=_,h[19]=o):o=h[19];let I=o,T=x&&x.footerAction;return h[20]!==g||h[21]!==t||h[22]!==_||h[23]!==C?(c=_&&(0,r.jsx)(ej.LayerProvider,{zOffset:200,children:(0,r.jsx)(ev.Tooltip,{disabled:!C,content:C,placement:"top",children:(0,r.jsx)(ej.Stack,{children:(0,r.jsx)(ev.Button,{"data-testid":`action-${it(t.label)}`,disabled:g||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:S,text:t.label,tone:t.tone||"primary"})})})}),h[20]=g,h[21]=t,h[22]=_,h[23]=C,h[24]=c):c=h[24],h[25]!==g||h[26]!==I?(u=I.length>0&&(0,r.jsx)(og,{actionStates:I,disabled:g}),h[25]=g,h[26]=I,h[27]=u):u=h[27],h[28]!==w||h[29]!==t||h[30]!==_?(p=_&&t&&t.dialog&&(0,r.jsx)(om,{dialog:t.dialog,referenceElement:w}),h[28]=w,h[29]=t,h[30]=_,h[31]=p):p=h[31],h[32]!==T||h[33]!==c||h[34]!==u||h[35]!==p?(m=(0,r.jsxs)(ej.Flex,{align:"center",gap:1,children:[T,c,u,p]}),h[32]=T,h[33]=c,h[34]=u,h[35]=p,h[36]=m):m=h[36],m}),oQ=(0,a.memo)(function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ag,{group:"default",children:o5}),t[0]=e):e=t[0],e});function oZ(e){let t,n,i=(0,s.c)(6),{connectionState:l,documentId:o}=iM();i[0]!==e.states?(t=e.states.filter(o0),i[0]=e.states,i[1]=t):t=i[1];let a=t;if(0===a.length)return null;let d="connected"!==l;return i[2]!==o||i[3]!==a||i[4]!==d?(n=(0,r.jsx)(oJ,{disabled:d,states:a},o),i[2]=o,i[3]=a,i[4]=d,i[5]=n):n=i[5],n}function o0(e){return!e.action||e.action!==on.action}let o1=(0,a.memo)(function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ag,{group:"default",children:o6}),t[0]=e):e=t[0],e});function o2(e){let t,n,i,l=(0,s.c)(8),{states:o}=e,{connectionState:a,editState:d,revisionId:c}=iM();l[0]!==d?.draft||l[1]!==d?.published?(t=d?.draft||d?.published||{},l[0]=d?.draft,l[1]=d?.published,l[2]=t):t=l[2];let u=t._rev===c,p="connected"!==a||!!u;return l[3]!==o?(n=o.filter(o3).slice(-1),l[3]=o,l[4]=n):n=l[4],l[5]!==p||l[6]!==n?(i=(0,r.jsx)(oJ,{disabled:p,states:n}),l[5]=p,l[6]=n,l[7]=i):i=l[7],i}function o3(e){return!!e.action&&e.action===on.action}function o4(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function o5(e){let{states:t}=e;return(0,r.jsx)(oZ,{states:t})}function o6(e){let{states:t}=e;return(0,r.jsx)(o2,{states:t})}let o8={create:m.AddIcon,delete:m.TrashIcon,discardDraft:m.CloseIcon,initial:m.AddIcon,editDraft:m.EditIcon,editLive:m.EditIcon,publish:m.PublishIcon,unpublish:m.UnpublishIcon},o7=(0,e_.styled)(m.ChevronLeftIcon)`
  transition: transform 200ms;
  &[data-expanded='true'] {
    transform: rotate(-90deg);
  }
`;function o9(e){let t,n,i,l,o,a=(0,s.c)(14),{isExpanded:c,onExpand:u}=e,{t:p}=(0,d.useTranslation)(C);a[0]!==c||a[1]!==u?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(rg);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(c),u()},a[0]=c,a[1]=u,a[2]=t):t=a[2];let m=t;return a[3]!==c?(n=(0,r.jsx)(o7,{"data-expanded":c}),a[3]=c,a[4]=n):n=a[4],a[5]!==c||a[6]!==p?(i=p(c?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),a[5]=c,a[6]=p,a[7]=i):i=a[7],a[8]!==i?(l={content:i},a[8]=i,a[9]=l):l=a[9],a[10]!==m||a[11]!==n||a[12]!==l?(o=(0,r.jsx)(ev.Button,{mode:"bleed",icon:n,tooltipProps:l,onClick:m}),a[10]=m,a[11]=n,a[12]=l,a[13]=o):o=a[13],o}let re=(0,e_.styled)(ej.Stack)`
  max-width: 200px;
`,rt=(0,e_.styled)(ej.Flex)`
  max-height: ${e=>e.$maxHeight};
  min-width: 244px;
`,rn=(0,e_.styled)(ej.Box)(({$visible:e})=>e_.css`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${e&&e_.css`
      opacity: 1;
      pointer-events: auto;
    `}
  `),ri={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function rl(e){let t,n,i=(0,s.c)(9),{maxLength:l,userIds:o,size:a,withTooltip:c}=e,u=void 0===c||c;if(i[0]!==o||i[1]!==u){let e;i[3]!==u?(e=e=>(0,r.jsx)(d.UserAvatar,{user:e,withTooltip:u},e),i[3]=u,i[4]=e):e=i[4],t=o.map(e),i[0]=o,i[1]=u,i[2]=t}else t=i[2];return i[5]!==l||i[6]!==a||i[7]!==t?(n=(0,r.jsx)(ej.AvatarStack,{maxLength:l,size:a,children:t}),i[5]=l,i[6]=a,i[7]=t,i[8]=n):n=i[8],n}let ro=(0,e_.styled)(ej.Flex)(e=>{let t=(0,tU.getTheme_v2)(e.theme),n=e.$color;return e_.css`
    --card-icon-color: ${t.color.avatar[n].fg};
    background-color: ${t.color.avatar[n].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${t.avatar.sizes[0].size}px;
    height: ${t.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),rr={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},rs={minimal:!0,useTemporalPhrase:!0},ra=(0,e_.styled)(ew.Skeleton)(e=>{let t=(0,tU.getTheme_v2)(e.theme);return e_.css`
    width: 6ch;
    height: ${t.font.text.sizes[0].lineHeight}px;
  `}),rd=e=>{let t,n,i,l=(0,s.c)(10),{userId:o}=e,[a,c]=(0,d.useUser)(o);return l[0]!==c||l[1]!==a?(t=(0,r.jsx)(ej.Box,{children:c||!a?(0,r.jsx)(d.AvatarSkeleton,{animated:!0}):(0,r.jsx)(d.UserAvatar,{user:a})}),l[0]=c,l[1]=a,l[2]=t):t=l[2],l[3]!==c||l[4]!==a?(n=(0,r.jsx)(ej.Box,{children:c||!a?.displayName?(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(ra,{animated:!0})}):(0,r.jsx)(ej.Text,{muted:!0,size:1,children:a.displayName})}),l[3]=c,l[4]=a,l[5]=n):n=l[5],l[6]!==t||l[7]!==n||l[8]!==o?(i=(0,r.jsxs)(ej.Flex,{align:"center",gap:2,padding:1,children:[t,n]},o),l[6]=t,l[7]=n,l[8]=o,l[9]=i):i=l[9],i},rc=e=>{let t,n,i,l,o=(0,s.c)(9),{collaborators:a}=e,{t:c}=(0,d.useTranslation)("studio");return o[0]!==c?(t=c("timeline.changes.title"),o[0]=c,o[1]=t):t=o[1],o[2]!==t?(n=(0,r.jsx)(ej.Box,{padding:1,paddingBottom:2,children:(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:t})}),o[2]=t,o[3]=n):n=o[3],o[4]!==a?(i=a.map(rp),o[4]=a,o[5]=i):i=o[5],o[6]!==n||o[7]!==i?(l=(0,r.jsxs)(ej.Stack,{paddingBottom:1,children:[n,i]}),o[6]=n,o[7]=i,o[8]=l):l=o[8],l};function ru(e){let t,n,i,l,o,a,c,u,p,m,h,g,f,x,b,y,v,j,w,S,C,_=(0,s.c)(55),{chunk:I,isSelected:T,onSelect:R,collaborators:P,optionsMenu:E}=e,{t:k}=(0,d.useTranslation)("studio"),{type:D,endTimestamp:F}=I;_[0]!==D?(t=o8[D],_[0]=D,_[1]=t):t=_[1];let A=t;_[2]!==I.authors?(n=Array.from(I.authors),_[2]=I.authors,_[3]=n):n=_[3];let M=n;_[4]!==P?(i=P?Array.from(P):[],_[4]=P,_[5]=i):i=_[5];let V=i,L="delete"!==D;_[6]===Symbol.for("react.memo_cache_sentinel")?(l={dateStyle:"medium",timeStyle:"short"},_[6]=l):l=_[6];let z=(0,d.useDateTimeFormat)(l);_[7]!==F?(o=new Date(F),_[7]=F,_[8]=o):o=_[8];let O=(0,d.useRelativeTime)(o||"",rs);if(_[9]!==z||_[10]!==F){let e=new Date(F);a=z.format(e),_[9]=z,_[10]=F,_[11]=a}else a=_[11];let B=a;_[12]!==I||_[13]!==L||_[14]!==R?(c=e=>{e.preventDefault(),e.stopPropagation(),L&&R(I)},_[12]=I,_[13]=L,_[14]=R,_[15]=c):c=_[15];let H=c;_[16]===Symbol.for("react.memo_cache_sentinel")?(u={position:"relative"},_[16]=u):u=_[16],_[17]!==M?(p=(0,r.jsx)(rl,{maxLength:3,userIds:M,size:2}),_[17]=M,_[18]=p):p=_[18];let $=rr[D];return _[19]!==A?(m=A&&(0,r.jsx)(A,{}),_[19]=A,_[20]=m):m=_[20],_[21]!==m?(h=(0,r.jsx)(ej.Text,{size:0,children:m}),_[21]=m,_[22]=h):h=_[22],_[23]!==$||_[24]!==h?(g=(0,r.jsx)(ro,{align:"center",justify:"center",$color:$,children:h}),_[23]=$,_[24]=h,_[25]=g):g=_[25],_[26]!==g||_[27]!==p?(f=(0,r.jsxs)("div",{style:u,children:[p,g]}),_[26]=g,_[27]=p,_[28]=f):f=_[28],_[29]!==k||_[30]!==D?(x=k(ri[D])||(0,r.jsx)("code",{children:D}),_[29]=k,_[30]=D,_[31]=x):x=_[31],_[32]!==x?(b=(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:x}),_[32]=x,_[33]=b):b=_[33],_[34]!==B||_[35]!==F||_[36]!==O?(y=(0,r.jsx)(ej.Text,{as:"time",size:1,muted:!0,dateTime:F,title:B,children:O}),_[34]=B,_[35]=F,_[36]=O,_[37]=y):y=_[37],_[38]!==b||_[39]!==y?(v=(0,r.jsxs)(ej.Stack,{space:2,children:[b,y]}),_[38]=b,_[39]=y,_[40]=v):v=_[40],_[41]!==V?(j=V.length>0&&(0,r.jsx)(ej.Flex,{flex:1,justify:"flex-end",align:"center",children:(0,r.jsx)(ev.Tooltip,{placement:"top",content:(0,r.jsx)(rc,{collaborators:V}),portal:!0,children:(0,r.jsx)(ej.Box,{paddingLeft:2,paddingY:2,children:(0,r.jsx)(rl,{maxLength:3,userIds:V,size:0,withTooltip:!1})})})}),_[41]=V,_[42]=j):j=_[42],_[43]!==f||_[44]!==v||_[45]!==j?(w=(0,r.jsxs)(ej.Flex,{align:"center",gap:3,children:[f,v,j]}),_[43]=f,_[44]=v,_[45]=j,_[46]=w):w=_[46],_[47]!==I.id||_[48]!==H||_[49]!==T||_[50]!==w?(S=(0,r.jsx)(ej.Card,{as:"button",onClick:H,padding:2,pressed:T,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":I.id,children:w}),_[47]=I.id,_[48]=H,_[49]=T,_[50]=w,_[51]=S):S=_[51],_[52]!==E||_[53]!==S?(C=(0,r.jsxs)(ej.Flex,{align:"center",gap:1,children:[S,E]}),_[52]=E,_[53]=S,_[54]=C):C=_[54],C}function rp(e){return(0,r.jsx)(rd,{userId:e},e)}let rm=e=>"publish"!==e.type,rh=e=>"publish"===e.type,rg="timeline-list-wrapper",rf=e=>{let t,n,i,l,o,c,u,p,m,h,g,f,x,b,y,v,j=(0,s.c)(51),{chunks:w,hasMoreChunks:S,lastChunk:C,onLoadMore:_,onSelect:I,listMaxHeight:T}=e,R=void 0===T?"calc(100vh - 280px)":T,[P,E]=(0,a.useState)(!1),{t:k}=(0,d.useTranslation)("studio"),D=C?.id;j[0]!==w?(t=function(e){let t=[];for(let n of e){if(rh(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(rm(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(rh(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&e?.type==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}rm(n)&&t.push(n)}return t}(w),j[0]=w,j[1]=t):t=j[1];let F=t;j[2]!==F||j[3]!==D?(n=()=>{if(D){let e=F.find(e=>e.id===D);if(e&&rm(e)&&e.parentId)return new Set([e.parentId])}return new Set},j[2]=F,j[3]=D,j[4]=n):n=j[4];let[A,M]=(0,a.useState)(n);if(j[5]!==F||j[6]!==D?(i=()=>{if(D){let e=F.find(e=>e.id===D);if(e&&rm(e)&&e.parentId){let t=e.parentId;M(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},l=[F,D],j[5]=F,j[6]=D,j[7]=i,j[8]=l):(i=j[7],l=j[8]),(0,a.useEffect)(i,l),j[9]!==F||j[10]!==A){let e;j[12]!==A?(e=e=>!!rh(e)||!e.parentId||A.has(e.parentId),j[12]=A,j[13]=e):e=j[13],o=F.filter(e),j[9]=F,j[10]=A,j[11]=o}else o=j[11];let V=o;j[14]!==V.length||j[15]!==S||j[16]!==_?(c=()=>{V.length<16&&S&&_()},j[14]=V.length,j[15]=S,j[16]=_,j[17]=c):c=j[17],j[18]!==V||j[19]!==S||j[20]!==_?(u=[V,S,_],j[18]=V,j[19]=S,j[20]=_,j[21]=u):u=j[21],(0,a.useEffect)(c,u),j[22]===Symbol.for("react.memo_cache_sentinel")?(p=e=>()=>M(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),j[22]=p):p=j[22];let L=p;j[23]!==V||j[24]!==D?(m=D?V.findIndex(e=>e.id===D):-1,j[23]=V,j[24]=D,j[25]=m):m=j[25];let z=m;j[26]!==w||j[27]!==I?(h=e=>{let t=w.find(t=>t.id===e.id);t?I(t):(console.error("TimelineItem: chunk not found"),I(e))},j[26]=w,j[27]=I,j[28]=h):h=j[28];let O=h;j[29]!==A||j[30]!==V.length||j[31]!==O||j[32]!==S||j[33]!==D?(g=(e,t)=>{let{activeIndex:n}=t;return(0,r.jsxs)(ej.Box,{paddingBottom:1,paddingTop:+(0===n),paddingRight:1,paddingLeft:rm(e)&&e.parentId?4:1,children:[(0,r.jsx)(ru,{chunk:e,isSelected:D===e.id,onSelect:O,collaborators:rh(e)?e.collaborators:void 0,optionsMenu:rh(e)&&e.children.length>0?(0,r.jsx)(o9,{isExpanded:A.has(e.id),onExpand:L(e.id)}):null}),n===V.length-1&&S&&(0,r.jsx)(d.LoadingBlock,{})]})},j[29]=A,j[30]=V.length,j[31]=O,j[32]=S,j[33]=D,j[34]=g):g=j[34];let B=g;j[35]===Symbol.for("react.memo_cache_sentinel")?(f=()=>E(!0),x=[],j[35]=f,j[36]=x):(f=j[35],x=j[36]),(0,a.useEffect)(f,x);let H=!z||P;return j[37]!==V.length||j[38]!==k?(b=0===V.length&&(0,r.jsxs)(re,{padding:3,space:3,children:[(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:k("timeline.error.no-document-history-title")}),(0,r.jsx)(ej.Text,{muted:!0,size:1,children:k("timeline.error.no-document-history-description")})]}),j[37]=V.length,j[38]=k,j[39]=b):b=j[39],j[40]!==V||j[41]!==R||j[42]!==_||j[43]!==B||j[44]!==z||j[45]!==k?(y=V.length>0&&(0,r.jsx)(rt,{direction:"column",$maxHeight:R,id:rg,children:(0,r.jsx)(d.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:k("timeline.list.aria-label"),autoFocus:"list",initialIndex:z,initialScrollAlign:"center",itemHeight:57,items:V,onEndReached:_,onEndReachedIndexOffset:20,overscan:5,renderItem:B,wrapAround:!1})}),j[40]=V,j[41]=R,j[42]=_,j[43]=B,j[44]=z,j[45]=k,j[46]=y):y=j[46],j[47]!==H||j[48]!==b||j[49]!==y?(v=(0,r.jsxs)(rn,{$visible:H,"data-ui":"timeline",children:[b,y]}),j[47]=H,j[48]=b,j[49]=y,j[50]=v):v=j[50],v};function rx(e){let t,n,i,l,o,a,c=(0,s.c)(14),{versionError:u}=e,{t:p}=(0,d.useTranslation)("studio");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(d.TextWithTone,{tone:"critical",children:(0,r.jsx)(m.ErrorOutlineIcon,{})}),c[0]=t):t=c[0],c[1]!==p||c[2]!==u?(n=p(u?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),c[1]=p,c[2]=u,c[3]=n):n=c[3],c[4]!==n?(i=(0,r.jsx)(d.TextWithTone,{size:1,tone:"critical",weight:"medium",children:n}),c[4]=n,c[5]=i):i=c[5],c[6]!==p||c[7]!==u?(l=p(u?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),c[6]=p,c[7]=u,c[8]=l):l=c[8],c[9]!==l?(o=(0,r.jsx)(d.TextWithTone,{size:1,tone:"critical",children:l}),c[9]=l,c[10]=o):o=c[10],c[11]!==i||c[12]!==o?(a=(0,r.jsxs)(ej.Flex,{align:"flex-start",gap:3,padding:4,children:[t,(0,r.jsxs)(ej.Stack,{space:4,children:[i,o]})]}),c[11]=i,c[12]=o,c[13]=a):a=c[13],a}let rb=(0,e_.styled)(ev.Popover)`
  overflow: hidden;
  overflow: clip;
`,ry="timeline-menu";function rv(e){let t,n,i,l,o,c,u,p,h,g,f,x,b,y,v,j,w=(0,s.c)(62),{chunk:S,mode:C,placement:_}=e,{setTimelineRange:I,timelineError:T,ready:R,timelineStore:P}=iM(),[E,k]=(0,a.useState)(!1),[D,F]=(0,a.useState)(null),[A,M]=(0,a.useState)(null),V=(0,ew.useToast)(),L=(0,d.useTimelineSelector)(P,r_),z=(0,d.useTimelineSelector)(P,rC),O=(0,d.useTimelineSelector)(P,rS),B=(0,d.useTimelineSelector)(P,rw),H=(0,d.useTimelineSelector)(P,rj),{t:$}=(0,d.useTranslation)("studio");w[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{k(!0)},w[0]=t):t=w[0];let N=t;w[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{k(!1)},w[1]=n):n=w[1];let G=n;w[2]!==D||w[3]!==E?(i=e=>{E&&("Escape"===e.key||"Tab"===e.key)&&(G(),D?.focus())},w[2]=D,w[3]=E,w[4]=i):i=w[4],(0,ej.useGlobalKeyDown)(i),w[5]!==D||w[6]!==A?(l=()=>[D,A],w[5]=D,w[6]=A,w[7]=l):l=w[7],(0,ej.useClickOutsideEvent)(E&&G,l),w[8]!==I||w[9]!==$||w[10]!==P||w[11]!==V?(o=e=>{try{(()=>{let[t,n]=P?.findRangeForRev(e)||[null,null];I(t,n)})()}catch(e){V.push({closable:!0,description:e.message,status:"error",title:$("timeline.error.unable-to-load-revision")})}},w[8]=I,w[9]=$,w[10]=P,w[11]=V,w[12]=o):o=w[12];let U=o;w[13]!==I||w[14]!==$||w[15]!==P||w[16]!==V?(c=e=>{try{(()=>{let[t,n]=P?.findRangeForSince(e)||[null,null];I(t,n)})()}catch(e){V.push({closable:!0,description:e.message,status:"error",title:$("timeline.error.unable-to-load-revision")})}},w[13]=I,w[14]=$,w[15]=P,w[16]=V,w[17]=c):c=w[17];let q=c;w[18]!==z||w[19]!==P?(u=()=>{z||P?.loadMore()},w[18]=z,w[19]=P,w[20]=u):u=w[20];let W=u;e:{let e,t;if(T){let e;w[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(rx,{}),w[21]=e):e=w[21],p=e;break e}if("rev"===C){let e;w[22]!==L||w[23]!==W||w[24]!==O||w[25]!==B||w[26]!==U?(e=(0,r.jsx)(rf,{chunks:L,hasMoreChunks:O,lastChunk:B,onLoadMore:W,onSelect:U}),w[22]=L,w[23]=W,w[24]=O,w[25]=B,w[26]=U,w[27]=e):e=w[27],p=e;break e}w[28]!==L||w[29]!==B?(e=B?L.filter(e=>e.index<B.index):L,w[28]=L,w[29]=B,w[30]=e):e=w[30];let n=e;w[31]!==n||w[32]!==W||w[33]!==O||w[34]!==q||w[35]!==H?(t=(0,r.jsx)(rf,{chunks:n,hasMoreChunks:O,lastChunk:H,onLoadMore:W,onSelect:q}),w[31]=n,w[32]=W,w[33]=O,w[34]=q,w[35]=H,w[36]=t):t=w[36],p=t}let K=p;if(w[37]!==S||w[38]!==$){let e={timestamp:{dateStyle:"medium",timeStyle:"short"}};h=S?$(ri[S.type],{context:"timestamp",timestamp:new Date(S?.endTimestamp),formatParams:e}):$("timeline.latest-revision"),g=S?$("timeline.since",{timestamp:new Date(S?.endTimestamp),formatParams:e}):$("timeline.since-version-missing"),w[37]=S,w[38]=$,w[39]=h,w[40]=g}else h=w[39],g=w[40];let Y="rev"===C?h:g;w[41]!==A?(f={[ry]:A},w[41]=A,w[42]=f):f=w[42];let X=f,J=E&&K,Q=E?"timeline-menu-close-button":"timeline-menu-open-button",Z=!R,ee=E?G:N;return w[43]===Symbol.for("react.memo_cache_sentinel")?(x={maxWidth:"100%"},w[43]=x):x=w[43],w[44]!==Y||w[45]!==R||w[46]!==$?(b=R?Y:$("timeline.loading-history"),w[44]=Y,w[45]=R,w[46]=$,w[47]=b):b=w[47],w[48]!==E||w[49]!==Q||w[50]!==Z||w[51]!==ee||w[52]!==b?(y=(0,r.jsx)(ej.Flex,{width:"fill",children:(0,r.jsx)(ev.Button,{"data-testid":Q,disabled:Z,mode:"ghost",onClick:ee,ref:F,selected:E,width:"fill",tooltipProps:null,justify:"space-between",style:x,iconRight:m.ChevronDownIcon,text:b})}),w[48]=E,w[49]=Q,w[50]=Z,w[51]=ee,w[52]=b,w[53]=y):y=w[53],w[54]!==E||w[55]!==_||w[56]!==J||w[57]!==y?(v=(0,r.jsx)(rb,{"data-testid":"timeline-menu",constrainSize:!0,content:J,"data-ui":"versionMenu",open:E,placement:_,matchReferenceWidth:!0,portal:!0,ref:M,children:y}),w[54]=E,w[55]=_,w[56]=J,w[57]=y,w[58]=v):v=w[58],w[59]!==X||w[60]!==v?(j=(0,r.jsx)(ej.PortalProvider,{__unstable_elements:X,children:v}),w[59]=X,w[60]=v,w[61]=j):j=w[61],j}function rj(e){return e.sinceTime}function rw(e){return e.realRevChunk}function rS(e){return e.hasMoreChunks}function rC(e){return e.isLoading}function r_(e){return e.chunks}let rI=(0,e_.styled)(eT.motion.path)`
  transform-origin: center;
`,rT=e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,r.jsx)(eT.motion.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),n[0]=e,n[1]=t):t=n[1],t},rR=e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,r.jsx)(rI,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),n[0]=e,n[1]=t):t=n[1],t},rP=e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,r.jsx)(eT.motion.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),n[0]=e,n[1]=t):t=n[1],t},rE=e_.keyframes`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,rk=e_.styled.g`
  transform-origin: center;

  &[data-rotate] {
    animation: ${rE} 1s ease-in-out infinite;
  }
`,rD={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},rF={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},rA={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},rM={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function rV(e){let t,n,i,l,o,a=(0,s.c)(13),{status:d}=e;if(!d)return null;let c="changes"===d?void 0:"";return a[0]!==d?(t=(0,r.jsx)(rR,{variants:rA,initial:d,animate:d}),n=(0,r.jsx)(rT,{variants:rF,initial:d,animate:d}),a[0]=d,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==c||a[4]!==t||a[5]!==n?(i=(0,r.jsxs)(rk,{"data-rotate":c,children:[t,n]}),a[3]=c,a[4]=t,a[5]=n,a[6]=i):i=a[6],a[7]!==d?(l=(0,r.jsx)(rP,{variants:rM,initial:d,animate:d}),a[7]=d,a[8]=l):l=a[8],a[9]!==d||a[10]!==i||a[11]!==l?(o=(0,r.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,r.jsxs)(eT.motion.g,{variants:rD,initial:d,animate:d,children:[i,l]})}),a[9]=d,a[10]=i,a[11]=l,a[12]=o):o=a[12],o}let rL={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},rz=e=>{let t,n,i,l,o,a=(0,s.c)(13),{status:c}=e,{t:u}=(0,d.useTranslation)(C);if("saved"!==c&&"syncing"!==c)return null;let p=rL[c];return a[0]!==c?(t=(0,r.jsx)(rV,{status:c}),a[0]=c,a[1]=t):t=a[1],a[2]!==p.tone||a[3]!==t?(n=(0,r.jsx)(d.TextWithTone,{size:1,tone:p.tone,children:t}),a[2]=p.tone,a[3]=t,a[4]=n):n=a[4],a[5]!==p.i18nKey||a[6]!==u?(i=u(p.i18nKey),a[5]=p.i18nKey,a[6]=u,a[7]=i):i=a[7],a[8]!==i?(l=(0,r.jsx)(ej.Text,{muted:!0,size:1,children:i}),a[8]=i,a[9]=l):l=a[9],a[10]!==n||a[11]!==l?(o=(0,r.jsxs)(ej.Flex,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[n,l]}),a[10]=n,a[11]=l,a[12]=o):o=a[12],o},rO={minimal:!0,useTemporalPhrase:!0},rB=eT.motion.create(ej.Button),rH=eT.motion.create(ej.Box);function r$(e){return"timeline.operation.published"===e?"document-status.last-published":e}let rN=()=>{let e,t,n=(0,s.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{style:{margin:-5},children:(0,r.jsx)(d.AvatarSkeleton,{$size:0,animated:!0})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsxs)(ej.Flex,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[e,(0,r.jsx)(ew.Skeleton,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),n[1]=t):t=n[1],t},rG=e=>{let t,n,i,l,o,a,c,u,p=(0,s.c)(17),{author:m,translationKey:h,timestamp:g}=e,{onHistoryOpen:f,inspector:x,onHistoryClose:b}=iM(),{t:y}=(0,d.useTranslation)(),v=(0,d.useRelativeTime)(void 0===g?"":g,rO);p[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:1},n={opacity:0},i={opacity:0},p[0]=t,p[1]=n,p[2]=i):(t=p[0],n=p[1],i=p[2]);let j=x?.name===iU?b:f;return p[3]!==m?(l=m&&(0,r.jsx)("div",{style:{margin:-5},children:(0,r.jsx)(d.UserAvatar,{user:m,size:0})}),p[3]=m,p[4]=l):l=p[4],p[5]!==y||p[6]!==h?(o=y(h),p[5]=y,p[6]=h,p[7]=o):o=p[7],p[8]!==v||p[9]!==o?(a=(0,r.jsxs)(ej.Text,{muted:!0,size:1,children:[o," ",v]}),p[8]=v,p[9]=o,p[10]=a):a=p[10],p[11]!==l||p[12]!==a?(c=(0,r.jsxs)(ej.Flex,{align:"center",flex:"none",gap:3,children:[l,a]}),p[11]=l,p[12]=a,p[13]=c):c=p[13],p[14]!==j||p[15]!==c?(u=(0,r.jsx)(rB,{"data-testid":"pane-footer-document-status",animate:t,initial:n,exit:i,mode:"bleed",onClick:j,padding:2,muted:!0,children:c}),p[14]=j,p[15]=c,p[16]=u):u=p[16],u},rU=()=>{let e,t,n=(0,s.c)(6),{editState:i}=iM(),{selectedPerspective:l}=(0,d.usePerspective)();n[0]!==i||n[1]!==l?(e=(0,d.isPublishedPerspective)(l)&&i?.published?._updatedAt?{translationKey:d.TIMELINE_ITEM_I18N_KEY_MAPPING.published.createDocumentVersion,timestamp:i.published._updatedAt}:i?.version?._updatedAt?{translationKey:i.version._updatedAt===i.version._createdAt?d.TIMELINE_ITEM_I18N_KEY_MAPPING.version.createDocumentVersion:d.TIMELINE_ITEM_I18N_KEY_MAPPING.version.editDocumentVersion,timestamp:i.version._updatedAt}:i?.draft?._updatedAt?{translationKey:i.draft._updatedAt===i.draft._createdAt?d.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.createDocumentVersion:d.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.editDocumentVersion,timestamp:i.draft._updatedAt}:null,n[0]=i,n[1]=l,n[2]=e):e=n[2];let o=e;return o?(n[3]!==o.timestamp||n[4]!==o.translationKey?(t=(0,r.jsx)(rG,{author:"",translationKey:o.translationKey,timestamp:o.timestamp}),n[3]=o.timestamp,n[4]=o.translationKey,n[5]=t):t=n[5],t):null},rq=()=>{let e,t,n=(0,s.c)(8),{events:i,loading:l}=(0,d.useEvents)(),o=i?.[0];if(!o&&l){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(rN,{}),n[0]=e):e=n[0],e}if(!o){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(rU,{}),n[1]=e):e=n[1],e}let a=o.author,c=d.TIMELINE_ITEM_I18N_KEY_MAPPING[o.documentVariantType][o.type];return n[2]!==c?(e=r$(c),n[2]=c,n[3]=e):e=n[3],n[4]!==o.author||n[5]!==o.timestamp||n[6]!==e?(t=(0,r.jsx)(rG,{author:a,translationKey:e,timestamp:o.timestamp}),n[4]=o.author,n[5]=o.timestamp,n[6]=e,n[7]=t):t=n[7],t},rW=()=>{let e,t,n,i=(0,s.c)(10),{timelineStore:l}=iM(),o=(0,d.useTimelineSelector)(l,rY),a=(0,d.useTimelineSelector)(l,rX),c=o?.[0];if(!c&&a){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(rN,{}),i[0]=e):e=i[0],e}if(!c){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(rU,{}),i[1]=e):e=i[1],e}i[2]!==c.authors?(e=Array.from(c.authors),i[2]=c.authors,i[3]=e):e=i[3];let u=e[0],p=ri[c.type];return i[4]!==p?(t=r$(p),i[4]=p,i[5]=t):t=i[5],i[6]!==u||i[7]!==c.endTimestamp||i[8]!==t?(n=(0,r.jsx)(rG,{author:u,translationKey:t,timestamp:c.endTimestamp}),i[6]=u,i[7]=c.endTimestamp,i[8]=t,i[9]=n):n=i[9],n};function rK(){let e,t,n,i,l,o,c,u=(0,s.c)(18),{documentId:p,documentType:m,editState:h,value:g}=iM(),[f,x]=(0,a.useState)(null),b=(0,d.useSource)().beta?.eventsAPI?.documents,y=(0,d.useSyncState)(p,m,h?.release),v=g?._updatedAt;return u[0]!==f||u[1]!==y.isSyncing?(e=()=>{if("syncing"===f&&!y.isSyncing){let e=setTimeout(()=>x("saved"),1e3);return()=>clearTimeout(e)}if("saved"===f){let e=setTimeout(()=>x(null),3e3);return()=>clearTimeout(e)}},u[0]=f,u[1]=y.isSyncing,u[2]=e):e=u[2],u[3]!==v||u[4]!==f||u[5]!==y.isSyncing?(t=[f,v,y.isSyncing],u[3]=v,u[4]=f,u[5]=y.isSyncing,u[6]=t):t=u[6],(0,a.useEffect)(e,t),u[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{x(null)},u[7]=n):n=u[7],u[8]!==p?(i=[p],u[8]=p,u[9]=i):i=u[9],(0,a.useLayoutEffect)(n,i),u[10]!==y.isSyncing?(l=()=>{y.isSyncing&&x("syncing")},u[10]=y.isSyncing,u[11]=l):l=u[11],u[12]!==v||u[13]!==y.isSyncing?(o=[y.isSyncing,v],u[12]=v,u[13]=y.isSyncing,u[14]=o):o=u[14],(0,a.useLayoutEffect)(l,o),u[15]!==b||u[16]!==f?(c=(0,r.jsx)(eR.AnimatePresence,{children:f?(0,r.jsx)(rH,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,r.jsx)(rz,{status:f||void 0})}):(0,r.jsx)(r.Fragment,{children:b?(0,r.jsx)(rq,{}):(0,r.jsx)(rW,{})})}),u[15]=b,u[16]=f,u[17]=c):c=u[17],c}function rY(e){return e.chunks}function rX(e){return e.isLoading}let rJ=(0,e_.styled)(ej.Text)`
  color: var(--card-muted-fg-color);

  em {
    color: var(--card-fg-color);
    font-weight: 500;
    font-style: normal;
  }
`;function rQ(){let e,t,n,i,l=(0,s.c)(9),{displayed:o,revisionNotFound:c}=iM(),p=(0,a.useContext)(u.EventsContext),h=p?.revision,g=p?.events.find(e=>e.id===h?.revisionId),{t:f}=(0,d.useTranslation)(),x=g?.timestamp||o?._updatedAt||o?._createdAt,b=x?(0,r.jsx)(d.Translate,{t:f,i18nKey:"document-status.revision-from",values:{date:(0,tG.format)(new Date(x),"MMM d, yyyy '@' pp")}}):null;l[0]!==b?(e={name:"revision",text:b,tone:"caution"},l[0]=b,l[1]=e):e=l[1];let y=e;return l[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(ej.Box,{flex:"none",children:(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(m.RestoreIcon,{})})}),l[2]=t):t=l[2],l[3]!==y||l[4]!==c||l[5]!==f?(n=c?(0,r.jsx)(d.Translate,{t:f,i18nKey:"document-status.revision-not-found"}):y.text,l[3]=y,l[4]=c,l[5]=f,l[6]=n):n=l[6],l[7]!==n?(i=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(ej.Flex,{flex:1,gap:3,padding:2,children:[t,(0,r.jsx)(ej.Box,{flex:1,children:(0,r.jsx)(rJ,{size:1,textOverflow:"ellipsis",children:n})})]})}),l[7]=n,l[8]=i):i=l[8],i}let rZ=eT.motion.create(ej.Card);function r0(e){let t,n,i,l,o,c,u,p,m=(0,s.c)(22),{actionsBoxRef:h,createLinkMetadata:g}=e,{editState:f,onChange:x,revisionNotFound:b}=iM(),{params:y}=l_(),v=void 0===y?i$:y,{selectedPerspective:j}=(0,d.usePerspective)(),{title:w}=iY(),S=(0,d.useSanityCreateConfig)().components?.documentLinkedActions,C=!!v.rev,[_,I]=(0,a.useState)(null),[T,R]=(0,a.useState)(null);m[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{I(e.contentRect.width<480)},m[0]=t):t=m[0];let P=t;m[1]!==T?(n={element:T,onResize:P},m[1]=T,m[2]=n):n=m[2],function(e){let t,n,i=(0,s.c)(4),{element:l,onResize:o}=e;i[0]!==l||i[1]!==o?(t=()=>(l&&d.resizeObserver.observe(l,o),()=>{l&&d.resizeObserver.unobserve(l)}),n=[l,o],i[0]=l,i[1]=o,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,a.useLayoutEffect)(t,n)}(n);e:{let e=!!(f?.ready&&"boolean"==typeof _);if(j){if((0,d.isPublishedPerspective)(j)){i=e&&!!f?.published;break e}if((0,d.isReleaseDocument)(j)){i=e&&!!f?.version;break e}}i=e}let E=i;if(g&&(0,d.isSanityCreateLinked)(g)&&S){let e;m[3]!==S||m[4]!==g||m[5]!==x||m[6]!==w?(e=(0,r.jsx)(S,{metadata:g,panelPortalElementId:lZ,onDocumentChange:x,documentTitle:w}),m[3]=S,m[4]=g,m[5]=x,m[6]=w,m[7]=e):e=m[7],l=e}else if(C){let e;m[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(o1,{}),m[8]=e):e=m[8],l=e}else{let e;m[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(oQ,{}),m[9]=e):e=m[9],l=e}if(C&&b)return null;let k=C?"revision":"published";m[10]===Symbol.for("react.memo_cache_sentinel")?(o={opacity:.2},m[10]=o):o=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(c={opacity:1,transition:{duration:.3}},m[11]=c):c=m[11];let D=C?"caution":void 0;return m[12]!==l||m[13]!==h||m[14]!==_||m[15]!==E||m[16]!==C?(u=E&&(0,r.jsxs)(ej.Flex,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!C,paddingRight:+!C,children:[(0,r.jsxs)(ej.Flex,{align:"center",flex:1,gap:_?2:3,wrap:"wrap",paddingRight:3,children:[(0,r.jsxs)(ej.Flex,{align:"center",children:[C?(0,r.jsx)(rQ,{}):(0,r.jsx)(rK,{}),(0,r.jsx)(oR,{})]}),(0,r.jsx)(oD,{})]}),(0,r.jsxs)(ej.Flex,{align:"flex-start",justify:"flex-end",ref:h,style:{flexShrink:0,marginLeft:"auto"},children:[(0,r.jsx)(oR,{}),l]})]}),m[12]=l,m[13]=h,m[14]=_,m[15]=E,m[16]=C,m[17]=u):u=m[17],m[18]!==k||m[19]!==D||m[20]!==u?(p=(0,r.jsx)(rZ,{initial:o,animate:c,tone:D,radius:3,ref:R,sizing:"border",padding:2,children:u},k),m[18]=k,m[19]=D,m[20]=u,m[21]=p):p=m[21],p}let r1=(0,a.memo)(function(e){let t,n,i,l,o,a,c,u,p,m,h,g,f,x=(0,s.c)(26);x[0]!==e?({actionsBoxElement:t,activeIndex:n,as:m,children:i,id:l,onActionStart:o,onKeyDown:a,rootRef:u,states:p,...c}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=i,x[4]=l,x[5]=o,x[6]=a,x[7]=c,x[8]=u,x[9]=p,x[10]=m):(t=x[1],n=x[2],i=x[3],l=x[4],o=x[5],a=x[6],c=x[7],u=x[8],p=x[9],m=x[10]);let b=void 0===m?"div":m,y=p[n];x[11]!==o||x[12]!==a||x[13]!==p?(h=e=>{let t=p.filter(t=>t.shortcut&&(0,tv.isHotkey)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${n.shortcut}"`),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),o(p.indexOf(n));return}a&&a(e)},x[11]=o,x[12]=a,x[13]=p,x[14]=h):h=x[14];let v=h;return x[15]!==t||x[16]!==y?(g=y&&y.dialog&&(0,r.jsx)(d.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,r.jsx)(om,{dialog:y.dialog,referenceElement:t})}),x[15]=t,x[16]=y,x[17]=g):g=x[17],x[18]!==b||x[19]!==i||x[20]!==v||x[21]!==l||x[22]!==c||x[23]!==u||x[24]!==g?(f=(0,r.jsxs)(b,{id:l,onKeyDown:v,tabIndex:-1,...c,ref:u,children:[i,g]}),x[18]=b,x[19]=i,x[20]=v,x[21]=l,x[22]=c,x[23]=u,x[24]=g,x[25]=f):f=x[25],f}),r2=(0,a.memo)(e=>{let t,n,i,l,o,d,c=(0,s.c)(12);c[0]!==e?({actionsBoxElement:t,as:l,children:n,...i}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=i,c[4]=l):(t=c[1],n=c[2],i=c[3],l=c[4]);let u=void 0===l?"div":l,[p,m]=(0,a.useState)(-1);c[5]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{m(e)},c[5]=o):o=c[5];let h=o;return c[6]!==t||c[7]!==p||c[8]!==u||c[9]!==n||c[10]!==i?(d=(0,r.jsx)(ag,{children:e=>{let{states:l}=e;return(0,r.jsx)(r1,{...i,activeIndex:p,actionsBoxElement:t,as:u,onActionStart:h,states:l,children:n})}}),c[6]=t,c[7]=p,c[8]=u,c[9]=n,c[10]=i,c[11]=d):d=c[11],d});r2.displayName="Memo(DocumentActionShortcuts)";let r3=()=>{let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.CheckmarkIcon,{style:{visibility:"hidden"}}),t[0]=e):e=t[0],e};function r4(e){let t,n,i,l,o,a,c,u=(0,s.c)(23),{documentType:p,value:m,currentMinWidth:h,paneKey:g,minWidth:f}=e,{t:x}=(0,d.useTranslation)();return u[0]!==p?(t={documentType:p},u[0]=p,u[1]=t):t=u[1],u[2]!==x||u[3]!==t?(n=(0,r.jsx)(d.Translate,{t:x,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),u[2]=x,u[3]=t,u[4]=n):n=u[4],u[5]!==p||u[6]!==x?(i=p&&(0,r.jsx)(ej.Text,{as:"p",children:(0,r.jsx)(d.Translate,{t:x,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:p}})}),u[5]=p,u[6]=x,u[7]=i):i=u[7],u[8]!==p||u[9]!==x?(l=!p&&(0,r.jsx)(ej.Text,{as:"p",children:x("panes.document-pane.document-unknown-type.without-schema.text")}),u[8]=p,u[9]=x,u[10]=l):l=u[10],u[11]!==m?(o=d.isDev&&m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ej.Text,{as:"p",children:"Here is the JSON representation of the document:"}),(0,r.jsx)(ej.Card,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,r.jsx)(ej.Code,{language:"json",size:[1,1,2],children:JSON.stringify(m,null,2)})})]}),u[11]=m,u[12]=o):o=u[12],u[13]!==i||u[14]!==l||u[15]!==o?(a=(0,r.jsxs)(ej.Stack,{space:4,children:[i,l,o]}),u[13]=i,u[14]=l,u[15]=o,u[16]=a):a=u[16],u[17]!==h||u[18]!==f||u[19]!==g||u[20]!==n||u[21]!==a?(c=(0,r.jsx)(iE,{currentMinWidth:h,flex:2.5,minWidth:f,paneKey:g,title:n,tone:"caution",children:a}),u[17]=h,u[18]=f,u[19]=g,u[20]=n,u[21]=a,u[22]=c):c=u[22],c}let r5=["fixed","fixed","absolute"];function r6(e){let t,n,i,l,o,a,c=(0,s.c)(16),{documentPanelPortalElement:u,setFooterElement:p,setActionsBoxElement:m}=e,h=(0,d.useZIndex)(),{value:g}=iM();c[0]!==u?(t={[lZ]:u},c[0]=u,c[1]=t):t=c[1];let f=t;c[2]!==g?(n=(0,d.getSanityCreateLinkMetadata)(g),c[2]=g,c[3]=n):n=c[3];let x=n;return c[4]!==x||c[5]!==m?(i=(0,r.jsx)(ev.TooltipDelayGroupProvider,{children:(0,r.jsx)(r0,{actionsBoxRef:m,createLinkMetadata:x})}),c[4]=x,c[5]=m,c[6]=i):i=c[6],c[7]!==p||c[8]!==i?(l=(0,r.jsx)(im,{ref:p,padding:1,children:i}),c[7]=p,c[8]=i,c[9]=l):l=c[9],c[10]!==l||c[11]!==h.portal?(o=(0,r.jsx)(ew.DialogProvider,{position:r5,zOffset:h.portal,children:l}),c[10]=l,c[11]=h.portal,c[12]=o):o=c[12],c[13]!==f||c[14]!==o?(a=(0,r.jsx)(ej.PortalProvider,{__unstable_elements:f,children:o}),c[13]=f,c[14]=o,c[15]=a):a=c[15],a}let r8=[],r7=["fixed","fixed","absolute"],r9=(0,e_.styled)(d.ChangeConnectorRoot)`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`;function se(){var e;let t,n,i,l,o,c,u,p,h,g,f,x,b,y,v,j,w,S,_,I,T,R,P=(0,s.c)(82),{changesOpen:E,displayed:k,documentId:D,documentType:F,editState:A,fieldActions:M,focusPath:V,inspectOpen:L,inspector:z,inspectors:O,onFocus:B,onHistoryOpen:H,onMenuAction:$,onPathOpen:N,paneKey:G,schemaType:U,value:q,previewUrl:W}=iM(),{stickyParams:K}=(0,eE.useRouter)(),{params:Y}=l_(),{features:X}=iH(),{t:J}=(0,d.useTranslation)(C),{collapsed:Q}=n3(),Z=(0,d.useZIndex)(),[ee,et]=(0,a.useState)(null),[en,ei]=(0,a.useState)(null),[el,eo]=(0,a.useState)(null),[er,es]=(0,a.useState)(null),[ea,ed]=(0,a.useState)(null);P[0]!==V||P[1]!==ee||P[2]!==q?(t={element:ee,focusPath:V,value:q},P[0]=V,P[1]=ee,P[2]=q,P[3]=t):t=P[3],(0,d.useGlobalCopyPasteElementHandler)(t),P[4]===Symbol.for("react.memo_cache_sentinel")?(n=[],P[4]=n):n=P[4];let[ec,eu]=(0,a.useState)(n);P[5]===Symbol.for("react.memo_cache_sentinel")?(i=[],P[5]=i):i=P[5];let[ep,em]=(0,a.useState)(i),eh=(0,ew.useElementRect)(en),eg=(0,ew.useElementRect)(el),ef=eh?.height,ex=eg?.height,eb=600+320*!!z,ey=320+320*!!z;P[6]!==z?.name||P[7]!==O?(l=O?.find(e=>e.name===z?.name),P[6]=z?.name,P[7]=O,P[8]=l):l=P[8];let ev=l;P[9]!==k||P[10]!==D||P[11]!==A?(o={displayed:k,documentId:D,editState:A},P[9]=k,P[10]=D,P[11]=A,P[12]=o):o=P[12];let eS=(0,d.useDocumentIdStack)(o),eC=!!q,e_="true"===K.displayInlineChanges;P[13]!==ev||P[14]!==eS||P[15]!==X||P[16]!==eC||P[17]!==ec||P[18]!==O||P[19]!==W||P[20]!==J||P[21]!==e_?(T=function({currentInspector:e,hasValue:t,inspectors:n,inspectorMenuItems:i}){return n.map((n,l)=>{let o=i[l];return!o||o.hidden?null:{action:`${iN}${n.name}`,group:o.showAsAction?void 0:"inspectors",icon:o.icon,disabled:!t,selected:e?.name===n.name,shortcut:o.hotkeys?.join("+"),showAsAction:o.showAsAction,title:o.title,tone:o.tone}}).filter(Boolean)}(e={currentInspector:ev,features:X,hasValue:eC,inspectorMenuItems:ec,inspectors:O,previewUrl:W,documentIdStack:eS,t:J,displayInlineChanges:e_}),R=[function({previewUrl:e,t}){return e?{action:"production-preview",group:"links",title:t("production-preview.menu-item.title"),icon:m.EarthAmericasIcon,shortcut:"Ctrl+Alt+O"}:null}(e),function({documentIdStack:e,t}){let n=typeof e?.previousId>"u"&&{reason:t("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:t("compare-versions.menu-item.title"),icon:m.TransferIcon,disabled:n}}(e),function({displayInlineChanges:e,t}){return{action:"toggleInlineChanges",group:"inspectors",title:t("toggle-inline-changes.menu-item.title"),icon:e?m.CheckmarkIcon:r3}}(e)].filter(Boolean),c=[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:m.LinkIcon},...T,function({hasValue:e,t}){return{action:"inspect",group:"inspectors",title:t("document-inspector.menu-item.title"),icon:m.JsonIcon,disabled:!e,shortcut:"Ctrl+Alt+I"}}(e),...R],P[13]=ev,P[14]=eS,P[15]=X,P[16]=eC,P[17]=ec,P[18]=O,P[19]=W,P[20]=J,P[21]=e_,P[22]=c):c=P[22];let eI=c;P[23]!==eI||P[24]!==$?(u=e=>{for(let t of eI)if(t.shortcut&&(0,tv.isHotkey)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),$(t);return}},P[23]=eI,P[24]=$,P[25]=u):u=P[25];let eT=u;P[26]!==B||P[27]!==N?(p=e=>{N(e),B(e)},P[26]=B,P[27]=N,P[28]=p):p=P[28];let eR=p;if(!U){let e;return P[29]!==eb||P[30]!==F||P[31]!==ey||P[32]!==G||P[33]!==q?(e=(0,r.jsx)(r4,{currentMinWidth:eb,documentType:F,minWidth:ey,paneKey:G,value:q}),P[29]=eb,P[30]=F,P[31]=ey,P[32]=G,P[33]=q,P[34]=e):e=P[34],e}P[35]!==D||P[36]!==F||P[37]!==O?(h=O.length>0&&(0,r.jsx)(iq,{documentId:D,documentType:F,inspectors:O,onMenuItems:eu}),P[35]=D,P[36]=F,P[37]=O,P[38]=h):h=P[38],P[39]!==D||P[40]!==F||P[41]!==M||P[42]!==U?(g=M.length>0&&U&&(0,r.jsx)(d.FieldActionsResolver,{actions:M,documentId:D,documentType:F,onActions:em,path:r8,schemaType:U}),P[39]=D,P[40]=F,P[41]=M,P[42]=U,P[43]=g):g=P[43],P[44]!==eI?(f=(0,r.jsx)(oS,{ref:eo,menuItems:eI}),P[44]=eI,P[45]=f):f=P[45];let eP=Q?void 0:"fill",ek=E&&Y?.changesInspectorTab==="review",eD=ef||null,eF=ex||null;return P[46]!==ea?(x=(0,r.jsx)(r6,{documentPanelPortalElement:ea,setFooterElement:ei,setActionsBoxElement:es}),P[46]=ea,P[47]=x):x=P[47],P[48]!==L||P[49]!==ee||P[50]!==eD||P[51]!==eF||P[52]!==x?(b=(0,r.jsx)(ot,{footerHeight:eD,headerHeight:eF,isInspectOpen:L,rootElement:ee,setDocumentPanelPortalElement:ed,footer:x}),P[48]=L,P[49]=ee,P[50]=eD,P[51]=eF,P[52]=x,P[53]=b):b=P[53],P[54]!==eR||P[55]!==H||P[56]!==ek||P[57]!==b?(y=(0,r.jsx)(r9,{"data-testid":"change-connector-root",isReviewChangesOpen:ek,onOpenReviewChanges:H,onSetFocus:eR,children:b}),P[54]=eR,P[55]=H,P[56]=ek,P[57]=b,P[58]=y):y=P[58],P[59]!==eP||P[60]!==y?(v=(0,r.jsx)(ej.Flex,{direction:"column",flex:1,height:eP,children:y}),P[59]=eP,P[60]=y,P[61]=v):v=P[61],P[62]!==v||P[63]!==Z.paneDialog?(j=(0,r.jsx)(ew.DialogProvider,{position:r7,zOffset:Z.paneDialog,children:v}),P[62]=v,P[63]=Z.paneDialog,P[64]=j):j=P[64],P[65]===Symbol.for("react.memo_cache_sentinel")?(w=(0,r.jsx)(iJ,{}),P[65]=w):w=P[65],P[66]!==er||P[67]!==eb||P[68]!==eT||P[69]!==ey||P[70]!==G||P[71]!==f||P[72]!==j?(S=(0,r.jsxs)(r2,{actionsBoxElement:er,as:n8,currentMinWidth:eb,"data-testid":"document-pane",flex:2.5,id:G,minWidth:ey,onKeyUp:eT,rootRef:et,children:[f,j,w]}),P[66]=er,P[67]=eb,P[68]=eT,P[69]=ey,P[70]=G,P[71]=f,P[72]=j,P[73]=S):S=P[73],P[74]!==ep||P[75]!==S?(_=(0,r.jsx)(iz,{children:(0,r.jsx)(d.FieldActionsProvider,{actions:ep,path:r8,children:S})}),P[74]=ep,P[75]=S,P[76]=_):_=P[76],P[77]!==g||P[78]!==_||P[79]!==h||P[80]!==q?(I=(0,r.jsxs)(d.GetFormValueProvider,{value:q,children:[h,g,_]}),P[77]=g,P[78]=_,P[79]=h,P[80]=q,P[81]=I):I=P[81],I}let st=(e,t)=>{let n,i,l,o,r=(0,s.c)(11),c=(0,d.useHistoryStore)(),[u,p]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1);r[0]!==e||r[1]!==t?(n={documentId:e,documentType:t},r[0]=e,r[1]=t,r[2]=n):n=r[2];let g=(0,d.useTimelineStore)(n),f=(0,d.useTimelineSelector)(g,sn);return r[3]!==e||r[4]!==c||r[5]!==f?(i=()=>{f&&e?(h(!0),c.getDocumentAtRevision(e,f).then(e=>{p(e||null),h(!1)}).catch(()=>{p(null),h(!1)})):(p(null),h(!1))},l=[e,f,c],r[3]=e,r[4]=c,r[5]=f,r[6]=i,r[7]=l):(i=r[6],l=r[7]),(0,a.useEffect)(i,l),r[8]!==u||r[9]!==m?(o={lastRevisionDocument:u,loading:m},r[8]=u,r[9]=m,r[10]=o):o=r[10],o};function sn(e){return e.lastNonDeletedRevId}let si=(0,tp.defineEvent)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),sl=(0,tp.defineEvent)({name:"InlineChangesSwitchedOn",version:1,description:"User switched on display of inline changes"}),so=(0,tp.defineEvent)({name:"InlineChangesSwitchedOff",version:1,description:"User switched off display of inline changes"});function sr(e){return e.name===iU}function ss(e){let t=(0,d.isRecord)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${t}`)}function sa(e){let t,n,i,l,o,p,m,h,g,f,x,b,y,v,j,w,S,_,I,T,R,P,E,k,D,F,A,M,V,L,z,O,B,H,$,N,G=(0,s.c)(205),{children:U,index:q,pane:W,paneKey:K,onFocusPath:Y,onSetMaximizedPane:X,maximized:J,forcedVersion:Q,historyStore:Z}=e,ee=void 0!==J&&J,{store:et,error:en,ready:ei,revisionDocument:el,onOlderRevision:eo,sinceDocument:er,isPristine:es,revisionId:ea,lastNonDeletedRevId:ed}=Z,ec=(0,d.useSchema)(),{setDocumentMeta:eu}=(0,d.useCopyPaste)(),{document:ep}=(0,d.useSource)(),{actions:em,badges:eh,unstable_fieldActions:eg,unstable_languageFilter:ef,drafts:ex}=ep,{enabled:eb}=ex,ey=(0,tu.useTelemetry)(),ev=(0,eE.useRouter)(),ej=l_(),eS=ej.setParams,{push:eC}=(0,ew.useToast)(),{options:e_,menuItemGroups:eI,title:eT,views:eR}=W,ek=void 0===eI?iG:eI,eD=void 0===eT?null:eT;G[0]!==eR?(t=void 0===eR?[]:eR,G[0]=eR,G[1]=t):t=G[1];let eF=t,eA=(0,d.useUnique)(e_),eM=eA.id;G[2]!==eM?(n=(0,c.getPublishedId)(eM),G[2]=eM,G[3]=n):n=G[3];let eV=n,eL=e_.type,ez=(0,d.useUnique)(ej.params)||i$,{buildStudioUrl:eO}=(0,d.useStudioUrl)(),eB=(0,d.usePerspective)(),{document:eH,beta:eN}=(0,d.useWorkspace)(),{drafts:eU}=eH,{enabled:eK}=eU,eY=eN?.form?.enhancedObjectDialog?.enabled;e:{let e;if(Q){i=Q;break e}G[4]!==eB.selectedPerspectiveName||G[5]!==eB.selectedReleaseId?(e={selectedPerspectiveName:eB.selectedPerspectiveName,selectedReleaseId:eB.selectedReleaseId},G[4]=eB.selectedPerspectiveName,G[5]=eB.selectedReleaseId,G[6]=e):e=G[6],i=e}let{selectedReleaseId:eX,selectedPerspectiveName:eJ}=i,eQ=nE();G[7]!==eV||G[8]!==eL||G[9]!==eA||G[10]!==ez?(l={paneOptions:eA,documentId:eV,documentType:eL,params:ez},G[7]=eV,G[8]=eL,G[9]=eA,G[10]=ez,G[11]=l):l=G[11];let eZ=(e=>{var t;let n,i,l,o,r,a,c,u,p=(0,s.c)(13),{paneOptions:m,documentType:h,documentId:g,params:f}=e,x=(0,d.useTemplates)(),b=l_(),y=(0,d.useUnique)(b.payload);p[0]!==h||p[1]!==m.template||p[2]!==m.templateParameters||p[3]!==y||p[4]!==f.template||p[5]!==x?(l=(t={documentType:h,templateName:m.template,templateParams:m.templateParameters,panePayload:y,urlTemplate:f.template}).panePayload||{},o=t.templateName,t.urlTemplate&&o&&o!==t.urlTemplate&&console.warn(`Conflicting templates: URL says "${t.urlTemplate}", structure node says "${o}". Using "${o}".`),r=o||t.urlTemplate,a=x.filter(e=>e.schemaType===t.documentType),c={...t.templateParams,..."object"==typeof l&&l||{}},u=r,r||1!==a.length||(u=a[0].id),n={templateName:u,templateParams:c},p[0]=h,p[1]=m.template,p[2]=m.templateParameters,p[3]=y,p[4]=f.template,p[5]=x,p[6]=n):n=p[6];let{templateName:v,templateParams:j}=n;p[7]!==g||p[8]!==h||p[9]!==f.version||p[10]!==v||p[11]!==j?(i={documentId:g,documentType:h,templateName:v,templateParams:j,version:f.version},p[7]=g,p[8]=h,p[9]=f.version,p[10]=v,p[11]=j,p[12]=i):i=p[12];let w=(0,d.useInitialValue)(i);return(0,d.useUnique)(w)})(l),e0=eZ.loading;G[12]!==eV||G[13]!==eL||G[14]!==ez||G[15]!==eS?(o={documentId:eV,documentType:eL,params:ez,setParams:eS},G[12]=eV,G[13]=eL,G[14]=ez,G[15]=eS,G[16]=o):o=G[16];let{changesOpen:e1,currentInspector:e2,inspectors:e4,closeInspector:e5,openInspector:e6,handleHistoryClose:e9,handleHistoryOpen:te,handleInspectorAction:tt,inspectOpen:tn,handleLegacyInspectClose:ti}=function(e){let t,n,i,l,o,r,c,u,p,m,h,g,f,x,b=(0,s.c)(54),{documentId:y,documentType:v,params:j,setParams:w}=e,{features:S}=iH(),C=(0,d.useSource)().document.inspectors;b[0]!==y||b[1]!==v||b[2]!==C?(t=C({documentId:y,documentType:v}),b[0]=y,b[1]=v,b[2]=C,b[3]=t):t=b[3];let _=t;b[4]!==j.inspect?(n=()=>j.inspect||null,b[4]=j.inspect,b[5]=n):n=b[5];let[I,T]=(0,a.useState)(n),R=(0,a.useRef)(j.inspect);b[6]!==j.inspect?(i=()=>{R.current!==j.inspect&&(R.current=j.inspect,T(j.inspect||null))},l=[j.inspect],b[6]=j.inspect,b[7]=i,b[8]=l):(i=b[7],l=b[8]),(0,a.useEffect)(i,l),b[9]!==I||b[10]!==_?(o=_?.find(e=>e.name===I),b[9]=I,b[10]=_,b[11]=o):o=b[11];let P=o;b[12]!==_?(r=_.find(sr),b[12]=_,b[13]=r):r=b[13];let E=r,k=P?.name===iU;b[14]!==P||b[15]!==_||b[16]!==j||b[17]!==w?(c=e=>{let t=e&&_.find(t=>t.name===e);if(e&&!t)return void console.warn(`No inspector named "${e}"`);if(P){if(t){let e=t.onClose?.({params:j})??{params:j};T(null),R.current=void 0,w({...e.params,inspect:void 0});return}if(P){let e=P.onClose?.({params:j})??{params:j};T(null),R.current=void 0,w({...e.params,inspect:void 0})}}},b[14]=P,b[15]=_,b[16]=j,b[17]=w,b[18]=c):c=b[18];let D=c;b[19]!==P||b[20]!==_||b[21]!==j||b[22]!==w?(u=(e,t)=>{let n=_.find(t=>t.name===e);if(!n)return void console.warn(`No inspector named "${e}"`);if(P?.name===n.name)return void w({...j,...t,inspect:n.name});let i=j;P&&(i=(n.onClose?.({params:i})??{params:i}).params);let l=n.onOpen?.({params:i})??{params:i};T(n.name),R.current=n.name,w({...l.params,...t,inspect:n.name})},b[19]=P,b[20]=_,b[21]=j,b[22]=w,b[23]=u):u=b[23];let F=u;b[24]!==D||b[25]!==E?(p=()=>{E&&D(E.name)},b[24]=D,b[25]=E,b[26]=p):p=b[26];let A=p;b[27]!==S.reviewChanges||b[28]!==E||b[29]!==F?(m=()=>{S.reviewChanges&&E&&F(E.name,{changesInspectorTab:"review"})},b[27]=S.reviewChanges,b[28]=E,b[29]=F,b[30]=m):m=b[30];let M=m,V="on"===j.inspect;b[31]!==V||b[32]!==j||b[33]!==w?(h=e=>{w((void 0===e?!V:e)?{...j,inspect:"on"}:{...j,inspect:void 0})},b[31]=V,b[32]=j,b[33]=w,b[34]=h):h=b[34];let L=h;b[35]!==L?(g=()=>L(!1),b[35]=L,b[36]=g):g=b[36];let z=g;b[37]!==D||b[38]!==I||b[39]!==_||b[40]!==F||b[41]!==L?(f=e=>{if("inspect"===e.action)return L(!0),!0;if("string"!=typeof e.action)return!1;let t=e.action.slice(iN.length),n=_.find(e=>e.name===t);return!!n&&(n.name===I?D(n.name):F(n.name),!0)},b[37]=D,b[38]=I,b[39]=_,b[40]=F,b[41]=L,b[42]=f):f=b[42];let O=f;return b[43]!==k||b[44]!==D||b[45]!==P||b[46]!==A||b[47]!==M||b[48]!==O||b[49]!==z||b[50]!==V||b[51]!==_||b[52]!==F?(x={changesOpen:k,currentInspector:P,inspectors:_,closeInspector:D,openInspector:F,handleHistoryClose:A,handleHistoryOpen:M,handleInspectorAction:O,handleLegacyInspectClose:z,inspectOpen:V},b[43]=k,b[44]=D,b[45]=P,b[46]=A,b[47]=M,b[48]=O,b[49]=z,b[50]=V,b[51]=_,b[52]=F,b[53]=x):x=b[53],x}(o),[tl,to]=(0,a.useState)(!1),{lastRevisionDocument:tr}=st(eV,eL);G[17]!==es||G[18]!==ei?(p=e=>!!ei&&!e?.draft&&!e?.published&&!e?.version&&!es,G[17]=es,G[18]=ei,G[19]=p):p=G[19];let ts=p;G[20]!==e1||G[21]!==er?(m=e=>{let t=(0,d.selectUpstreamVersion)(e);return e1?er||t:t||null},G[20]=e1,G[21]=er,G[22]=m):m=G[22];let ta=m;G[23]!==eL||G[24]!==ec?(h=ec.get(eL),G[23]=eL,G[24]=ec,G[25]=h):h=G[25];let tc=h;G[26]!==ts||G[27]!==tl||G[28]!==eK||G[29]!==ez.rev||G[30]!==eB.selectedPerspective||G[31]!==tc?(g=e=>{let t=ts(e);return!!ez.rev||tl||t||!(0,d.isPerspectiveWriteable)({selectedPerspective:eB.selectedPerspective,isDraftModelEnabled:eK,schemaType:tc}).result},G[26]=ts,G[27]=tl,G[28]=eK,G[29]=ez.rev,G[30]=eB.selectedPerspective,G[31]=tc,G[32]=g):g=G[32];let tp=g;G[33]!==ed||G[34]!==tr||G[35]!==eo||G[36]!==el?(f=e=>eo?el||{_id:e._id,_type:e._type}:!e._createdAt&&!e._updatedAt&&ed&&tr?tr:e,G[33]=ed,G[34]=tr,G[35]=eo,G[36]=el,G[37]=f):f=G[37];let tm=f;G[38]!==ez.path?(x=ez.path?(0,td.fromString)(ez.path):d.EMPTY_ARRAY,G[38]=ez.path,G[39]=x):x=G[39];let th="true"===ev.stickyParams.displayInlineChanges;G[40]!==e1||G[41]!==eV||G[42]!==eL||G[43]!==ta||G[44]!==tm||G[45]!==tp||G[46]!==eZ||G[47]!==Y||G[48]!==eJ||G[49]!==eX||G[50]!==x||G[51]!==th?(b={changesOpen:e1,documentType:eL,documentId:eV,initialValue:eZ,comparisonValue:ta,releaseId:eX,selectedPerspectiveName:eJ,initialFocusPath:x,readOnly:tp,onFocusPath:Y,getFormDocumentValue:tm,displayInlineChanges:th},G[40]=e1,G[41]=eV,G[42]=eL,G[43]=ta,G[44]=tm,G[45]=tp,G[46]=eZ,G[47]=Y,G[48]=eJ,G[49]=eX,G[50]=x,G[51]=th,G[52]=b):b=G[52];let{editState:tg,upstreamEditState:tf,hasUpstreamVersion:tx,connectionState:tb,focusPath:ty,onChange:tv,validation:tj,ready:tw,value:tS,formState:tC,permissions:t_,onPathOpen:tI,isPermissionsLoading:tT,formStateRef:tR,onProgrammaticFocus:tP,collapsedFieldSets:tE,collapsedPaths:tk,onBlur:tD,onFocus:tF,onSetActiveFieldGroup:tA,onSetCollapsedPath:tM,onSetCollapsedFieldSet:tV,openPath:tL}=(0,d.useDocumentForm)(b),{data:tz}=(0,d.useActiveReleases)();G[53]!==tz?(y=void 0===tz?[]:tz,G[53]=tz,G[54]=y):y=G[54];let tO=y;G[55]!==eb||G[56]!==ez||G[57]!==tO||G[58]!==eJ||G[59]!==eX||G[60]!==tS?(v=function(e,t,n,i,l,o){let r;switch(!0){case!!e?.rev:r="revision";break;case t&&(0,c.isVersionId)(n._id):{let e=o.find(e=>(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===t);r=e&&(0,d.isCardinalityOneRelease)(e)?"scheduled-draft":"version";break}case"published"===i:r="published";break;case l:r="draft";break;default:r="published"}return r}(ez,eX,tS,eJ,eb,tO),G[55]=eb,G[56]=ez,G[57]=tO,G[58]=eJ,G[59]=eX,G[60]=tS,G[61]=v):v=G[61];let tB=v;G[62]!==tB||G[63]!==eV||G[64]!==eL||G[65]!==eX?(j={schemaType:eL,documentId:eV,versionType:tB,releaseId:eX},G[62]=tB,G[63]=eV,G[64]=eL,G[65]=eX,G[66]=j):j=G[66];let tH=j;G[67]!==em||G[68]!==tH?(w=em(tH),G[67]=em,G[68]=tH,G[69]=w):w=G[69];let t$=w;G[70]!==eY||G[71]!==tI||G[72]!==ez||G[73]!==eS?(S=e=>{if(tI(e),eY){let t=(0,d.pathToString)(e);ez.path!==t&&eS({...ez,path:t})}},G[70]=eY,G[71]=tI,G[72]=ez,G[73]=eS,G[74]=S):S=G[74];let tN=S;G[75]!==eh||G[76]!==eV||G[77]!==eL?(_=eh({schemaType:eL,documentId:eV}),G[75]=eh,G[76]=eV,G[77]=eL,G[78]=_):_=G[78];let tG=_;G[79]!==eV||G[80]!==eL||G[81]!==ef?(I=ef({schemaType:eL,documentId:eV}),G[79]=eV,G[80]=eL,G[81]=ef,G[82]=I):I=G[82];let tU=I,tq=(0,d.useUnique)(eF),tW=ez.view||tq[0]&&tq[0].id||null,tK=function(e){let t,n,i,l,o=(0,s.c)(6),{resolveProductionUrl:r}=(0,d.useSource)().document;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=new e8.BehaviorSubject(void 0),o[0]=t):t=o[0];let c=t;return o[1]!==e?(n=()=>{c.next(e)},i=[c,e],o[1]=e,o[2]=n,o[3]=i):(n=o[2],i=o[3]),(0,a.useEffect)(n,i),o[4]!==r?(l=c.asObservable().pipe((0,eq.distinctUntilChanged)(),(0,eG.debounceTime)(500),(0,eW.switchMap)(e=>(0,d.isRecord)(e)&&"string"==typeof e._id&&"string"==typeof e._type?(0,e7.from)(r({document:e})):(0,e3.of)(void 0)),(0,eq.distinctUntilChanged)(),(0,e$.catchError)(ss)),o[4]=r,o[5]=l):l=o[5],(0,eP.useObservable)(l)}(tS),{t:tY}=(0,d.useTranslation)(C);G[83]!==eV||G[84]!==eL||G[85]!==eg||G[86]!==tc?(T=tc?eg({documentId:eV,documentType:eL,schemaType:tc}):[],G[83]=eV,G[84]=eL,G[85]=eg,G[86]=tc,G[87]=T):T=G[87];let tX=T,tJ=tw&&(!ez.rev||ei||!!en);G[88]!==tm||G[89]!==tS?(R=tm(tS),G[88]=tm,G[89]=tS,G[90]=R):R=G[90];let tQ=R;G[91]!==tQ||G[92]!==eV||G[93]!==tg?(P={strict:!0,displayed:tQ,documentId:eV,editState:tg},G[91]=tQ,G[92]=eV,G[93]=tg,G[94]=P):P=G[94];let{previousId:tZ}=(0,d.useDocumentIdStack)(P);G[95]!==ez||G[96]!==eS?(E=(e,t)=>{eS({...ez,since:e,rev:t||void 0})},G[95]=ez,G[96]=eS,G[97]=E):E=G[97];let t0=E;G[98]!==ej?(k=()=>ej.closeCurrent(),G[98]=ej,G[99]=k):k=G[99];let t1=k;G[100]!==ej?(D=()=>ej.duplicateCurrent(),G[100]=ej,G[101]=D):D=G[101];let t2=D;G[102]!==ev||G[103]!==ey?(F=()=>{let e="true"!==ev.stickyParams.displayInlineChanges;ey.log(e?sl:so),ev.navigate({stickyParams:{displayInlineChanges:String(e)}})},G[102]=ev,G[103]=ey,G[104]=F):F=G[104];let t3=F;G[105]!==eO||G[106]!==eQ||G[107]!==eV||G[108]!==eL||G[109]!==te||G[110]!==tt||G[111]!==tK||G[112]!==tZ||G[113]!==eC||G[114]!==tY||G[115]!==ey||G[116]!==t3||G[117]!==tS._id?(A=async e=>{if("production-preview"===e.action&&tK)return window.open(tK),!0;if("copy-document-url"===e.action&&navigator){ey.log(si);let e=eO({coreUi:e=>`${e}/intent/edit/id=${eV};type=${eL}`});return await navigator.clipboard.writeText(e),eC({id:"copy-document-url",status:"info",title:tY("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===e.action?(te(),!0):(("inspect"===e.action||"string"==typeof e.action&&e.action.startsWith(iN))&&tt(e),"compareVersions"===e.action&&"u">typeof tZ?(eQ.navigateDiffView({mode:"version",previousDocument:{type:eL,id:tZ},nextDocument:{type:eL,id:tS._id}}),!0):"toggleInlineChanges"===e.action&&(t3(),!0))},G[105]=eO,G[106]=eQ,G[107]=eV,G[108]=eL,G[109]=te,G[110]=tt,G[111]=tK,G[112]=tZ,G[113]=eC,G[114]=tY,G[115]=ey,G[116]=t3,G[117]=tS._id,G[118]=A):A=G[118];let t4=A;G[119]!==eV||G[120]!==eL||G[121]!==tv||G[122]!==tc||G[123]!==eu?(M=()=>{eu({documentId:eV,documentType:eL,schemaType:tc,onChange:tv})},V=[eV,eL,tc,tv,eu],G[119]=eV,G[120]=eL,G[121]=tv,G[122]=tc,G[123]=eu,G[124]=M,G[125]=V):(M=G[124],V=G[125]),(0,a.useEffect)(M,V),G[126]!==ta||G[127]!==tf?(L=ta(tf),G[126]=ta,G[127]=tf,G[128]=L):L=G[128];let t5=L,t6=ts(tg),t8=eo&&!el&&tJ;t:{if(tg.version&&(0,d.isGoingToUnpublish)(tg.version)){z=tg.published;break t}z=tQ}let t7=z,t9=e2||null;G[129]!==ek?(O=ek||[],G[129]=ek,G[130]=O):O=G[130],G[131]!==t$||G[132]!==tW||G[133]!==tG||G[134]!==e1||G[135]!==e5||G[136]!==tE||G[137]!==tk||G[138]!==t5||G[139]!==tb||G[140]!==t7||G[141]!==eV||G[142]!==eM||G[143]!==eL||G[144]!==tg||G[145]!==tX||G[146]!==ty||G[147]!==tC||G[148]!==e9||G[149]!==te||G[150]!==ti||G[151]!==t4||G[152]!==t1||G[153]!==t2||G[154]!==tN||G[155]!==tx||G[156]!==q||G[157]!==tn||G[158]!==e4||G[159]!==t6||G[160]!==tl||G[161]!==e0||G[162]!==tT||G[163]!==tU||G[164]!==ed||G[165]!==tr||G[166]!==ee||G[167]!==tD||G[168]!==tv||G[169]!==tF||G[170]!==tA||G[171]!==tV||G[172]!==tM||G[173]!==X||G[174]!==e6||G[175]!==tL||G[176]!==K||G[177]!==t_||G[178]!==tK||G[179]!==tJ||G[180]!==ea||G[181]!==t8||G[182]!==tc||G[183]!==eX||G[184]!==t0||G[185]!==t9||G[186]!==O||G[187]!==en||G[188]!==et||G[189]!==eD||G[190]!==tj||G[191]!==tS||G[192]!==tq?(B={actions:t$,activeViewId:tW,badges:tG,changesOpen:e1,closeInspector:e5,collapsedFieldSets:tE,collapsedPaths:tk,compareValue:t5,connectionState:tb,displayed:t7,documentId:eV,documentIdRaw:eM,documentType:eL,editState:tg,fieldActions:tX,focusPath:ty,inspector:t9,inspectors:e4,onBlur:tD,onChange:tv,onFocus:tF,onPathOpen:tN,onHistoryClose:e9,onHistoryOpen:te,onInspectClose:ti,onMenuAction:t4,onPaneClose:t1,onPaneSplit:t2,onSetActiveFieldGroup:tA,onSetCollapsedPath:tM,onSetCollapsedFieldSet:tV,onSetMaximizedPane:X,maximized:ee,openInspector:e6,openPath:tL,index:q,inspectOpen:tn,validation:tj,menuItemGroups:O,paneKey:K,previewUrl:tK,ready:tJ,schemaType:tc,hasUpstreamVersion:tx,isPermissionsLoading:tT,isInitialValueLoading:e0,permissions:t_,setTimelineRange:t0,setIsDeleting:to,isDeleting:tl,isDeleted:t6,timelineError:en,timelineStore:et,title:eD,value:tS,selectedReleaseId:eX,views:tq,formState:tC,unstable_languageFilter:tU,revisionId:ea,revisionNotFound:t8,lastNonDeletedRevId:ed,lastRevisionDocument:tr},G[131]=t$,G[132]=tW,G[133]=tG,G[134]=e1,G[135]=e5,G[136]=tE,G[137]=tk,G[138]=t5,G[139]=tb,G[140]=t7,G[141]=eV,G[142]=eM,G[143]=eL,G[144]=tg,G[145]=tX,G[146]=ty,G[147]=tC,G[148]=e9,G[149]=te,G[150]=ti,G[151]=t4,G[152]=t1,G[153]=t2,G[154]=tN,G[155]=tx,G[156]=q,G[157]=tn,G[158]=e4,G[159]=t6,G[160]=tl,G[161]=e0,G[162]=tT,G[163]=tU,G[164]=ed,G[165]=tr,G[166]=ee,G[167]=tD,G[168]=tv,G[169]=tF,G[170]=tA,G[171]=tV,G[172]=tM,G[173]=X,G[174]=e6,G[175]=tL,G[176]=K,G[177]=t_,G[178]=tK,G[179]=tJ,G[180]=ea,G[181]=t8,G[182]=tc,G[183]=eX,G[184]=t0,G[185]=t9,G[186]=O,G[187]=en,G[188]=et,G[189]=eD,G[190]=tj,G[191]=tS,G[192]=tq,G[193]=B):B=G[193];let ne=B,nt=(0,a.useRef)(void 0);return G[194]!==eY||G[195]!==tR||G[196]!==tP||G[197]!==ej||G[198]!==ez||G[199]!==tJ?(H=()=>{if(tJ&&ez.path){let{path:e,...t}=ez;e!==nt.current&&tP((0,td.resolveKeyedPath)(tR.current?.value,(0,td.fromString)(e))),eY||ej.setParams(t)}nt.current=ez.path},$=[tR,tP,ej,ez,tJ,eY],G[194]=eY,G[195]=tR,G[196]=tP,G[197]=ej,G[198]=ez,G[199]=tJ,G[200]=H,G[201]=$):(H=G[200],$=G[201]),(0,a.useEffect)(H,$),G[202]!==U||G[203]!==ne?(N=(0,r.jsx)(u.DocumentPaneContext.Provider,{value:ne,children:U}),G[202]=U,G[203]=ne,G[204]=N):N=G[204],N}let sd=e=>{let t,n,i,l,o,a,u,p=(0,s.c)(37),{params:m}=l_(),h=void 0===m?i$:m,g=sC(e.pane.options,h),f=(0,d.useSchema)(),x=g.type,b=!!f.get(g.type)?.liveEdit,{selectedPerspectiveName:y,selectedReleaseId:v,selectedPerspective:j}=(0,d.usePerspective)(),{data:w}=(0,d.useArchivedReleases)();p[0]!==g.id?(t=(0,c.getPublishedId)(g.id),p[0]=g.id,p[1]=t):t=p[1];let S=(0,d.useEditState)(t,x,"default",v),C=b&&"drafts"===j&&!S?.draft,{rev:_,since:I}=h,T=h.historyVersion;e:{if(C){let e;p[2]!==g.id?(e=(0,c.getPublishedId)(g.id),p[2]=g.id,p[3]=e):e=p[3],n=e;break e}if(T&&w.some(e=>(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===T)){let e;p[4]!==T||p[5]!==g.id?(e=(0,c.getVersionId)(g.id,T),p[4]=T,p[5]=g.id,p[6]=e):e=p[6],n=e;break e}if(typeof y>"u"){let e;p[7]!==g.id?(e=(0,c.getDraftId)(g.id),p[7]=g.id,p[8]=e):e=p[8],n=e;break e}if("published"===y){let e;p[9]!==g.id?(e=(0,c.getPublishedId)(g.id),p[9]=g.id,p[10]=e):e=p[10],n=e;break e}if(v){let e;p[11]!==g.id||p[12]!==y?(e=(0,c.getVersionId)(g.id,y),p[11]=g.id,p[12]=y,p[13]=e):e=p[13],n=e;break e}n=g.id}let R=n;p[14]!==R||p[15]!==g.type||p[16]!==_||p[17]!==I?(i={documentId:R,documentType:g.type,rev:_,since:I},p[14]=R,p[15]=g.type,p[16]=_,p[17]=I,p[18]=i):i=p[18];let P=(0,d.useEventsStore)(i),E=P.error,k=P.revision?.revisionId||null,D=!!(_&&!P.revision?.loading),F=P.revision?.document||null,A=P.sinceRevision?.document||null,M=!P.loading,V=0===P.events.length;p[19]!==P.events?(l=P.events.find(sc)?.id||null,p[19]=P.events,p[20]=l):l=p[20],p[21]!==P.error||p[22]!==V||p[23]!==l||p[24]!==k||p[25]!==D||p[26]!==F||p[27]!==A||p[28]!==M?(o={error:E,revisionId:k,onOlderRevision:D,revisionDocument:F,sinceDocument:A,ready:M,isPristine:V,lastNonDeletedRevId:l},p[21]=P.error,p[22]=V,p[23]=l,p[24]=k,p[25]=D,p[26]=F,p[27]=A,p[28]=M,p[29]=o):o=p[29];let L=o;return p[30]!==L||p[31]!==T||p[32]!==e?(a=T?(0,r.jsx)(d.PerspectiveProvider,{selectedPerspectiveName:T,excludedPerspectives:d.EMPTY_ARRAY,children:(0,r.jsx)(sa,{...e,historyStore:L})}):(0,r.jsx)(sa,{...e,historyStore:L}),p[30]=L,p[31]=T,p[32]=e,p[33]=a):a=p[33],p[34]!==a||p[35]!==P?(u=(0,r.jsx)(d.EventsProvider,{value:P,children:a}),p[34]=a,p[35]=P,p[36]=u):u=p[36],u};function sc(e){return!(0,d.isDeleteDocumentGroupEvent)(e)&&!(0,d.isDeleteDocumentVersionEvent)(e)}let su=e=>{let t,n,i,l,o=(0,s.c)(20),{pane:u}=e,p=l_(),m=sC(u.options,p.params),h=p.params||i$,[g,f]=(0,a.useState)(null);o[0]!==m.id?(t=(0,c.getPublishedId)(m.id),o[0]=m.id,o[1]=t):t=o[1],o[2]!==m.type||o[3]!==h.rev||o[4]!==h.since||o[5]!==t?(n={documentId:t,documentType:m.type,onError:f,rev:h.rev,since:h.since},o[2]=m.type,o[3]=h.rev,o[4]=h.since,o[5]=t,o[6]=n):n=o[6];let x=(0,d.useTimelineStore)(n),b=(0,d.useTimelineSelector)(x,sp),y=(0,d.useTimelineSelector)(x,sm),v=(0,d.useTimelineSelector)(x,sh),j=(0,d.useTimelineSelector)(x,sg),w=(0,d.useTimelineSelector)(x,sf),S=(0,d.useTimelineSelector)(x,sx),C=(0,d.useTimelineSelector)(x,sb),_=y?.id||null,I=!!S;o[7]!==C||o[8]!==b||o[9]!==x||o[10]!==_||o[11]!==j||o[12]!==v||o[13]!==I||o[14]!==g||o[15]!==w?(i={store:x,error:g,revisionId:_,onOlderRevision:b,revisionDocument:j,sinceDocument:v,ready:w,isPristine:I,lastNonDeletedRevId:C},o[7]=C,o[8]=b,o[9]=x,o[10]=_,o[11]=j,o[12]=v,o[13]=I,o[14]=g,o[15]=w,o[16]=i):i=o[16];let T=i;return o[17]!==T||o[18]!==e?(l=(0,r.jsx)(sa,{...e,historyStore:T}),o[17]=T,o[18]=e,o[19]=l):l=o[19],l};function sp(e){return e.onOlderRevision}function sm(e){return e.revTime}function sh(e){return e.sinceAttributes}function sg(e){return e.timelineDisplayed}function sf(e){return e.timelineReady}function sx(e){return e.isPristine}function sb(e){return e.lastNonDeletedRevId}function sy(e){let t=(0,s.c)(4),{children:n}=e,i=l_(),{excludedPerspectives:l}=(0,d.usePerspective)(),{scheduledDraft:o}=i.params;if(o){let e;return t[0]!==n||t[1]!==l||t[2]!==o?(e=(0,r.jsx)(d.PerspectiveProvider,{selectedPerspectiveName:o,excludedPerspectives:l,children:n}),t[0]=n,t[1]=l,t[2]=o,t[3]=e):e=t[3],e}return n}let sv=(0,a.memo)(e=>{let t,n,i,l=(0,s.c)(9),o=(0,d.useSource)(),{setParams:a,params:c}=l_();l[0]!==c||l[1]!==a?(t=e=>{a({...c,scheduledDraft:e},{perspective:""})},l[0]=c,l[1]=a,l[2]=t):t=l[2];let u=t;return l[3]!==e||l[4]!==o.beta?.eventsAPI?.documents?(n=o.beta?.eventsAPI?.documents?(0,r.jsx)(sd,{...e}):(0,r.jsx)(su,{...e}),l[3]=e,l[4]=o.beta?.eventsAPI?.documents,l[5]=n):n=l[5],l[6]!==u||l[7]!==n?(i=(0,r.jsx)(sy,{children:(0,r.jsx)(d.SingleDocReleaseProvider,{onSetScheduledDraftPerspective:u,children:n})}),l[6]=u,l[7]=n,l[8]=i):i=l[8],i});sv.displayName="Memo(DocumentPaneProviderWrapper)";let sj=(0,a.memo)(function(e){let t,n,i=(0,s.c)(5),{name:l}=(0,d.useSource)(),o=e.pane.source||l;return i[0]!==e?(t=(0,r.jsx)(d.CopyPasteProvider,{children:(0,r.jsx)(sw,{...e})}),i[0]=e,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,r.jsx)(d.SourceProvider,{name:o,children:t}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n});function sw(e){var t,n,i;let l,o,c,u,p,m,h,g,f,x,b,y,v=(0,s.c)(57),{pane:j,paneKey:w}=e,{resolveNewDocumentOptions:S}=(0,d.useSource)().document,{selectedPerspectiveName:_}=(0,d.usePerspective)(),I=l_(),T=sC(j.options,I.params),{documentType:R,isLoaded:P}=(0,d.useDocumentType)(T.id,T.type);!function(){let e,t,n,i,l,o=(0,s.c)(10),{params:r,setParams:c}=l_(),u=void 0===r?i$:r,{selectedPerspectiveName:p}=(0,d.usePerspective)(),m=(0,a.useRef)(!1);o[0]!==u||o[1]!==c?(e=e=>{["since","historyVersion","rev","preserveRev"].some(e=>u[e])&&c({...u,rev:"true"===u.preserveRev?u.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},o[0]=u,o[1]=c,o[2]=e):e=o[2];let h=(0,a.useEffectEvent)(e);o[3]!==p||o[4]!==h?(t=()=>{m.current&&h(p)},o[3]=p,o[4]=h,o[5]=t):t=o[5],o[6]!==p?(n=[p],o[6]=p,o[7]=n):n=o[7],(0,a.useEffect)(t,n),o[8]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(m.current=!0,()=>{m.current=!1}),l=[],o[8]=i,o[9]=l):(i=o[8],l=o[9]),(0,a.useEffect)(i,l)}();let E=((y=(0,s.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(b={pick:nG,defaultComponent:se},y[0]=b):b=y[0],(0,d.useMiddlewareComponents)(b));v[0]!==T.id||v[1]!==T.type||v[2]!==S?(l=S({type:"document",documentId:T.id,schemaType:T.type}),v[0]=T.id,v[1]=T.type,v[2]=S,v[3]=l):l=v[3];let k=l;v[4]!==k?(o={templateItems:k},v[4]=k,v[5]=o):o=v[5];let[D,F]=(0,d.useTemplatePermissions)(o),A=P&&!F;v[6]!==R||v[7]!==A||v[8]!==T||v[9]!==e?(c=A&&R&&T.type!==R?(t=e,n=T,i=R,{...t,pane:{...t.pane,options:{...n,type:i}}}):e,v[6]=R,v[7]=A,v[8]=T,v[9]=e,v[10]=c):c=v[10];let M=c,{ReferenceChildLink:V,handleEditReference:L,groupIndex:z,routerPanesState:O}=I;v[11]!==z||v[12]!==O?(u=O[z+1]?.[0].params||{},v[11]=z,v[12]=O,v[13]=u):u=v[13];let B=u,H=O.length,{parentRefPath:$}=B;v[14]!==z||v[15]!==$||v[16]!==H?(p=$?{path:(0,td.fromString)($),state:z>=H-1?"none":z>=H-2?"selected":"pressed"}:{path:[],state:"none"},v[14]=z,v[15]=$,v[16]=H,v[17]=p):p=v[17];let N=p,{t:G}=(0,d.useTranslation)(C);if("*"===T.type&&!A){let e,t;return v[18]!==G?(e=G("panes.document-pane.document-not-found.loading"),v[18]=G,v[19]=e):e=v[19],v[20]!==w||v[21]!==e?(t=(0,r.jsx)(iA,{flex:2.5,minWidth:320,paneKey:w,title:e}),v[20]=w,v[21]=e,v[22]=t):t=v[22],t}if(!R){let e,t,n,i,l;return v[23]!==G?(e=G("panes.document-pane.document-not-found.title"),v[23]=G,v[24]=e):e=v[24],v[25]!==T.id?(t={id:T.id},v[25]=T.id,v[26]=t):t=v[26],v[27]===Symbol.for("react.memo_cache_sentinel")?(n={Code:sS},v[27]=n):n=v[27],v[28]!==G||v[29]!==t?(i=(0,r.jsx)(ej.Stack,{space:4,children:(0,r.jsx)(ej.Text,{as:"p",children:(0,r.jsx)(d.Translate,{t:G,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:n})})}),v[28]=G,v[29]=t,v[30]=i):i=v[30],v[31]!==w||v[32]!==e||v[33]!==i?(l=(0,r.jsx)(iE,{flex:2.5,minWidth:320,paneKey:w,title:e,children:i}),v[31]=w,v[32]=e,v[33]=i,v[34]=l):l=v[34],l}let U=`${R}-${T.id}-${_||""}`;return v[35]!==E||v[36]!==T.id||v[37]!==T.type?(m=(0,r.jsx)(E,{documentId:T.id,documentType:T.type}),v[35]=E,v[36]=T.id,v[37]=T.type,v[38]=m):m=v[38],v[39]!==T.id||v[40]!==T.type||v[41]!==m?(h=(0,r.jsx)(iV,{documentId:T.id,documentType:T.type,children:m}),v[39]=T.id,v[40]=T.type,v[41]=m,v[42]=h):h=v[42],v[43]!==T.id||v[44]!==T.type||v[45]!==h?(g=(0,r.jsx)(n2,{documentId:T.id,documentType:T.type,children:h}),v[43]=T.id,v[44]=T.type,v[45]=h,v[46]=g):g=v[46],v[47]!==V||v[48]!==N||v[49]!==L||v[50]!==g||v[51]!==D?(f=(0,r.jsx)(d.ReferenceInputOptionsProvider,{EditReferenceLinkComponent:V,onEditReference:L,initialValueTemplateItems:D,activePath:N,children:g}),v[47]=V,v[48]=N,v[49]=L,v[50]=g,v[51]=D,v[52]=f):f=v[52],v[53]!==M||v[54]!==U||v[55]!==f?(x=(0,r.jsx)(sv,{...M,children:f},U),v[53]=M,v[54]=U,v[55]=f,v[56]=x):x=v[56],x}function sS(e){let{children:t}=e;return(0,r.jsx)("code",{children:t})}function sC(e,t){let n,i,l=(0,s.c)(8);l[0]!==t?(n=void 0===t?{}:t,l[0]=t,l[1]=n):n=l[1];let o=n,r=(0,d.useTemplates)();e:{let t,n;if(e.type&&"*"!==e.type){i=e;break e}let s=e.template||o.template;l[2]!==s||l[3]!==r?(t=s?r.find(e=>e.id===s):void 0,l[2]=s,l[3]=r,l[4]=t):t=l[4];let a=t?.schemaType;if(!a){i=e;break e}l[5]!==a||l[6]!==e?(n={...e,type:a},l[5]=a,l[6]=e,l[7]=n):n=l[7],i=n}return i}let s_=(0,a.forwardRef)(function(e,t){let n,i,l,o=(0,s.c)(9),{routerPanesState:d,groupIndex:c}=(0,a.useContext)(u.PaneRouterContext);o[0]!==c||o[1]!==d?(n=d.slice(0,c),o[0]=c,o[1]=d,o[2]=n):n=o[2];let p=n;o[3]!==p?(i={panes:p},o[3]=p,o[4]=i):i=o[4];let m=i;return o[5]!==e||o[6]!==t||o[7]!==m?(l=(0,r.jsx)(eE.StateLink,{...e,ref:t,state:m}),o[5]=e,o[6]=t,o[7]=m,o[8]=l):l=o[8],l}),sI=(0,a.forwardRef)(function(e,t){let n,i,l,o,d,c,p=(0,s.c)(19);p[0]!==e?({childId:n,childPayload:l,childParameters:i,...o}=e,p[0]=e,p[1]=n,p[2]=i,p[3]=l,p[4]=o):(n=p[1],i=p[2],l=p[3],o=p[4]);let{routerPanesState:m,groupIndex:h}=(0,a.useContext)(u.PaneRouterContext);if(p[5]!==n||p[6]!==i||p[7]!==l||p[8]!==h||p[9]!==m){let e;p[11]!==n||p[12]!==i||p[13]!==l?(e=[{id:n,params:i,payload:l}],p[11]=n,p[12]=i,p[13]=l,p[14]=e):e=p[14],d={panes:[...m.slice(0,h+1),e]},p[5]=n,p[6]=i,p[7]=l,p[8]=h,p[9]=m,p[10]=d}else d=p[10];return p[15]!==t||p[16]!==o||p[17]!==d?(c=(0,r.jsx)(eE.StateLink,{...o,ref:t,state:d}),p[15]=t,p[16]=o,p[17]=d,p[18]=c):c=p[18],c}),sT=(0,a.forwardRef)(function(e,t){let n,i,l,o,c,p,m,h=(0,s.c)(20),{routerPanesState:g,groupIndex:f,siblingIndex:x}=(0,a.useContext)(u.PaneRouterContext);h[0]!==e?({params:n,payload:i,...l}=e,h[0]=e,h[1]=n,h[2]=i,h[3]=l):(n=h[1],i=h[2],l=h[3]);let b=(0,d.useUnique)(n),y=(0,d.useUnique)(i),v=g[f],j=v[x],w=b??j.params,S=y??j.payload;h[4]!==j||h[5]!==w||h[6]!==S?(o={...j,params:w,payload:S},h[4]=j,h[5]=w,h[6]=S,h[7]=o):o=h[7];let C=o;h[8]!==v||h[9]!==C||h[10]!==x?(c=[...v.slice(0,x),C,...v.slice(x+1)],h[8]=v,h[9]=C,h[10]=x,h[11]=c):c=h[11];let _=c;h[12]!==g||h[13]!==f||h[14]!==_?(p={panes:[...g.slice(0,f),_,...g.slice(f+1)]},h[12]=g,h[13]=f,h[14]=_,h[15]=p):p=h[15];let I=p;return h[16]!==I||h[17]!==t||h[18]!==l?(m=(0,r.jsx)(eE.StateLink,{ref:t,...l,state:I}),h[16]=I,h[17]=t,h[18]=l,h[19]=m):m=h[19],m}),sR=(0,a.forwardRef)(function(e,t){let n,i,l,o,a,d,u,p,m,h,g,f=(0,s.c)(24);f[0]!==e?({documentId:i,documentType:l,parentRefPath:o,children:n,template:d,...a}=e,f[0]=e,f[1]=n,f[2]=i,f[3]=l,f[4]=o,f[5]=a,f[6]=d):(n=f[1],i=f[2],l=f[3],o=f[4],a=f[5],d=f[6]),f[7]!==i?(u=(0,c.getPublishedId)(i),f[7]=i,f[8]=u):u=f[8];let x=d?.params;return f[9]!==o?(p=(0,td.toString)(o),f[9]=o,f[10]=p):p=f[10],f[11]!==d?(m=d&&{template:d?.id},f[11]=d,f[12]=m):m=f[12],f[13]!==l||f[14]!==p||f[15]!==m?(h={type:l,parentRefPath:p,...m},f[13]=l,f[14]=p,f[15]=m,f[16]=h):h=f[16],f[17]!==n||f[18]!==t||f[19]!==a||f[20]!==u||f[21]!==x||f[22]!==h?(g=(0,r.jsx)(sI,{...a,ref:t,childId:u,childPayload:x,childParameters:h,children:n}),f[17]=n,f[18]=t,f[19]=a,f[20]=u,f[21]=x,f[22]=h,f[23]=g):g=f[23],g}),sP=[];function sE(e){let t,n,i,l,o,a,d,c,p,m,h,g,f,x=(0,s.c)(60),{children:b,flatIndex:y,index:v,params:j,payload:w,siblingIndex:S}=e,{navigate:C,navigateIntent:_,resolvePathFromState:I}=(0,eE.useRouter)(),T=(0,eE.useRouterState)(),{panes:R,expand:P}=n3(),E=T?.panes||sP,k=R?.[R.length-2],D=v-1;x[0]!==D||x[1]!==E||x[2]!==T||x[3]!==S?(t=e=>{let t=E[D]||[],n=t[S],i=e(t,n),l=[...E.slice(0,D),i,...E.slice(D+1)];return{...T,panes:l}},x[0]=D,x[1]=E,x[2]=T,x[3]=S,x[4]=t):t=x[4];let F=t;x[5]!==F||x[6]!==C?(n=(e,t)=>{let n=F(e);return setTimeout(()=>C(n,t?{stickyParams:t}:void 0),0),n},x[5]=F,x[6]=C,x[7]=n):n=x[7];let A=n;x[8]!==F||x[9]!==I||x[10]!==S?(i=e=>I(F((t,n)=>[...t.slice(0,S),{...n,params:e},...t.slice(S+1)])),x[8]=F,x[9]=I,x[10]=S,x[11]=i):i=x[11];let M=i;x[12]!==A||x[13]!==S?(l=e=>{A((t,n)=>[...t.slice(0,S),{...n,payload:e},...t.slice(S+1)])},x[12]=A,x[13]=S,x[14]=l):l=x[14];let V=l;x[15]!==A||x[16]!==S?(o=(e,t)=>{A((t,n)=>[...t.slice(0,S),{...n,params:e},...t.slice(S+1)],t)},x[15]=A,x[16]=S,x[17]=o):o=x[17];let L=o;x[18]!==D||x[19]!==C||x[20]!==E?(a=e=>{let{id:t,parentRefPath:n,type:i,template:l,version:o}=e;C({panes:[...E.slice(0,D+1),[{id:t,params:{template:l.id,parentRefPath:(0,td.toString)(n),type:i,version:o},payload:l.params}]]})},x[18]=D,x[19]=C,x[20]=E,x[21]=a):a=x[21];let z=a,O=!!E[D]&&E[D].length>1,B=E[D]?E[D].length:0,H=y?s_:void 0;x[22]!==A?(c=e=>{let t=void 0===e?{}:e;A(()=>[{id:t.id||"",payload:t.payload,params:t.params||{}}])},d=()=>{A(sk)},x[22]=A,x[23]=d,x[24]=c):(d=x[23],c=x[24]),x[25]!==P||x[26]!==D||x[27]!==k||x[28]!==C||x[29]!==E?(p=e=>{(void 0===e||e)&&k&&P(k.element),C({panes:E.slice(0,D)})},x[25]=P,x[26]=D,x[27]=k,x[28]=C,x[29]=E,x[30]=p):p=x[30],x[31]!==A||x[32]!==S?(m=e=>{A((t,n)=>{let i={...n,payload:e?.payload||n.payload,params:e?.params||n.params};return[...t.slice(0,S),i,...t.slice(S)]})},x[31]=A,x[32]=S,x[33]=m):m=x[33],x[34]!==j||x[35]!==L?(h=e=>{let t=(0,eM.omit)(j,"view");return L(e?{...t,view:e}:t)},x[34]=j,x[35]=L,x[36]=h):h=x[36],x[37]!==M||x[38]!==y||x[39]!==D||x[40]!==z||x[41]!==_||x[42]!==j||x[43]!==w||x[44]!==E||x[45]!==L||x[46]!==V||x[47]!==S||x[48]!==d||x[49]!==p||x[50]!==m||x[51]!==h||x[52]!==O||x[53]!==B||x[54]!==H||x[55]!==c?(g={index:y,groupIndex:D,siblingIndex:S,payload:w,params:j,hasGroupSiblings:O,groupLength:B,routerPanesState:E,ChildLink:sI,BackLink:H,ReferenceChildLink:sR,handleEditReference:z,ParameterizedLink:sT,replaceCurrent:c,closeCurrent:d,closeCurrentAndAfter:p,duplicateCurrent:m,setView:h,setParams:L,setPayload:V,createPathWithParams:M,navigateIntent:_},x[37]=M,x[38]=y,x[39]=D,x[40]=z,x[41]=_,x[42]=j,x[43]=w,x[44]=E,x[45]=L,x[46]=V,x[47]=S,x[48]=d,x[49]=p,x[50]=m,x[51]=h,x[52]=O,x[53]=B,x[54]=H,x[55]=c,x[56]=g):g=x[56];let $=g;return x[57]!==b||x[58]!==$?(f=(0,r.jsx)(u.PaneRouterContext.Provider,{value:$,children:b}),x[57]=b,x[58]=$,x[59]=f):f=x[59],f}function sk(e,t){return e.length>1?e.filter(e=>e!==t):e}function sD(e){let t,n,i,l,o,a=(0,s.c)(14),{isSelected:c,pane:u,paneKey:p}=e;a[0]!==u?(t=(0,d.isRecord)(u)&&u.type||null,a[0]=u,a[1]=t):t=a[1];let m=t,{t:h}=(0,d.useTranslation)(C);return a[2]!==h?(n=h("panes.unknown-pane-type.title"),a[2]=h,a[3]=n):n=a[3],a[4]!==n?(i=(0,r.jsx)(iv,{title:n}),a[4]=n,a[5]=i):i=a[5],a[6]!==h||a[7]!==m?(l=(0,r.jsx)(ie,{children:(0,r.jsx)(ej.Box,{padding:4,children:"string"==typeof m?(0,r.jsx)(ej.Text,{as:"p",muted:!0,children:(0,r.jsx)(d.Translate,{t:h,i18nKey:"panes.unknown-pane-type.unknown-type.text",values:{type:m}})}):(0,r.jsx)(ej.Text,{as:"p",muted:!0,children:(0,r.jsx)(d.Translate,{t:h,i18nKey:"panes.unknown-pane-type.missing-type.text"})})})}),a[6]=h,a[7]=m,a[8]=l):l=a[8],a[9]!==c||a[10]!==p||a[11]!==i||a[12]!==l?(o=(0,r.jsxs)(n8,{id:p,selected:c,children:[i,l]}),a[9]=c,a[10]=p,a[11]=i,a[12]=l,a[13]=o):o=a[13],o}let sF={component:(0,a.lazy)(()=>e.A(837894)),document:(0,a.lazy)(()=>Promise.resolve().then(function(){return cs})),documentList:(0,a.lazy)(()=>Promise.resolve().then(function(){return ca})),list:(0,a.lazy)(()=>e.A(328515))},sA=(0,a.memo)(function(e){let t,n,i,l,o=(0,s.c)(25),{active:d,childItemId:c,groupIndex:u,index:p,itemId:m,pane:h,paneKey:g,params:f,payload:x,path:b,selected:y,siblingIndex:v,maximized:j,onSetMaximizedPane:w}=e,S=sF[h.type]||sD;o[0]!==g||o[1]!==b||o[2]!==y?(t=(0,r.jsx)(iA,{paneKey:g,path:b,selected:y}),o[0]=g,o[1]=b,o[2]=y,o[3]=t):t=o[3];let C=c||"";return o[4]!==S||o[5]!==d||o[6]!==p||o[7]!==m||o[8]!==j||o[9]!==w||o[10]!==h||o[11]!==g||o[12]!==y||o[13]!==C?(n=(0,r.jsx)(S,{childItemId:C,index:p,itemId:m,isActive:d,isSelected:y,paneKey:g,pane:h,maximized:j,onSetMaximizedPane:w}),o[4]=S,o[5]=d,o[6]=p,o[7]=m,o[8]=j,o[9]=w,o[10]=h,o[11]=g,o[12]=y,o[13]=C,o[14]=n):n=o[14],o[15]!==t||o[16]!==n?(i=(0,r.jsx)(a.Suspense,{fallback:t,children:n}),o[15]=t,o[16]=n,o[17]=i):i=o[17],o[18]!==u||o[19]!==p||o[20]!==f||o[21]!==x||o[22]!==v||o[23]!==i?(l=(0,r.jsx)(sE,{flatIndex:p,index:u,params:f,payload:x,siblingIndex:v,children:i}),o[18]=u,o[19]=p,o[20]=f,o[21]=x,o[22]=v,o[23]=i,o[24]=l):l=o[24],l},({params:e={},payload:t=null,...n},{params:i={},payload:l=null,...o})=>{if(!(0,eV.isEqual)(e,i)||!(0,eV.isEqual)(t,l))return!1;for(let e of new Set([...Object.keys(n),...Object.keys(o)]))if(n[e]!==o[e])return!1;return!0});function sM(e){let t,n,i=(0,s.c)(10),{document:l}=e,o=(0,d.useSchema)().get(l._type),{t:a}=(0,d.useTranslation)(C),{title:c}=iY();if(!o){let e,t;return i[0]!==l._type||i[1]!==a?(e=a("doc-title.unknown-schema-type.text",{schemaType:l._type}),i[0]=l._type,i[1]=a,i[2]=e):e=i[2],i[3]!==e?(t=(0,r.jsx)("code",{children:e}),i[3]=e,i[4]=t):t=i[4],t}return i[5]!==a||i[6]!==c?(t=c||(0,r.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:a("doc-title.fallback.text")}),i[5]=a,i[6]=c,i[7]=t):t=i[7],i[8]!==t?(n=(0,r.jsx)(r.Fragment,{children:t}),i[8]=t,i[9]=n):n=i[9],n}let sV=(0,e_.styled)(ej.Box)`
  margin-left: auto;
`,sL=e_.styled.details`
  flex: none;

  &[open] ${sV} {
    transform: rotate(180deg);
  }
`,sz=e_.styled.summary`
  list-style: none;

  &::-webkit-details-marker {
    display: none;
  }
`,sO=e_.styled.table`
  width: 100%;
  text-align: left;
  padding: 0 ${({theme:e})=>(0,ej.rem)(e.sanity.space[2])};
  border-collapse: collapse;

  th {
    padding: ${({theme:e})=>(0,ej.rem)(e.sanity.space[1])};
  }

  td {
    padding: 0 ${({theme:e})=>(0,ej.rem)(e.sanity.space[1])};
  }

  tr > *:last-child {
    text-align: right;
  }
`,sB=(0,e_.styled)(ej.Flex)`
  min-height: 33px;
`,sH=e=>{let t,n,i,l,o,a,c=(0,s.c)(13),{t:u}=(0,d.useTranslation)(C),p=e.totalCount-e.references.length;return p?(c[0]!==p||c[1]!==u?(t=u("confirm-delete-dialog.other-reference-count.title",{count:p}),c[0]=p,c[1]=u,c[2]=t):t=c[2],c[3]!==t?(n=(0,r.jsx)(ej.Text,{size:1,muted:!0,children:t}),c[3]=t,c[4]=n):n=c[4],c[5]!==u?(i=u("confirm-delete-dialog.other-reference-count.tooltip"),c[5]=u,c[6]=i):i=c[6],c[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(ej.Text,{size:1,muted:!0,children:(0,r.jsx)(m.InfoOutlineIcon,{})}),c[7]=l):l=c[7],c[8]!==i?(o=(0,r.jsx)(ev.Tooltip,{portal:!0,placement:"top",content:i,children:l}),c[8]=i,c[9]=o):o=c[9],c[10]!==n||c[11]!==o?(a=(0,r.jsx)(ej.Box,{padding:2,children:(0,r.jsxs)(ej.Inline,{space:2,children:[n,o]})}),c[10]=n,c[11]=o,c[12]=a):a=c[12],a):null};function s$(e){let t,n,i,l,o,a,c=(0,s.c)(27),{icon:u,layout:p,presence:m,schemaType:h,value:g}=e,f=(0,d.useDocumentVersionInfo)(g._id),{perspectiveStack:x}=(0,d.usePerspective)();c[0]!==x||c[1]!==e.documentPreviewStore||c[2]!==h||c[3]!==g._id?(t=(0,d.getPreviewStateObservable)(e.documentPreviewStore,h,g._id,x),c[0]=x,c[1]=e.documentPreviewStore,c[2]=h,c[3]=g._id,c[4]=t):t=c[4];let b=t;c[5]===Symbol.for("react.memo_cache_sentinel")?(n={snapshot:null,isLoading:!0,original:null},c[5]=n):n=c[5];let{snapshot:y,original:v,isLoading:j}=(0,eP.useObservable)(b,n);c[6]!==j||c[7]!==m||c[8]!==f.draft||c[9]!==f.published||c[10]!==f.versions?(i=j?null:(0,r.jsx)(ev.TooltipDelayGroupProvider,{children:(0,r.jsxs)(ej.Flex,{align:"center",gap:3,children:[m&&m.length>0&&(0,r.jsx)(d.DocumentPreviewPresence,{presence:m}),(0,r.jsx)(d.DocumentStatusIndicator,{draft:f.draft,published:f.published,versions:f.versions})]})}),c[6]=j,c[7]=m,c[8]=f.draft,c[9]=f.published,c[10]=f.versions,c[11]=i):i=c[11];let w=i;c[12]!==f.draft||c[13]!==f.published||c[14]!==f.versions?(l=(0,r.jsx)(d.DocumentStatus,{draft:f.draft,published:f.published,versions:f.versions}),c[12]=f.draft,c[13]=f.published,c[14]=f.versions,c[15]=l):l=c[15];let S=l;return c[16]!==v||c[17]!==y||c[18]!==g?(o=(0,d.getPreviewValueWithFallback)({snapshot:y,original:v,fallback:g}),c[16]=v,c[17]=y,c[18]=g,c[19]=o):o=c[19],c[20]!==u||c[21]!==j||c[22]!==p||c[23]!==w||c[24]!==o||c[25]!==S?(a=(0,r.jsx)(d.SanityDefaultPreview,{...o,isPlaceholder:j,icon:u,layout:p,status:w,tooltip:S}),c[20]=u,c[21]=j,c[22]=p,c[23]=w,c[24]=o,c[25]=S,c[26]=a):a=c[26],a}let sN=[];function sG(e){let t,n,i,l,o=(0,s.c)(16),{onClick:a,type:u,value:p}=e,m=p?._id;o[0]!==m?(t=(0,c.getPublishedId)(m),o[0]=m,o[1]=t):t=o[1];let h=(0,d.useDocumentPresence)(t),g=(0,d.useDocumentPreviewStore)(),{ReferenceChildLink:f}=l_();o[2]!==f||o[3]!==u?.name||o[4]!==p?._id?(n=function(e){return(0,r.jsx)(f,{documentId:p?._id,documentType:u?.name,parentRefPath:sN,...e})},o[2]=f,o[3]=u?.name,o[4]=p?._id,o[5]=n):n=o[5];let x=n,b=u?.icon,y=h?.length>0?h:sN;return o[6]!==g||o[7]!==b||o[8]!==y||o[9]!==u||o[10]!==p?(i=(0,r.jsx)(s$,{documentPreviewStore:g,icon:b,layout:"default",presence:y,schemaType:u,value:p}),o[6]=g,o[7]=b,o[8]=y,o[9]=u,o[10]=p,o[11]=i):i=o[11],o[12]!==a||o[13]!==x||o[14]!==i?(l=(0,r.jsx)(d.PreviewCard,{__unstable_focusRing:!0,as:x,"data-as":"a",onClick:a,radius:2,children:i}),o[12]=a,o[13]=x,o[14]=i,o[15]=l):l=o[15],l}let sU=(0,e_.styled)(ej.Text)`
  /* text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap; */
  max-width: 120px;
`,sq=e=>{let t,n,i,l,o,a,u,p,m,h,g,f,x,b,y=(0,s.c)(44),{versionId:v,schemaType:j}=e,{t:w}=(0,d.useTranslation)(),S=(0,d.useDocumentPreviewStore)();y[0]!==v?(t=(0,d.getDocumentVariantType)(v),y[0]=v,y[1]=t):t=y[1];let C=t,{data:_}=(0,d.useActiveReleases)();if(y[2]!==S||y[3]!==C||y[4]!==j||y[5]!==v){let e=["version"===C?(0,c.getVersionFromId)(v):"published"===C?"published":"drafts"];n=(0,d.getPreviewStateObservable)(S,j,(0,c.getPublishedId)(v),e),y[2]=S,y[3]=C,y[4]=j,y[5]=v,y[6]=n}else n=y[6];let I=n;y[7]===Symbol.for("react.memo_cache_sentinel")?(i={snapshot:null,isLoading:!0,original:null},y[7]=i):i=y[7];let{snapshot:T,original:R,isLoading:P}=(0,eP.useObservable)(I,i);e:{let e;if("version"!==C){l=void 0;break e}if(y[8]!==_||y[9]!==v){let t;y[11]!==v?(t=e=>(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===(0,c.getVersionFromId)(v),y[11]=v,y[12]=t):t=y[12],e=_.find(t),y[8]=_,y[9]=v,y[10]=e}else e=y[10];l=e}let E=l;y[13]!==C||y[14]!==E?.metadata?.title||y[15]!==w||y[16]!==v?(o=()=>"version"===C?E?.metadata?.title||(0,c.getVersionFromId)(v):w("published"===C?"release.chip.published":"release.chip.draft"),y[13]=C,y[14]=E?.metadata?.title,y[15]=w,y[16]=v,y[17]=o):o=y[17];let k=o;y[18]!==C||y[19]!==E?(a=E?(0,d.getReleaseTone)(E):"published"===C?"positive":"caution",y[18]=C,y[19]=E,y[20]=a):a=y[20];let D=a;y[21]!==R||y[22]!==j.name||y[23]!==T||y[24]!==v?(u=(0,d.getPreviewValueWithFallback)({snapshot:T,original:R,fallback:{_id:v,_type:j.name}}),y[21]=R,y[22]=j.name,y[23]=T,y[24]=v,y[25]=u):u=y[25];let F=j.icon;return y[26]===Symbol.for("react.memo_cache_sentinel")?(p={backgroundColor:"transparent"},y[26]=p):p=y[26],y[27]!==D?(m=(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(d.ReleaseAvatarIcon,{tone:D})}),y[27]=D,y[28]=m):m=y[28],y[29]!==k?(h=k(),y[29]=k,y[30]=h):h=y[30],y[31]!==h?(g=(0,r.jsx)(sU,{size:1,weight:"medium",textOverflow:"ellipsis",children:h}),y[31]=h,y[32]=g):g=y[32],y[33]!==m||y[34]!==g?(f=(0,r.jsxs)(ej.Flex,{align:"center",gap:2,paddingY:2,paddingRight:3,paddingLeft:2,children:[m,g]}),y[33]=m,y[34]=g,y[35]=f):f=y[35],y[36]!==f||y[37]!==D?(x=(0,r.jsx)(ej.Card,{border:!0,radius:"full",children:(0,r.jsx)(ej.Card,{radius:"full",tone:D,style:p,children:f})}),y[36]=f,y[37]=D,y[38]=x):x=y[38],y[39]!==P||y[40]!==j.icon||y[41]!==x||y[42]!==u?(b=(0,r.jsx)(d.SanityDefaultPreview,{...u,isPlaceholder:P,icon:F,layout:"default",status:x}),y[39]=P,y[40]=j.icon,y[41]=x,y[42]=u,y[43]=b):b=y[43],b},sW=e=>{let t,n,i,l=(0,s.c)(8),{documentType:o,documentVersions:a}=e,c=(0,d.useSchema)();l[0]!==o||l[1]!==c?(t=c.get(o),l[0]=o,l[1]=c,l[2]=t):t=l[2];let u=t;if(!u)throw Error(`Schema type ${o} not found`);return l[3]!==a||l[4]!==u?(n=a?.map(e=>(0,r.jsx)(sq,{versionId:e,schemaType:u},e)),l[3]=a,l[4]=u,l[5]=n):n=l[5],l[6]!==n?(i=(0,r.jsx)(ej.Card,{border:!0,padding:1,radius:2,children:(0,r.jsx)(ej.Stack,{children:n})}),l[6]=n,l[7]=i):i=l[7],i};function sK(e){let t,n,i,l,o,a,c,u,p,h,g,f,x,b,y,v,j,w,S,_=(0,s.c)(66),{crossDatasetReferences:I,internalReferences:T,documentTitle:R,totalCount:P,action:E,datasetNames:k,hasUnknownDatasetNames:D,documentId:F,documentType:A,onReferenceLinkClick:M,documentVersions:V}=e,L=(0,d.useSchema)(),z=(0,ew.useToast)(),{t:O}=(0,d.useTranslation)(C);_[0]!==M||_[1]!==L||_[2]!==O?(t=e=>{let t=L.get(e._type);return t?(0,r.jsx)(sG,{type:t,value:e,onClick:M}):(0,r.jsx)(ej.Box,{padding:2,children:(0,r.jsx)(d.SanityDefaultPreview,{icon:m.UnknownIcon,title:O("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:O("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},_[0]=M,_[1]=L,_[2]=O,_[3]=t):t=_[3];let B=t;_[4]!==E||_[5]!==R||_[6]!==A||_[7]!==V||_[8]!==O?(n=()=>(0,r.jsxs)(ej.Stack,{space:4,children:[(0,r.jsx)(ej.Text,{as:"p",size:1,children:(0,r.jsx)(d.Translate,{t:O,i18nKey:"confirm-delete-dialog.confirmation.text",context:E,components:{DocumentTitle:()=>(0,r.jsx)("strong",{children:R})}})}),"delete"===E&&(0,r.jsx)(sW,{documentType:A,documentVersions:V})]}),_[4]=E,_[5]=R,_[6]=A,_[7]=V,_[8]=O,_[9]=n):n=_[9];let H=n;if(T?.totalCount===0&&I?.totalCount===0){let e;return _[10]!==H?(e=H(),_[10]=H,_[11]=e):e=_[11],e}_[12]!==D?(i=D?["unavailable"]:[],_[12]=D,_[13]=i):i=_[13],_[14]!==k||_[15]!==i?(l=[...k,...i],_[14]=k,_[15]=i,_[16]=l):l=_[16];let $=l,N=$.length,G=$.join(", "),U=D&&$.length?"unavailable":"";_[17]!==$.length||_[18]!==O||_[19]!==G||_[20]!==U?(o=O("confirm-delete-dialog.cdr-summary.subtitle",{count:N,datasets:G,context:U}),_[17]=$.length,_[18]=O,_[19]=G,_[20]=U,_[21]=o):o=_[21];let q=o;return _[22]!==H?(a=H(),_[22]=H,_[23]=a):a=_[23],_[24]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(ej.Card,{borderTop:!0,padding:1}),_[24]=c):c=_[24],_[25]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)(ej.Text,{"aria-hidden":"true",size:1,children:(0,r.jsx)(m.WarningOutlineIcon,{})}),_[25]=u):u=_[25],_[26]!==R?(p={DocumentTitle:()=>R},_[26]=R,_[27]=p):p=_[27],_[28]!==P?(h={count:P},_[28]=P,_[29]=h):h=_[29],_[30]!==O||_[31]!==p||_[32]!==h?(g=(0,r.jsxs)("div",{children:[c,(0,r.jsx)(ej.Card,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,r.jsxs)(ej.Flex,{children:[u,(0,r.jsx)(ej.Box,{flex:1,marginLeft:3,children:(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(d.Translate,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:p,t:O,values:h})})})]})})]}),_[30]=O,_[31]=p,_[32]=h,_[33]=g):g=_[33],_[34]!==R?(f={DocumentTitle:()=>R},_[34]=R,_[35]=f):f=_[35],_[36]!==E||_[37]!==O||_[38]!==f?(x=(0,r.jsx)(ej.Box,{flex:"none",children:(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(d.Translate,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:O,context:E,components:f})})}),_[36]=E,_[37]=O,_[38]=f,_[39]=x):x=_[39],_[40]!==T||_[41]!==B?(b=T.totalCount>0&&(0,r.jsxs)(ej.Stack,{as:"ul",space:2,"data-testid":"internal-references",children:[T?.references.map(e=>(0,r.jsx)(ej.Box,{as:"li",children:B(e)},e._id)),T.totalCount>T.references.length&&(0,r.jsx)(ej.Box,{as:"li",padding:3,children:(0,r.jsx)(sH,{...T})})]}),_[40]=T,_[41]=B,_[42]=b):b=_[42],_[43]!==I||_[44]!==q||_[45]!==F||_[46]!==T.totalCount||_[47]!==$.length||_[48]!==O||_[49]!==z?(y=I.totalCount>0&&(0,r.jsxs)(sL,{"data-testid":"cross-dataset-references",style:{borderTop:T.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,r.jsx)(sz,{children:(0,r.jsx)(ej.Card,{as:"a",marginTop:2*(T.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,r.jsxs)(ej.Flex,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(m.DocumentsIcon,{})}),(0,r.jsxs)(ej.Stack,{space:2,children:[(0,r.jsx)(ej.Text,{textOverflow:"ellipsis",size:1,children:O("confirm-delete-dialog.cdr-summary.title",{count:$.length,documentCount:O("confirm-delete-dialog.cdr-summary.document-count",{count:I.totalCount})})}),(0,r.jsx)(ej.Text,{title:q,textOverflow:"ellipsis",size:1,muted:!0,children:q})]}),(0,r.jsx)(sV,{children:(0,r.jsx)(ej.Text,{muted:!0,size:1,children:(0,r.jsx)(m.ChevronDownIcon,{})})})]})})}),(0,r.jsxs)(ej.Box,{overflow:"auto",paddingTop:2,children:[(0,r.jsxs)(sO,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:(0,r.jsx)(ej.Text,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:O("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,r.jsx)("th",{children:(0,r.jsx)(ej.Text,{muted:!0,size:1,weight:"medium",children:O("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,r.jsx)("th",{children:(0,r.jsx)(ej.Text,{muted:!0,size:1,weight:"medium",children:O("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,r.jsx)("tbody",{children:I.references.filter(sY).map((e,t)=>{let{projectId:n,datasetName:i,documentId:l}=e;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(ej.Text,{size:1,children:n})}),(0,r.jsx)("td",{children:(0,r.jsx)(ej.Text,{size:1,children:i||"unavailable"})}),(0,r.jsx)("td",{children:(0,r.jsxs)(sB,{align:"center",gap:2,justify:"flex-end",children:[(0,r.jsx)(ej.Text,{textOverflow:"ellipsis",size:1,children:l||"unavailable"}),l&&(0,r.jsx)(ev.Button,{mode:"bleed",icon:m.CopyIcon,tooltipProps:{content:O("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(l).catch(()=>{z.push({status:"error",title:O("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${F}-${t}`)})})]}),(0,r.jsx)(sH,{...I})]})]}),_[43]=I,_[44]=q,_[45]=F,_[46]=T.totalCount,_[47]=$.length,_[48]=O,_[49]=z,_[50]=y):y=_[50],_[51]!==b||_[52]!==y?(v=(0,r.jsx)(ej.Card,{radius:2,shadow:1,flex:"auto",padding:1,children:(0,r.jsxs)(ej.Flex,{direction:"column",children:[b,y]})}),_[51]=b,_[52]=y,_[53]=v):v=_[53],_[54]!==R?(j={DocumentTitle:()=>R},_[54]=R,_[55]=j):j=_[55],_[56]!==E||_[57]!==O||_[58]!==j?(w=(0,r.jsx)(ej.Box,{flex:"none",children:(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(d.Translate,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:O,context:E,components:j})})}),_[56]=E,_[57]=O,_[58]=j,_[59]=w):w=_[59],_[60]!==g||_[61]!==x||_[62]!==v||_[63]!==w||_[64]!==a?(S=(0,r.jsxs)(ej.Flex,{direction:"column",gap:4,children:[a,g,x,v,w]}),_[60]=g,_[61]=x,_[62]=v,_[63]=w,_[64]=a,_[65]=S):S=_[65],S}function sY(e){return"projectId"in e}let sX=()=>(t||(t=(0,e9.fromEvent)(document,"visibilitychange").pipe((0,eN.startWith)(null),(0,eH.map)(()=>"visible"===document.visibilityState),(0,eq.distinctUntilChanged)(),(0,eW.switchMap)(e=>e?(0,te.timer)(0,5e3):tt.EMPTY),(0,eK.shareReplay)({refCount:!0,bufferSize:1}))),t),sJ=(0,d.createHookFromObservableFactory)(([e,t])=>t.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:e},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),sQ=(0,d.createHookFromObservableFactory)(([e,t])=>sX().pipe((0,eW.switchMap)(()=>(function(e,t){let{versionedClient:n}=t;return sX().pipe((0,eW.switchMap)(()=>(function(e,{versionedClient:t}){let n=(0,c.getDraftId)(e),i=(0,c.getPublishedId)(e),l={uri:t.getDataUrl("doc",`${n},${i}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return t.observable.request(l).pipe((0,eH.map)(({omitted:e})=>{let t=e.filter(e=>"existence"===e.reason);if(2!==t.length)return 0===t.length||t.some(e=>e.id===n)?i:n}))})(e,t)),(0,eW.switchMap)(e=>{if(!e)return(0,e3.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:`/data/references/${t}/documents/${e}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,e$.catchError)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,e3.of)({totalCount:0,references:[]});throw e}))}))})(e,{versionedClient:t}))));function sZ(e){return"string"!=typeof e.datasetName}function s0(e){return!!e&&""!==e}function s1(e){return e?.datasetName||""}function s2(e){return e.projectId}let s3=(0,e_.styled)(ej.Box)`
  box-sizing: border-box;
`,s4=(0,e_.styled)(ej.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;function s5(e){let t,n,i,l,o,u,p,m,h,g,f,x,b=(0,s.c)(51),{id:y,type:v,action:j,onCancel:w,onConfirm:S}=e,_=void 0===j?"delete":j,{t:I}=(0,d.useTranslation)(C),T=`deletion-confirmation-${(0,a.useId)()}`,{internalReferences:R,crossDatasetReferences:P,isLoading:E,totalCount:k,projectIds:D,datasetNames:F,hasUnknownDatasetNames:A}=function(e){let t,n,i,l,o,r,a,u,p=(0,s.c)(24),m=(0,d.useClient)(d.DEFAULT_STUDIO_CLIENT_OPTIONS),h=(0,d.useDocumentStore)();p[0]!==e?(t=(0,c.getPublishedId)(e),p[0]=e,p[1]=t):t=p[1];let g=t;p[2]!==h||p[3]!==g?(n=[g,h],p[2]=h,p[3]=g,p[4]=n):n=p[4];let[f,x]=sJ(n);p[5]!==g||p[6]!==m?(i=[g,m],p[5]=g,p[6]=m,p[7]=i):i=p[7];let[b,y]=sQ(i);p[8]!==b?.references?(l=()=>Array.from(new Set(b?.references.map(s2).filter(Boolean))).sort(),p[8]=b?.references,p[9]=l):l=p[9],p[10]!==l?(o=l(),p[10]=l,p[11]=o):o=p[11];let v=o;p[12]!==b?.references?(r=Array.from(new Set(b?.references.map(s1).filter(s0))).sort(),p[12]=b?.references,p[13]=r):r=p[13];let j=r;p[14]!==b?.references?(a=()=>!!b?.references.some(sZ),p[14]=b?.references,p[15]=a):a=p[15];let w=a(),S=(f?.totalCount||0)+(b?.totalCount||0),C=x||y;return p[16]!==b||p[17]!==j||p[18]!==w||p[19]!==f||p[20]!==v||p[21]!==S||p[22]!==C?(u={totalCount:S,projectIds:v,datasetNames:j,hasUnknownDatasetNames:w,internalReferences:f,crossDatasetReferences:b,isLoading:C},p[16]=b,p[17]=j,p[18]=w,p[19]=f,p[20]=v,p[21]=S,p[22]=C,p[23]=u):u=p[23],u}(y);b[0]!==y||b[1]!==v?(t={_id:y,_type:v},b[0]=y,b[1]=v,b[2]=t):t=b[2];let M=t;b[3]!==M?(n=(0,r.jsx)(sM,{document:M}),b[3]=M,b[4]=n):n=b[4];let V=n,L=!E;b[5]!==y?(i=(0,c.getPublishedId)(y),b[5]=y,b[6]=i):i=b[6],b[7]!==i?(l={documentId:i},b[7]=i,b[8]=l):l=b[8];let{data:z,loading:O}=(0,d.useDocumentVersions)(l);b[9]!==z||b[10]!==S?(o=()=>{S(z)},b[9]=z,b[10]=S,b[11]=o):o=b[11];let B=o;return b[12]!==_||b[13]!==I?(u=I("confirm-delete-dialog.header.text",{context:_}),b[12]=_,b[13]=I,b[14]=u):u=b[14],b[15]!==I?(p=I("confirm-delete-dialog.cancel-button.text"),b[15]=I,b[16]=p):p=b[16],b[17]!==w||b[18]!==p?(m={onClick:w,text:p},b[17]=w,b[18]=p,b[19]=m):m=b[19],b[20]!==_||b[21]!==B||b[22]!==L||b[23]!==I||b[24]!==k?(h=L?{text:I(k>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:_}),onClick:B}:void 0,b[20]=_,b[21]=B,b[22]=L,b[23]=I,b[24]=k,b[25]=h):h=b[25],b[26]!==m||b[27]!==h?(g={cancelButton:m,confirmButton:h},b[26]=m,b[27]=h,b[28]=g):g=b[28],b[29]!==_||b[30]!==P||b[31]!==F||b[32]!==V||b[33]!==z||b[34]!==A||b[35]!==y||b[36]!==R||b[37]!==E||b[38]!==w||b[39]!==D||b[40]!==I||b[41]!==k||b[42]!==v||b[43]!==O?(f=(0,r.jsx)(s3,{children:P&&R&&!E&&!O?(0,r.jsx)(sK,{crossDatasetReferences:P,internalReferences:R,documentTitle:V,isLoading:E,totalCount:k,action:_,projectIds:D,datasetNames:F,hasUnknownDatasetNames:A,onReferenceLinkClick:w,documentId:y,documentType:v,documentVersions:z}):(0,r.jsx)(s4,{"data-testid":"loading-container",children:(0,r.jsx)(d.LoadingBlock,{showText:!0,title:I("confirm-delete-dialog.loading.text")})})}),b[29]=_,b[30]=P,b[31]=F,b[32]=V,b[33]=z,b[34]=A,b[35]=y,b[36]=R,b[37]=E,b[38]=w,b[39]=D,b[40]=I,b[41]=k,b[42]=v,b[43]=O,b[44]=f):f=b[44],b[45]!==T||b[46]!==w||b[47]!==g||b[48]!==f||b[49]!==u?(x=(0,r.jsx)(ev.Dialog,{width:1,id:T,header:u,footer:g,onClose:w,onClickOutside:w,children:f}),b[45]=T,b[46]=w,b[47]=g,b[48]=f,b[49]=u,b[50]=x):x=b[50],x}function s6(e){let t,n,i=(0,s.c)(6),{t:l}=(0,d.useTranslation)(C),o=(0,a.useId)(),[c,u]=(0,a.useState)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>u(null),i[0]=t):t=i[0];let p=t;return i[1]!==c||i[2]!==o||i[3]!==e||i[4]!==l?(n=c?(0,r.jsx)(ev.Dialog,{id:`dialog-error-${o}`,"data-testid":"confirm-delete-error-dialog",header:l("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:l("confirm-delete-dialog.error.retry-button.text"),onClick:p,tone:"default"}},onClose:e.onCancel,children:(0,r.jsx)(ej.Box,{padding:4,children:(0,r.jsx)(ej.Text,{size:1,children:l("confirm-delete-dialog.error.message.text")})})}):(0,r.jsx)(ev.ErrorBoundary,{onCatch:u,children:(0,r.jsx)(s5,{...e})}),i[1]=c,i[2]=o,i[3]=e,i[4]=l,i[5]=n):n=i[5],n}let s8=(0,a.forwardRef)(function(e,t){let n,i,l,o,d=(0,s.c)(10);d[0]!==e?({intent:n,...i}=e,d[0]=e,d[1]=n,d[2]=i):(n=d[1],i=d[2]),d[3]!==n?(l=(0,a.forwardRef)(function(e,t){return(0,r.jsx)(eE.IntentLink,{...e,intent:n.type,params:n.params,ref:t,searchParams:n.searchParams})}),d[3]=n,d[4]=l):l=d[4];let c=l;return d[5]!==c||d[6]!==e.disabled||d[7]!==t||d[8]!==i?(o=e.disabled?(0,r.jsx)(ev.Button,{...i,as:"a",role:"link","aria-disabled":"true"}):(0,r.jsx)(ev.Button,{...i,as:c,"data-as":"a",ref:t}),d[5]=c,d[6]=e.disabled,d[7]=t,d[8]=i,d[9]=o):o=d[9],o});function s7(e){let t,n,i,l=(0,s.c)(12),{reveal:o,context:a,loading:c,children:u}=e,p=(0,d.useCurrentUser)(),{t:m}=(0,d.useTranslation)(C);if(!o){let e;return l[0]!==u?(e=(0,r.jsx)(r.Fragment,{children:u}),l[0]=u,l[1]=e):e=l[1],e}return l[2]!==a||l[3]!==p||l[4]!==c||l[5]!==m?(t=c?m("insufficient-permissions-message-tooltip.loading-text"):(0,r.jsx)(d.InsufficientPermissionsMessage,{context:a,currentUser:p}),l[2]=a,l[3]=p,l[4]=c,l[5]=m,l[6]=t):t=l[6],l[7]!==u?(n=(0,r.jsx)("div",{children:u}),l[7]=u,l[8]=n):n=l[8],l[9]!==t||l[10]!==n?(i=(0,r.jsx)(ev.Tooltip,{content:t,portal:!0,children:n}),l[9]=t,l[10]=n,l[11]=i):i=l[11],i}let s9={constrainSize:!0,placement:"bottom",portal:!0},ae=(e,t,n)=>{let i=e.find(e=>e.id===t.templateId)?.schemaType;if(!i)return null;let l={template:t.templateId,type:i,version:n,id:t.initialDocumentId};return{type:"create",params:t.parameters?[l,t.parameters]:l,searchParams:n?[["perspective",n]]:void 0}};function at(e){let t,n,i,l,o,c,u,p,h=(0,s.c)(60),{templateItems:g}=e,f=(0,d.useTemplates)(),{selectedReleaseId:x}=(0,d.usePerspective)(),{t:b}=(0,d.useTranslation)(C);h[0]!==g||h[1]!==f?(t=[...g,...f],h[0]=g,h[1]=f,h[2]=t):t=h[2];let y=(0,d.useGetI18nText)(t);h[3]!==g?(n={templateItems:g},h[3]=g,h[4]=n):n=h[4];let[v,j]=(0,d.useTemplatePermissions)(n),w=!j&&v?.length!==0&&v?.every(ai);e:{let e;if(!v){let e;h[5]===Symbol.for("react.memo_cache_sentinel")?(e={},h[5]=e):e=h[5],i=e;break e}h[6]!==v?(e=v.reduce(an,{}),h[6]=v,h[7]=e):e=h[7],i=e}let S=i;if(0===g.length)return null;if(w){let e,t,n;return h[8]!==b?(e=b("pane-header.disabled-created-button.aria-label"),h[8]=b,h[9]=e):e=h[9],h[10]!==e?(t=(0,r.jsx)(ev.Button,{"aria-label":e,icon:m.AddIcon,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),h[10]=e,h[11]=t):t=h[11],h[12]!==j||h[13]!==t?(n=(0,r.jsx)(s7,{context:"create-document-type",reveal:!0,loading:j,children:t}),h[12]=j,h[13]=t,h[14]=n):n=h[14],n}if(1===g.length){let e,t,n,i,l,o,s=g[0],a=!S[s.id]?.granted;h[15]!==s||h[16]!==x||h[17]!==f?(e=ae(f,s,x),h[15]=s,h[16]=x,h[17]=f,h[18]=e):e=h[18];let d=e;if(!d)return null;h[19]!==s||h[20]!==y?(t=y(s),h[19]=s,h[20]=y,h[21]=t):t=h[21];let c=t.title,u=s.icon||m.AddIcon;return h[22]!==b?(n=b("pane-header.create-new-button.tooltip"),h[22]=b,h[23]=n):n=h[23],h[24]!==n?(i={content:n},h[24]=n,h[25]=i):i=h[25],h[26]!==a||h[27]!==d||h[28]!==t.title||h[29]!==u||h[30]!==i?(l=(0,r.jsx)(s8,{"aria-label":c,icon:u,intent:d,mode:"bleed",disabled:a,"data-testid":"action-intent-button",tooltipProps:i}),h[26]=a,h[27]=d,h[28]=t.title,h[29]=u,h[30]=i,h[31]=l):l=h[31],h[32]!==a||h[33]!==j||h[34]!==l?(o=(0,r.jsx)(s7,{reveal:a,loading:j,context:"create-document-type",children:l}),h[32]=a,h[33]=j,h[34]=l,h[35]=o):o=h[35],o}if(h[36]!==b?(l=b("pane-header.create-new-button.tooltip"),h[36]=b,h[37]=l):l=h[37],h[38]!==l?(o=(0,r.jsx)(ev.Button,{icon:m.AddIcon,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:l}}),h[38]=l,h[39]=o):o=h[39],h[40]!==y||h[41]!==j||h[42]!==S||h[43]!==x||h[44]!==b||h[45]!==g||h[46]!==f){let e;h[48]!==y||h[49]!==j||h[50]!==S||h[51]!==x||h[52]!==b||h[53]!==f?(e=(e,t)=>{let n=!S[e.id]?.granted,i=ae(f,e,x),l=f.find(t=>t.id===e.templateId);if(!l||!i)return null;let o=(0,a.forwardRef)((e,t)=>n?(0,r.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,r.jsx)(eE.IntentLink,{...e,intent:i.type,params:i.params,searchParams:i.searchParams,ref:t}));o.displayName="Link";let{title:s}=y({...e,title:e.title||y(l).title});return(0,r.jsx)(s7,{context:"create-document-type",reveal:n,loading:j,children:(0,r.jsx)(ev.MenuItem,{as:o,"data-as":n?"button":"a",text:s,"aria-label":n?b("pane-header.disabled-created-button.aria-label"):s,disabled:n,"data-testid":`action-intent-button-${t}`})},e.id)},h[48]=y,h[49]=j,h[50]=S,h[51]=x,h[52]=b,h[53]=f,h[54]=e):e=h[54],c=g.map(e),h[40]=y,h[41]=j,h[42]=S,h[43]=x,h[44]=b,h[45]=g,h[46]=f,h[47]=c}else c=h[47];return h[55]!==c?(u=(0,r.jsx)(ej.Menu,{children:c}),h[55]=c,h[56]=u):u=h[56],h[57]!==o||h[58]!==u?(p=(0,r.jsx)(ev.MenuButton,{button:o,id:"create-menu",menu:u,popover:s9}),h[57]=o,h[58]=u,h[59]=p):p=h[59],p}function an(e,t){return e[t.id]=t,e}function ai(e){return!e.granted}function al(e){return null!=e}let ao=(0,a.memo)(function(e){let t,n,i,l,o,a,c,u,p,m,h=(0,s.c)(28),{initialValueTemplateItems:g,menuItems:f,menuItemGroups:x,actionHandlers:b}=e,y=void 0===g?d.EMPTY_ARRAY:g,v=void 0===f?d.EMPTY_ARRAY:f,j=void 0===x?d.EMPTY_ARRAY:x,w=void 0===b?d.EMPTY_OBJECT:b,S=(0,d.useTemplates)();h[0]!==w?(t=e=>{if("string"==typeof e.action&&!(e.action in w))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?w[e.action]:null;return!!t&&(t(e.params),!0)},h[0]=w,h[1]=t):t=h[1];let C=t;h[2]!==C||h[3]!==j||h[4]!==v?(n=oo({actionHandler:C,menuItemGroups:j,menuItems:v.filter(ar)}),h[2]=C,h[3]=j,h[4]=v,h[5]=n):n=h[5];let _=n;h[6]!==_?(i=_.filter(oi),h[6]=_,h[7]=i):i=h[7];let I=i;h[8]!==_?(l=_.filter(ol),h[8]=_,h[9]=l):l=h[9];let T=l;if(h[10]!==v||h[11]!==S){let e;h[13]!==S?(e=(e,t)=>{if(e.intent?.type!=="create")return null;let{params:n}=e.intent;if(!n)return null;let i=Array.isArray(n)?n[0]:n,l=Array.isArray(n)?n[1]:void 0,o=i.template||i.type;if(!o)return null;let r=S.find(e=>e.id===o);return r?{item:e,template:r,templateParams:l,menuItemIndex:t,initialDocumentId:i.id}:null},h[13]=S,h[14]=e):e=h[14],o=v.map(e).filter(al).map(as),h[10]=v,h[11]=S,h[12]=o}else o=h[12];let R=o;h[15]!==R||h[16]!==y?(a=(0,eL.uniqBy)([...R,...y],aa),h[15]=R,h[16]=y,h[17]=a):a=h[17];let P=a;return h[18]!==P?(c=(0,r.jsx)(at,{templateItems:P}),h[18]=P,h[19]=c):c=h[19],h[20]!==I?(u=I.map(ad),h[20]=I,h[21]=u):u=h[21],h[22]!==T?(p=T.length>0&&(0,r.jsx)(ic,{nodes:T}),h[22]=T,h[23]=p):p=h[23],h[24]!==c||h[25]!==u||h[26]!==p?(m=(0,r.jsxs)(ej.Flex,{gap:1,children:[c,u,p]}),h[24]=c,h[25]=u,h[26]=p,h[27]=m):m=h[27],m});function ar(e){return e.intent?.type!=="create"}function as(e){let{initialDocumentId:t,item:n,template:i,menuItemIndex:l,templateParams:o}=e;return{id:`menuItem${l}`,initialDocumentId:t,templateId:i.id,type:"initialValueTemplateItem",title:n.title||i.title,i18n:n.i18n||i.i18n,icon:n.icon,description:i.description,parameters:o,schemaType:i.schemaType}}function aa(e){var t=[e.initialDocumentId,e.templateId,e.parameters];let n=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(n):Object.entries(e).sort(([e],[t])=>e.localeCompare(t,"en")):e;return JSON.stringify(n(JSON.parse(JSON.stringify(t))))}function ad(e){return(0,r.jsx)(iw,{node:e},e.key)}function ac(e){let t,n,i,l,o,a,c,u=(0,s.c)(16),{t:p}=(0,d.useTranslation)(C),{layout:m,value:h}=e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},u[0]=t):t=u[0],u[1]!==h._type?(n={documentType:h._type},u[1]=h._type,u[2]=n):n=u[2],u[3]!==p||u[4]!==n?(i=(0,r.jsx)("em",{children:(0,r.jsx)(d.Translate,{t:p,i18nKey:"pane-item.missing-schema-type.title",components:t,values:n})}),u[3]=p,u[4]=n,u[5]=i):i=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(l={Code:"code"},u[6]=l):l=u[6],u[7]!==h._id?(o={documentId:h._id},u[7]=h._id,u[8]=o):o=u[8],u[9]!==p||u[10]!==o?(a=(0,r.jsx)(d.Translate,{t:p,i18nKey:"pane-item.missing-schema-type.subtitle",components:l,values:o}),u[9]=p,u[10]=o,u[11]=a):a=u[11],u[12]!==m||u[13]!==i||u[14]!==a?(c=(0,r.jsx)(d.SanityDefaultPreview,{title:i,subtitle:a,media:au,layout:m}),u[12]=m,u[13]=i,u[14]=a,u[15]=c):c=u[15],c}function au(){return(0,r.jsx)(m.WarningOutlineIcon,{})}function ap(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function am(e){let t,n,i,l,o,c,u,p,h=(0,s.c)(42),{icon:g,id:f,layout:x,pressed:b,schemaType:y,selected:v,title:j,value:w,margin:S,marginBottom:C,marginTop:_}=e,I=void 0===x?"default":x,T=(0,d.useSchema)(),R=(0,d.useDocumentPreviewStore)(),{ChildLink:P}=l_(),E=(0,d.useDocumentPresence)(f),k=!!(y&&y.name&&T.get(y.name)),[D,F]=(0,a.useState)(!1);e:{let e,n,i,l;if(w&&(0,eS.isSanityDocument)(w)){let e,n;if(!y||!k){let e;h[0]!==w?(e=(0,r.jsx)(ac,{value:w}),h[0]=w,h[1]=e):e=h[1],t=e;break e}h[2]!==g||h[3]!==y?(e=ap(g,y,m.DocumentIcon),h[2]=g,h[3]=y,h[4]=e):e=h[4],h[5]!==E||h[6]!==R||h[7]!==I||h[8]!==y||h[9]!==e||h[10]!==w?(n=(0,r.jsx)(s$,{documentPreviewStore:R,icon:e,layout:I,schemaType:y,value:w,presence:E}),h[5]=E,h[6]=R,h[7]=I,h[8]=y,h[9]=e,h[10]=w,h[11]=n):n=h[11],t=n;break e}h[12]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},h[12]=e):e=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(ej.Box,{style:e,children:(0,r.jsx)(ej.Text,{muted:!0,size:1,children:(0,r.jsx)(m.ChevronRightIcon,{})})}),h[13]=n):n=h[13],h[14]!==g||h[15]!==y?(i=ap(g,y,m.FolderIcon),h[14]=g,h[15]=y,h[16]=i):i=h[16],h[17]!==i||h[18]!==j?(l=(0,r.jsx)(d.SanityDefaultPreview,{status:n,icon:i,layout:"compact",title:j}),h[17]=i,h[18]=j,h[19]=l):l=h[19],t=l}let A=t;h[20]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e.metaKey?F(!1):F(!0)},h[20]=n):n=h[20];let M=n;h[21]===Symbol.for("react.memo_cache_sentinel")?(i=()=>F(!1),h[21]=i):i=h[21],h[22]!==v?(l=[v],h[22]=v,h[23]=l):l=h[23],(0,a.useEffect)(i,l);let[V,L]=(0,a.useState)(!1),z=(0,a.useRef)(null);h[24]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{z.current=setTimeout(()=>(0,a.startTransition)(()=>L(!0)),400)},h[24]=o):o=h[24];let O=o;h[25]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{z.current&&clearTimeout(z.current),(0,a.startTransition)(()=>L(!1))},h[25]=c):c=h[25];let B=c,H=`pane-item-${j}`,$=v||D;return h[26]!==f||h[27]!==V||h[28]!==y||h[29]!==w?(u=V&&y?.name&&w&&(0,eS.isSanityDocument)(w)&&(0,r.jsx)(ah,{documentId:f,documentType:y.name}),h[26]=f,h[27]=V,h[28]=y,h[29]=w,h[30]=u):u=h[30],h[31]!==f||h[32]!==S||h[33]!==C||h[34]!==_||h[35]!==b||h[36]!==A||h[37]!==u||h[38]!==H||h[39]!==P||h[40]!==$?(p=(0,r.jsxs)(d.PreviewCard,{"data-testid":H,__unstable_focusRing:!0,as:P,childId:f,"data-as":"a",margin:S,marginBottom:C,marginTop:_,onClick:M,onMouseEnter:O,onMouseLeave:B,pressed:b,radius:2,selected:$,sizing:"border",tabIndex:-1,tone:"inherit",children:[A,u]}),h[31]=f,h[32]=S,h[33]=C,h[34]=_,h[35]=b,h[36]=A,h[37]=u,h[38]=H,h[39]=P,h[40]=$,h[41]=p):p=h[41],p}function ah(e){let t,n=(0,s.c)(2),{documentId:i,documentType:l}=e;return n[0]!==i?(t=(0,c.getPublishedId)(i),n[0]=i,n[1]=t):t=n[1],(0,d.useEditState)(t,l),null}ah.displayName="PreloadDocumentPane";let ag=(0,a.memo)(e=>{let t,n=(0,s.c)(4),{children:i,group:l}=e,o=(0,a.useContext)(u.DocumentActionsStateContext);if(null===o)throw Error("DocumentActionsStateContext is not set. This should not happen.");return n[0]!==i||n[1]!==l||n[2]!==o?(t=i({states:l?o.filter(e=>(e.group||["default"]).includes(l)):o}),n[0]=i,n[1]=l,n[2]=o,n[3]=t):t=n[3],t});ag.displayName="Memo(RenderActionCollectionState)";let af=(0,a.memo)(e=>{let t,n=(0,s.c)(4),{badges:i,children:l,badgeProps:o}=e;return n[0]!==o||n[1]!==i||n[2]!==l?(t=(0,r.jsx)(d.GetHookCollectionState,{hooks:i,args:o,children:l}),n[0]=o,n[1]=i,n[2]=l,n[3]=t):t=n[3],t});af.displayName="Memo(RenderBadgeCollectionState)";let ax={by:[{field:"_updatedAt",direction:"desc"}]},ab={},ay=(0,e_.styled)(ej.Box)`
  position: relative;
  opacity: ${e=>e.$opacity||1};
  transition: opacity 0.4s;
`,av=(0,e_.styled)(ej.Box)`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,aj=[...Array(30).keys()];function aw(e){let t,n,i=(0,s.c)(4),{layout:l}=e;return i[0]!==l?(t=aj.map(e=>(0,r.jsx)(d.SanityDefaultPreview,{isPlaceholder:!0,layout:l},e)),i[0]=l,i[1]=t):t=i[1],i[2]!==t?(n=(0,r.jsx)(ej.Stack,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n}function aS(e){let t,n,i,l,o,u,p,m=(0,s.c)(66),{childItemId:h,error:g,isRetrying:f,autoRetry:x,filterIsSimpleTypeConstraint:b,hasMaxItems:y,hasSearchQuery:v,isActive:j,isLazyLoading:w,muted:S,isLoading:_,isConnected:I,retryCount:T,canRetry:R,items:P,layout:E,loadingVariant:k,onEndReached:D,onRetry:F,paneTitle:A,searchInputElement:M,showIcons:V}=e,L=(0,d.useSchema)(),{collapsed:z}=n3(),{collapsed:O,index:B}=n9(),[H,$]=(0,a.useState)(!O),{t:N}=(0,d.useTranslation)(C);m[0]!==D||m[1]!==H?(t=()=>{H&&D()},m[0]=D,m[1]=H,m[2]=t):t=m[2];let G=t;m[3]!==O?(n=()=>{if(O)return;let e=setTimeout(()=>{$(!0)},0);return()=>{clearTimeout(e)}},m[3]=O,m[4]=n):n=m[4],m[5]!==O||m[6]!==P?(i=[O,P],m[5]=O,m[6]=P,m[7]=i):i=m[7],(0,a.useEffect)(n,i),m[8]!==h||m[9]!==y||m[10]!==j||m[11]!==w||m[12]!==P.length||m[13]!==E||m[14]!==L||m[15]!==V||m[16]!==N?(l=(e,t)=>{let{activeIndex:n}=t,i=(0,c.getPublishedId)(e._id),l=h===i,o=!j&&l,s=j&&l,a=n===P.length-1,u=a&&w,p=a&&y;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(am,{icon:!1!==V&&void 0,id:i,layout:E,marginBottom:1,pressed:o,schemaType:L.get(e._type),selected:s,value:e}),u&&(0,r.jsx)(d.LoadingBlock,{}),p&&(0,r.jsx)(ej.Box,{marginY:1,paddingX:3,paddingY:4,children:(0,r.jsx)(ej.Text,{align:"center",muted:!0,size:1,children:N("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},m[8]=h,m[9]=y,m[10]=j,m[11]=w,m[12]=P.length,m[13]=E,m[14]=L,m[15]=V,m[16]=N,m[17]=l):l=m[17];let U=l;e:{let e,t;if(v){let e,t;m[18]!==N?(e=N("panes.document-list-pane.no-documents.text"),m[18]=N,m[19]=e):e=m[19],m[20]!==e?(t=(0,r.jsx)(ej.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,r.jsx)(ej.Container,{width:1,children:(0,r.jsx)(ej.Box,{paddingX:4,paddingY:5,children:(0,r.jsx)(ej.Text,{align:"center",muted:!0,children:e})})})}),m[20]=e,m[21]=t):t=m[21],o=t;break e}m[22]!==b||m[23]!==N?(e=N(b?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),m[22]=b,m[23]=N,m[24]=e):e=m[24],m[25]!==e?(t=(0,r.jsx)(ej.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,r.jsx)(ej.Container,{width:1,children:(0,r.jsx)(ej.Box,{paddingX:4,paddingY:5,children:(0,r.jsx)(ej.Text,{align:"center",muted:!0,children:e})})})}),m[25]=e,m[26]=t):t=m[26],o=t}let q=o;t:{let e,t;if(!H){u=null;break t}let n=window.navigator.onLine;if(g){let e,t,i,l,o,s,a;m[27]!==N?(e=N("panes.document-list-pane.error.title"),m[27]=N,m[28]=e):e=m[28],m[29]!==e?(t=(0,r.jsx)(ej.Heading,{as:"h3",children:e}),m[29]=e,m[30]=t):t=m[30],m[31]!==g||m[32]!==N?(i=d.isDev?(0,r.jsx)(d.Translate,{t:N,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:g.message},components:{Code:aC}}):N(n?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),m[31]=g,m[32]=N,m[33]=i):i=m[33],m[34]!==i?(l=(0,r.jsx)(ej.Text,{as:"p",children:i}),m[34]=i,m[35]=l):l=m[35];let c=n&&R?F:void 0;m[36]!==g||m[37]!==f||m[38]!==c?(o=(0,r.jsx)(d.ErrorActions,{error:g,eventId:null,onRetry:c,isRetrying:f}),m[36]=g,m[37]=f,m[38]=c,m[39]=o):o=m[39],m[40]!==x||m[41]!==R||m[42]!==f||m[43]!==T||m[44]!==N?(s=R?(0,r.jsx)(ej.Text,{as:"p",muted:!0,size:1,children:f?N("panes.document-list-pane.error.retrying",{count:T}):x?N("panes.document-list-pane.error.will-retry-automatically",{count:T}):N("panes.document-list-pane.error.max-retries-attempted",{count:T})}):null,m[40]=x,m[41]=R,m[42]=f,m[43]=T,m[44]=N,m[45]=s):s=m[45],m[46]!==o||m[47]!==s||m[48]!==t||m[49]!==l?(a=(0,r.jsx)(ej.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,r.jsx)(ej.Container,{width:1,children:(0,r.jsxs)(ej.Stack,{paddingX:4,paddingY:5,space:4,children:[t,l,o,s]})})}),m[46]=o,m[47]=s,m[48]=t,m[49]=l,m[50]=a):a=m[50],u=a;break t}if(I&&!_&&0===P.length){u=q;break t}if("initial"===k&&_){let e;m[51]!==E?(e=(0,r.jsx)(ik,{ms:300,children:(0,r.jsx)(aw,{layout:E})}),m[51]=E,m[52]=e):e=m[52],u=e;break t}if("spinner"===k&&_){u=null;break t}let i=`${B}-${O}`,l=S?.8:1;m[53]!==G||m[54]!==P||m[55]!==i||m[56]!==A||m[57]!==U||m[58]!==M?(e=(0,r.jsx)(av,{children:(0,r.jsx)(d.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:A,canReceiveFocus:!0,inputElement:M,itemHeight:51,items:P,onEndReached:G,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:U,wrapAround:!1},i)}),m[53]=G,m[54]=P,m[55]=i,m[56]=A,m[57]=U,m[58]=M,m[59]=e):e=m[59],m[60]!==l||m[61]!==e?(t=(0,r.jsx)(ay,{overflow:"hidden",height:"fill",$opacity:l,children:e}),m[60]=l,m[61]=e,m[62]=t):t=m[62],u=t}let W=u,K=z||"initial"===k?"hidden":"auto";return m[63]!==W||m[64]!==K?(p=(0,r.jsx)(ie,{"data-testid":"document-list-pane",overflow:K,children:W}),m[63]=W,m[64]=K,m[65]=p):p=m[65],p}function aC(e){let{children:t}=e;return(0,r.jsx)("code",{children:t})}function a_(e,t={}){try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base||"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,tq.parse)(e,{params:t}));return n?Array.from(n).sort():null}catch{return null}}let aI=(0,d.createSWR)({maxSize:100});function aT(e){let{client:t,schema:n,sort:i,perspective:l,limit:o,params:r,filter:s,searchQuery:a,staticTypeNames:c,maxFieldDepth:u,searchStrategy:p}=e,m=i.by,h=i?.extendedProjection,g=(0,tn.defer)(()=>t.listen(`*[${s}]`,r,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,eZ.mergeMap)((e,t)=>{let n=0===t;return n&&"reconnect"===e.type?(0,ti.throwError)(()=>Error("Failed to establish EventSource connection")):n&&"welcome"!==e.type?(0,ti.throwError)(()=>Error(`Received unexpected type of first event "${e.type}"`)):(0,e3.of)(e)}),(0,e0.share)()),[f,x]=(0,tl.partition)(g,e=>"welcome"===e.type),b=JSON.stringify({fiilter:s,limit:o,params:r,searchQuery:a,perspective:l,sort:i,staticTypeNames:c});return(0,e4.merge)(f,x.pipe((0,to.throttleTime)(1e3,tr.asyncScheduler,{leading:!0,trailing:!0}))).pipe((0,tY.exhaustMapWithTrailing)(e=>(c?(0,e3.of)(c):t.observable.fetch(`array::unique(*[${s}][]._type)`,r)).pipe((0,eZ.mergeMap)(g=>{let f=(0,d.getSearchableTypes)(n,c||[]).filter(e=>!!g.includes(e.name)&&(T(e,i.by,!0),!0)),x=(0,d.createSearch)(f,t,{filter:s,params:r,strategy:p,maxDepth:u}),b=()=>x({query:a||"",types:f},{__unstable_extendedProjection:h,comments:[`findability-source: ${a?"list-query":"list"}`],limit:o,skipSortByScore:!0,sort:m,perspective:l}).pipe((0,eH.map)(e=>e.hits.map(({hit:e})=>e)),(0,eH.map)(e=>({type:"result",documents:e})));return"mutation"===e.type&&"query"!==e.visibility?(0,te.timer)(1200).pipe((0,eZ.mergeMap)(b)):"reconnect"===e.type?(0,e3.of)(e):b()}))),(0,eY.scan)((e,t)=>({connected:"reconnect"!==t.type,documents:"result"===t.type?t.documents:e?.documents||[]}),null),(0,eJ.filter)(e=>null!==e),aI(b),(0,eH.map)(({fromCache:e,value:t})=>({fromCache:e,...t})))}let aR={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]};function aP(e,t){if("error"===t.type)return{...e,error:t.error,retryCount:t.retryCount,isRetrying:t.retrying,autoRetry:t.autoRetry,canRetry:t.canRetry};if("result"===t.type){var n;return{...e,error:null,isRetrying:!1,fromCache:t.result.fromCache,connected:t.result.connected,isLoading:!1,items:(n=t.result.documents,(0,d.collate)(n).map(e=>{let t=e.draft||e.published||e.versions[0],n=!!e.draft;return{...t,hasPublished:!!e.published,hasDraft:n}})),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error(`Unexpected event type: ${t.type}`)}function aE(e){return{type:"result",result:e}}function ak(e){return{type:"result",result:e}}function aD(e){let[,t]=e;return t?.documents.length===100}function aF(){return(0,tK.observableCallback)()}function aA(){return(0,tK.observableCallback)()}let aM="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",aV=e_.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,aL=e_.keyframes`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,az=(0,e_.styled)(m.SpinnerIcon)`
  animation: ${aV} 500ms linear infinite;
`,aO=(0,e_.styled)(m.SpinnerIcon)`
  animation: ${aV} 1500ms linear infinite;
  opacity: 0.4;
`,aB=(0,e_.styled)(m.SpinnerIcon)`
  animation:
    ${aV} 1500ms linear infinite,
    ${aL} 1000ms linear;
  opacity: 0.4;
`,aH=(0,a.memo)(function(e){var t;let n,i,l,o,c,u,p,h,g,f,x,b,y,v,j,w,S,_,I,T,R,P=(0,s.c)(69),{childItemId:E,isActive:k,pane:D,paneKey:F,sortOrder:A,layout:M}=e,V=(0,d.useSchema)(),L=(0,d.useActiveReleases)(),{perspectiveStack:z}=(0,d.usePerspective)(),{displayOptions:O,options:B}=D,{apiVersion:H,filter:$}=B,N=dd(B.params||ab);e:{let e;P[0]!==$||P[1]!==N?(e=a_($,N),P[0]=$,P[1]=N,P[2]=e):e=P[2];let t=e;if(t?.length===1){n=t[0];break e}n=null}let G=n,U=O?.showIcons!==!1,{t:q}=(0,d.useTranslation)(C),{title:W}=(0,d.useI18nText)(D),[K,Y]=(0,a.useState)(""),[X,J]=(0,a.useState)(""),[Q,Z]=(0,a.useState)(null);P[3]!==V||P[4]!==A||P[5]!==G?(i=G&&A?(t=V.get(G),(R=A.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=td.fromString(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,eS.isKeySegment)(e)||(0,eS.isIndexSegment)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,eS.isReferenceSchemaType)(t)){i=t;continue}let[l,o]=t.to||[];if(o||!l)return;i=l}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e})).every((e,t)=>e===A.by[t])?A:{...A,by:R}):A,P[3]=V,P[4]=A,P[5]=G,P[6]=i):i=P[6];let ee=(0,d.useUnique)(i),et=H||d.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;P[7]!==et?(l={...d.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:et},P[7]=et,P[8]=l):l=P[8];let en=(0,d.useClient)(l);P[9]!==K?(o=K?.trim(),P[9]=K,P[10]=o):o=P[10],P[11]!==en||P[12]!==$||P[13]!==N||P[14]!==z||P[15]!==ee||P[16]!==o?(c={client:en,filter:$,perspective:z,params:N,searchQuery:o,sortOrder:ee},P[11]=en,P[12]=$,P[13]=N,P[14]=z,P[15]=ee,P[16]=o,P[17]=c):c=P[17];let{error:ei,isLoadingFullList:el,isLoading:eo,items:er,fromCache:es,isRetrying:ea,autoRetry:ed,canRetry:ec,retryCount:eu,connected:ep,onLoadFullList:em,onRetry:eh}=function(e){let t,n,i,l=(0,s.c)(31),{client:o,filter:r,params:c,sortOrder:u,searchQuery:p,perspective:m}=e,{strategy:h}=(0,d.useWorkspace)().search,g=(0,d.useSchema)(),f=(0,d.useSearchMaxFieldDepth)();l[0]!==c||l[1]!==r?(t=a_(r,c),l[0]=c,l[1]=r,l[2]=t):t=l[2];let x=t,[b]=(0,a.useState)(aA),[y,v]=b,[j]=(0,a.useState)(aF),[w,S]=j,C=p||"",_=u||ax;if(l[3]!==o||l[4]!==f||l[5]!==w||l[6]!==y||l[7]!==c||l[8]!==m||l[9]!==g||l[10]!==r||l[11]!==h||l[12]!==C||l[13]!==_||l[14]!==x){let e,t={client:o,filter:r,limit:100,params:c,schema:g,perspective:m,searchQuery:C,sort:_,staticTypeNames:x,maxFieldDepth:f,searchStrategy:h},i=aT(t).pipe((0,eK.shareReplay)({refCount:!0,bufferSize:1})),s=w.pipe((0,eX.withLatestFrom)(i),(0,eJ.filter)(aD),(0,eQ.take)(1),(0,eZ.mergeMap)(()=>(0,e5.concat)((0,e3.of)({type:"loadFullList"}),aT({...t,limit:2e3}).pipe((0,eH.map)(ak)))),(0,e0.share)());l[16]!==y?(e=(e,t,n)=>{var i,l;let o=(l=e)instanceof Error?l:"object"==typeof l&&null!==l&&"message"in l&&"string"==typeof l.message?Error(`${l.message} ${aM}`):Error(`${String(l)} ${aM}`),r=window.navigator.onLine,s=r&&!((i=e)instanceof tW.ChannelError)&&(i instanceof tW.ServerError||!(i instanceof tW.ClientError)||403===i.statusCode),a=t<10,d=(0,e4.merge)(r?y:(0,e9.fromEvent)(window,"online"),r&&a?(0,te.timer)(1e3*t):ts.NEVER).pipe((0,eQ.take)(1),(0,eW.switchMap)(()=>(0,e4.merge)((0,e3.of)({type:"error",error:o,retrying:!0,autoRetry:a,canRetry:s,retryCount:t}),n)));return(0,e5.concat)((0,e3.of)({type:"error",error:o,retrying:!1,autoRetry:a,canRetry:s,retryCount:t}),d)},l[16]=y,l[17]=e):e=l[17],n=(0,e4.merge)(i.pipe((0,eH.map)(aE),(0,e1.takeUntil)(s)),s).pipe((0,d.catchWithCount)(e),(0,eY.scan)(aP,aR)),l[3]=o,l[4]=f,l[5]=w,l[6]=y,l[7]=c,l[8]=m,l[9]=g,l[10]=r,l[11]=h,l[12]=C,l[13]=_,l[14]=x,l[15]=n}else n=l[15];let I=n,{error:T,items:R,isLoading:P,fromCache:E,connected:k,canRetry:D,isLoadingFullList:F,isRetrying:A,autoRetry:M,retryCount:V}=(0,eP.useObservable)(I,aR);return l[18]!==M||l[19]!==D||l[20]!==k||l[21]!==T||l[22]!==E||l[23]!==P||l[24]!==F||l[25]!==A||l[26]!==R||l[27]!==S||l[28]!==v||l[29]!==V?(i={error:T,onRetry:v,isLoading:P,items:R,isRetrying:A,canRetry:D,retryCount:V,autoRetry:M,connected:k,fromCache:E,onLoadFullList:S,isLoadingFullList:F},l[18]=M,l[19]=D,l[20]=k,l[21]=T,l[22]=E,l[23]=P,l[24]=F,l[25]=A,l[26]=R,l[27]=S,l[28]=v,l[29]=V,l[30]=i):i=l[30],i}(c),eg=eo||L.loading;P[18]===Symbol.for("react.memo_cache_sentinel")?(u=e=>e.pipe((0,eH.map)(a$),(0,eU.tap)(J),(0,ta.debounce)(aN),(0,eU.tap)(Y)),P[18]=u):u=P[18];let ef=(0,eP.useObservableEvent)(u);P[19]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{Y(""),J("")},P[19]=p):p=P[19];let ex=p;P[20]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{"Escape"===e.key&&ex()},P[20]=h):h=P[20];let eb=h,[ey,ev]=(0,a.useState)();P[21]!==ey||P[22]!==eg||P[23]!==F?(f=()=>{ey||eg||ev(F)},g=[ey,eg,F],P[21]=ey,P[22]=eg,P[23]=F,P[24]=g,P[25]=f):(g=P[24],f=P[25]),(0,a.useEffect)(f,g),P[26]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{ex(),ev()},P[26]=x):x=P[26],P[27]!==F?(b=[F,ex],P[27]=F,P[28]=b):b=P[28],(0,a.useEffect)(x,b);t:{if(ep&&eg&&ey===F){y="spinner";break t}if(ep&&es){y="subtle";break t}y="initial"}let ew=y;n:{if("spinner"===ew){v=az;break n}if(X&&"subtle"===ew){v=aO;break n}v=m.SearchIcon}let eC=v;(0,d.useReconnectingToast)(!ep),P[29]!==q?(j=q("panes.document-list-pane.search-input.aria-label"),P[29]=q,P[30]=j):j=P[30];let e_=!!K;P[31]===Symbol.for("react.memo_cache_sentinel")?(w=[2,2,1],P[31]=w):w=P[31];let eI=ep&&("subtle"!==ew||X)?null:aB;P[32]!==q?(S=q("panes.document-list-pane.search-input.placeholder"),P[32]=q,P[33]=S):S=P[33],P[34]!==ef||P[35]!==X||P[36]!==j||P[37]!==e_||P[38]!==eI||P[39]!==S||P[40]!==eC?(_=(0,r.jsx)(ej.Box,{paddingX:3,paddingBottom:3,children:(0,r.jsx)(ej.TextInput,{"aria-label":j,autoComplete:"off",border:!1,clearButton:e_,fontSize:w,icon:eC,iconRight:eI,onChange:ef,onClear:ex,onKeyDown:eb,padding:2,placeholder:S,radius:2,ref:Z,spellCheck:!1,value:X})}),P[34]=ef,P[35]=X,P[36]=j,P[37]=e_,P[38]=eI,P[39]=S,P[40]=eC,P[41]=_):_=P[41];let eT=!!G,eR=2e3===er.length,eE=!!K,ek="subtle"===ew;return P[42]!==ed||P[43]!==ec||P[44]!==E||P[45]!==ep||P[46]!==ei||P[47]!==k||P[48]!==eg||P[49]!==el||P[50]!==ea||P[51]!==er||P[52]!==M||P[53]!==ew||P[54]!==em||P[55]!==eh||P[56]!==F||P[57]!==eu||P[58]!==Q||P[59]!==U||P[60]!==eT||P[61]!==eR||P[62]!==eE||P[63]!==ek||P[64]!==W?(I=(0,r.jsx)(aS,{childItemId:E,error:ei,filterIsSimpleTypeConstraint:eT,hasMaxItems:eR,hasSearchQuery:eE,isActive:k,isLazyLoading:el,isLoading:eg,autoRetry:ed,canRetry:ec,retryCount:eu,isRetrying:ea,isConnected:ep,items:er,layout:M,muted:ek,loadingVariant:ew,onEndReached:em,onRetry:eh,paneTitle:W,searchInputElement:Q,showIcons:U},F),P[42]=ed,P[43]=ec,P[44]=E,P[45]=ep,P[46]=ei,P[47]=k,P[48]=eg,P[49]=el,P[50]=ea,P[51]=er,P[52]=M,P[53]=ew,P[54]=em,P[55]=eh,P[56]=F,P[57]=eu,P[58]=Q,P[59]=U,P[60]=eT,P[61]=eR,P[62]=eE,P[63]=ek,P[64]=W,P[65]=I):I=P[65],P[66]!==_||P[67]!==I?(T=(0,r.jsxs)(r.Fragment,{children:[_,I]}),P[66]=_,P[67]=I,P[68]=T):T=P[68],T});function a$(e){return e.target.value}function aN(e){return""===e?(0,e3.of)(""):(0,te.timer)(300)}let aG=(0,a.memo)(e=>{let t,n,i,l,o,a,d,c,u,p=(0,s.c)(27),{contentAfter:h,index:g,initialValueTemplates:f,menuItemGroups:x,menuItems:b,setLayout:y,setSortOrder:v,title:j}=e;p[0]!==f?(t=void 0===f?[]:f,p[0]=f,p[1]=t):t=p[1];let w=t;p[2]!==x?(n=void 0===x?[]:x,p[2]=x,p[3]=n):n=p[3];let S=n;p[4]!==b?(i=void 0===b?[]:b,p[4]=b,p[5]=i):i=p[5];let C=i,{features:_}=iH(),{collapsed:I,isLast:T}=n9(),R=T&&!I?-1:0;p[6]!==y?(l=e=>{let{layout:t}=e;y(t)},p[6]=y,p[7]=l):l=p[7],p[8]!==v?(o=e=>{v(e)},p[8]=v,p[9]=o):o=p[9],p[10]!==l||p[11]!==o?(a={setLayout:l,setSortOrder:o},p[10]=l,p[11]=o,p[12]=a):a=p[12];let P=a;return p[13]!==P||p[14]!==w||p[15]!==S||p[16]!==C?(d=(0,r.jsx)(ao,{initialValueTemplateItems:w,actionHandlers:P,menuItemGroups:S,menuItems:C}),p[13]=P,p[14]=w,p[15]=S,p[16]=C,p[17]=d):d=p[17],p[18]!==_.backButton||p[19]!==g?(c=_.backButton&&g>0&&(0,r.jsx)(ev.Button,{as:s_,"data-as":"a",icon:m.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:"Back"}}),p[18]=_.backButton,p[19]=g,p[20]=c):c=p[20],p[21]!==h||p[22]!==d||p[23]!==c||p[24]!==R||p[25]!==j?(u=(0,r.jsx)(ev.TooltipDelayGroupProvider,{children:(0,r.jsx)(iv,{actions:d,backButton:c,contentAfter:h,tabIndex:R,title:j})}),p[21]=h,p[22]=d,p[23]=c,p[24]=R,p[25]=j,p[26]=u):u=p[26],u});function aU(e){let{row:t,table:n}=e,{selectedAnchor:i,setSelectedAnchor:l}=n.options.meta||{},o=(0,a.useCallback)(e=>{if(e.shiftKey&&null!=i){let e=t.index,l=e<i?e:i,o=e<i?i:e,r=n.getRowModel().flatRows.slice(l,o+1).map(({id:e})=>e),s=n.getSelectedRowModel().rows.map(({id:e})=>e);n.setRowSelection(()=>[...r,...s].reduce((e,t)=>({...e,[t]:!0}),{}))}else l&&(l(t.getIsSelected()?null:t.index),t.toggleSelected())},[i,t,l,n]);return(0,r.jsx)(ej.Checkbox,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:o})}function aq(e){let t,n,i,l,o,d,c,p,m,h,g,f,x,b,y,v,j,w=(0,s.c)(49),{children:S,table:C}=e,[_,I]=(0,a.useState)(null);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],w[0]=t):t=w[0];let[T,R]=(0,a.useState)(t);w[1]!==_?.state?(n=e=>{_?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),I(void 0===e?null:e),R([])},w[1]=_?.state,w[2]=n):n=w[2];let P=n;w[3]!==P?(i=()=>P(),w[3]=P,w[4]=i):i=w[4];let E=i;w[5]!==P||w[6]!==_||w[7]!==C?(l=e=>{if(!_)return;let t=C.getVisibleLeafColumns(),n=t.findIndex(e=>e.id===_.colId)+("left"===e?-1:1);n<0||n>=t.length||P({colId:t[n].id,rowIndex:_.rowIndex,state:"selected"})},w[5]=P,w[6]=_,w[7]=C,w[8]=l):l=w[8];let k=l;w[9]!==_?(o=e=>{_&&R(t=>{let{rowIndex:n}=_,i=t=>t+("down"===e?1:-1);if(!t.length){let e=i(n);return e<0?[]:[e]}let l=i(t[t.length-1]);return l<0?t:l===n?[]:t.includes(l)?t.slice(0,-1):[...t,l]})},w[9]=_,w[10]=o):o=w[10];let D=o;w[11]!==P?(d=(e,t)=>{P({colId:e,rowIndex:t,state:"selected"})},w[11]=P,w[12]=d):d=w[12];let F=d;w[13]!==P||w[14]!==_||w[15]!==T.length?(c=()=>{_&&(T.length?R([]):P("selected"===_.state?null:{..._,state:"selected"}))},w[13]=P,w[14]=_,w[15]=T.length,w[16]=c):c=w[16];let A=c;w[17]!==D||w[18]!==_||w[19]!==F?(p=(e,t)=>{if(!_)return;let n="ArrowDown"===t?"down":"up",i="down"===n?1:-1;if(e)D(n);else{let e=_.rowIndex+i;if(e<0)return;F(_.colId,e)}},w[17]=D,w[18]=_,w[19]=F,w[20]=p):p=w[20];let M=p;w[21]!==k||w[22]!==A||w[23]!==M||w[24]!==_?(m=e=>{if(!_)return;let{key:t,shiftKey:n}=e;switch(t){case"Shift":break;case"Escape":A();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),M(n,t);break;case"ArrowLeft":case"ArrowRight":"selected"===_.state&&(e.preventDefault(),k("ArrowLeft"===t?"left":"right"))}},w[21]=k,w[22]=A,w[23]=M,w[24]=_,w[25]=m):m=w[25];let V=m;w[26]!==E||w[27]!==_?(h=e=>{_&&(document.getElementById(`cell-${_.colId}-${_.rowIndex}`)?.contains(e.target)||E())},w[26]=E,w[27]=_,w[28]=h):h=w[28];let L=h;w[29]!==L||w[30]!==V||w[31]!==_?(g=()=>(_&&(document.addEventListener("keydown",V),document.addEventListener("click",L)),()=>{_&&(document.removeEventListener("keydown",V),document.removeEventListener("click",L))}),f=[L,V,_],w[29]=L,w[30]=V,w[31]=_,w[32]=g,w[33]=f):(g=w[32],f=w[33]),(0,a.useEffect)(g,f),w[34]===Symbol.for("react.memo_cache_sentinel")?(x=()=>I(aW),w[34]=x):x=w[34];let z=x;w[35]!==_||w[36]!==T?(b=(e,t)=>_?.colId!==e?null:_.rowIndex===t?"focused"===_.state?"focused":"selectedAnchor":T.includes(t)?"selectedRange":null,w[35]=_,w[36]=T,w[37]=b):b=w[37];let O=b;w[38]!==P||w[39]!==_?(y=()=>{_&&P({colId:_.colId,rowIndex:_.rowIndex+1,state:"selected"})},w[38]=P,w[39]=_,w[40]=y):y=w[40];let B=y;w[41]!==O||w[42]!==E||w[43]!==F||w[44]!==B?(v={focusAnchorCell:z,resetFocusSelection:E,setSelectedAnchorCell:F,getStateByCellId:O,submitFocusedCell:B},w[41]=O,w[42]=E,w[43]=F,w[44]=B,w[45]=v):v=w[45];let H=v;return w[46]!==S||w[47]!==H?(j=(0,r.jsx)(u.DocumentSheetListContext.Provider,{value:H,children:S}),w[46]=S,w[47]=H,w[48]=j):j=w[48],j}function aW(e){return e?{...e,state:"focused"}:null}aG.displayName="Memo(PaneHeader)";let aK=e_.styled.td`
  display: flex;
  overflow: hidden;
  box-sizing: border-box;
  width: ${({width:e})=>e}px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-bg-color);
`,aY=(0,e_.styled)(aK)`
  position: sticky;
  z-index: 2;
`;function aX(e){let{getValue:t,column:n,row:i,fieldType:l}=e,o=`cell-${n.id}-${i.index}`,[s,d]=(0,a.useState)(()=>t()),[c,p]=(0,a.useState)(!1),m=(0,a.useRef)(null),{focusAnchorCell:h,resetFocusSelection:g,setSelectedAnchorCell:f,getStateByCellId:x,submitFocusedCell:b}=(()=>{let e=(0,a.useContext)(u.DocumentSheetListContext);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e})(),y=x(n.id,i.index),v=(0,a.useCallback)(()=>{f(n.id,i.index),h()},[n.id,h,i.index,f]),{patchDocument:j}=e.table.options.meta||{},w=()=>{m.current?.focus(),m.current instanceof HTMLInputElement&&m.current.select()},S=(0,a.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===y&&w(),"focused"===y&&b())},[y,b]),C=(0,a.useCallback)(e=>{let t=e.clipboardData?.getData("Text");("string"==typeof t||"number"==typeof t)&&(d(t),j?.(i.id,n.id,t))},[n.id,j,i.id]),_=(0,a.useCallback)(()=>navigator.clipboard.writeText(s.toString()),[s]);(0,a.useEffect)(()=>(("selectedAnchor"===y||"focused"===y)&&document.addEventListener("keydown",S),("selectedAnchor"===y||"selectedRange"===y)&&document.addEventListener("paste",C),"selectedAnchor"===y&&document.addEventListener("copy",_),()=>{("selectedAnchor"===y||"focused"===y)&&document.removeEventListener("keydown",S),("selectedAnchor"===y||"selectedRange"===y)&&document.removeEventListener("paste",C),"selectedAnchor"===y&&document.removeEventListener("copy",_)}),[o,y,n.id,x,_,S,C,i.index]);let I=()=>"focused"===y?"2px solid blue":"selectedRange"===y?"1px solid green":"selectedAnchor"===y?"1px solid blue":"1px solid transparent",T={onFocus:v,onBlur:()=>{c&&(j?.(i.id,n.id,s),p(!1)),g()},onMouseDown:e=>{2===e.detail?w():(e.preventDefault(),f(n.id,i.index))},"aria-selected":!!y,"data-testid":o,id:o,ref:e=>{m.current=e}};return"boolean"===l.name?(0,r.jsxs)(ej.Select,{...T,onChange:()=>null,radius:0,style:{boxShadow:"none",border:I(),padding:0},value:JSON.stringify(s),children:[(0,r.jsx)("option",{value:"True",children:"True"}),(0,r.jsx)("option",{value:"False",children:"False"})]}):(0,r.jsx)(ej.TextInput,{...T,size:0,radius:0,border:!1,style:{border:I(),padding:"22px 16px"},value:"string"==typeof s||"number"==typeof s?s:JSON.stringify(s),onChange:e=>{p(!0),d(e.target.value)}})}function aJ(e){let t=e.column.getIsPinned(),n=t&&e.column.getIsLastColumn("left")?2:1;return(0,r.jsx)(t?aY:aK,{style:{left:e.column.getStart("left")??void 0,borderRight:`${n}px solid var(--card-border-color)`},width:e.column.getSize(),children:nI(e.column.columnDef.cell,e.getContext?.())},e.row.original._id+e.id)}let aQ=e=>{let{documentPreviewStore:t,row:n,schemaType:i}=e,l=(0,a.useMemo)(()=>(0,d.getPreviewStateObservable)(t,i,n.original._id),[t,n.original._id,i]),o=(0,d.useDocumentVersionInfo)(n.original._id),{snapshot:s,isLoading:c}=(0,eP.useObservable)(l,{snapshot:null,isLoading:!0});if(c)return(0,r.jsx)(ej.Text,{size:1,muted:!0,children:"Loading..."});let u=s?.title??"Untitled";return(0,r.jsxs)(ej.Flex,{align:"center",gap:3,children:[(0,r.jsx)(d.DocumentStatusIndicator,{draft:o.draft,published:o.published,versions:void 0}),(0,r.jsx)(ej.Text,{size:1,children:u})]})},aZ=(e,t)=>"function"==typeof e?{...t,accessorFn:e}:{...t,accessorKey:e},a0=["string","number","boolean"],a1=(e,t)=>e.fields.reduce((e,n)=>{let{type:i,name:l}=n;return a0.includes(i.name)?[...e,aZ(t?`${t}.${n.name}`:n.name,{id:t?`${t}_${n.name}`:n.name,header:n.type.title,enableHiding:!0,cell:e=>(0,r.jsx)(aX,{...e,fieldType:i})})]:"object"===i.name&&(0,eS.isObjectSchemaType)(i)&&!t?[...e,{header:l,columns:a1(i,n.name)}]:e},[]),a2=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?a2(e.columns):[]);function a3({table:e}){let{t}=(0,d.useTranslation)(),n=e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,i=(0,a.useCallback)(()=>{e.resetColumnVisibility()},[e]);return(0,r.jsx)(ev.MenuButton,{button:(0,r.jsx)(ev.Button,{mode:"bleed",text:t("sheet-list.edit-columns")}),id:"columns-control",menu:(0,r.jsx)(ej.Menu,{padding:3,paddingTop:4,style:{width:240},children:(0,r.jsxs)(ej.Flex,{direction:"column",height:"fill",gap:3,children:[(0,r.jsx)(ej.Text,{weight:"semibold",size:1,children:t("sheet-list.select-fields")}),(0,r.jsx)(ej.Flex,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,r.jsx)(ej.Stack,{children:e.getAllLeafColumns().filter(e=>e.getCanHide()).map(t=>{let i,l,o=t.id.replace(/ /g,"-");return(0,r.jsxs)(ej.Flex,{marginY:2,align:"center",children:[(0,r.jsx)(ej.Checkbox,{readOnly:(i=t.getIsVisible(),l=1===e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length,n&&!i||l&&i),checked:t.getIsVisible(),onChange:()=>{t.toggleVisibility()},id:`col-visibility-${o}`,style:{display:"block"}}),(0,r.jsx)(ej.Box,{flex:1,paddingLeft:3,children:(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)("label",{htmlFor:`col-visibility-${o}`,children:t.columnDef.header?.toString()})})})]},t.id)})})}),(0,r.jsx)(ev.Button,{width:"fill",mode:"ghost",text:t("sheet-list.reset-columns"),onClick:i})]})}),placement:"bottom",popover:{portal:!0}})}let a4=(0,e_.styled)(ej.Flex)`
  flex-shrink: 0;
`;function a5(){let e,t,n,i=(0,s.c)(5),{state:l}=(0,d.useSearchState)(),{filtersVisible:o}=l;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d.SearchHeader,{}),i[0]=e):e=i[0],i[1]!==o?(t=o&&(0,r.jsx)(d.Filters,{showTypeFilter:!1}),i[1]=o,i[2]=t):t=i[2],i[3]!==t?(n=(0,r.jsxs)(a4,{children:[e,t]}),i[3]=t,i[4]=n):n=i[4],n}let a6=e_.styled.th`
  margin: 16px;
  z-index: 1;
  padding: 22px 0px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-badge-default-bg-color);
  box-sizing: border-box;
  text-align: left;
  width: ${({width:e})=>e}px;
  max-width: ${({width:e})=>e}px;
`,a8=(0,e_.styled)(a6)`
  position: sticky;
  z-index: 2;
`,a7=e_.styled.div`
  visibility: hidden;

  ${a6}:hover & {
    visibility: visible;
  }
`;function a9(e){let{header:t,headerGroup:n}=e,{t:i}=(0,d.useTranslation)(),l=t.column.getIsPinned(),o=n.depth>0&&!t.column.parent?null:(0,r.jsx)(ej.Text,{size:1,weight:"semibold",textOverflow:"ellipsis",children:nI(t.column.columnDef.header,t.getContext())}),s=t.column.getCanHide()&&(0===n.depth?!t.column.columns.length:t.column.parent),a=l&&t.column.getIsLastColumn("left")?2:1;return(0,r.jsx)(l?a8:a6,{style:{left:t.column.getStart("left")??void 0,borderRight:`${a}px solid var(--card-border-color)`},"data-testid":`header-${t.id}`,width:t.getSize(),children:(0,r.jsxs)(ej.Flex,{justify:"space-between",marginX:2,align:"baseline",children:[(0,r.jsx)(ev.Tooltip,{delay:500,content:o,children:(0,r.jsx)(ej.Box,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:o})}),s&&(0,r.jsx)(a7,{children:(0,r.jsx)(ev.MenuButton,{button:(0,r.jsx)(ev.Button,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:m.EllipsisHorizontalIcon,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,r.jsx)(ej.Menu,{children:(0,r.jsx)(ev.MenuItem,{text:i("sheet-list.hide-field"),icon:m.CloseIcon,onClick:()=>t.column.toggleVisibility()})})})})]})},t.id)}function de({table:e}){return(0,r.jsx)(ev.TooltipDelayGroupProvider,{children:(0,r.jsxs)(ej.Flex,{gap:3,align:"center",children:[(0,r.jsx)(ev.Button,{onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),icon:m.DoubleChevronLeftIcon,tooltipProps:{content:"Go to first page"}}),(0,r.jsx)(ev.Button,{onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),icon:m.ChevronLeftIcon,tooltipProps:{content:"Go to previous page"}}),(0,r.jsxs)(ej.Text,{style:{whiteSpace:"nowrap"},children:[e.getState().pagination.pageIndex+1," of ",e.getPageCount()]}),(0,r.jsx)(ev.Button,{onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),icon:m.ChevronRightIcon,tooltipProps:{content:"Go to next page"}}),(0,r.jsx)(ev.Button,{onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),icon:m.DoubleChevronRightIcon,tooltipProps:{content:"Go to last page"}}),(0,r.jsx)("select",{value:e.getState().pagination.pageSize,onChange:t=>{e.setPageSize(Number(t.target.value))},children:[25,50,100].map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]})})}function dt(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,l={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:l}}}default:return e}}let dn={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},di=(0,e_.styled)(ej.Flex)`
  height: 100%;
`,dl=e_.styled.div`
  overflow: auto; //our scrollable table container
  position: relative; //needed for sticky header
`,dr=e_.styled.table`
  border-collapse: separate;
  border-spacing: 0;
  font-family: arial, sans-serif;
  white-space: nowrap;
  width: 100%;
  border: 1px solid lightgray;

  thead {
    display: grid;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  tr {
    padding: 0;
  }
  tr:last-child {
    border-bottom: none;
  }
`;function ds({documentSchemaType:e}){let{dispatch:t,state:n}=(0,d.useSearchState)(),{columns:i,initialColumnsVisibility:l}=function(e){let t=(0,d.useDocumentPreviewStore)(),n=(0,a.useMemo)(()=>e?[{id:"selected",enableHiding:!1,header:e=>(0,r.jsxs)(ej.Box,{children:[(0,r.jsx)(ej.Checkbox,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:aU},aZ("Preview",{enableHiding:!1,id:"Preview",cell:n=>(0,r.jsx)(aQ,{...n,documentPreviewStore:t,schemaType:e})}),...a1(e)]:[],[t,e]),[i]=(0,a.useMemo)(()=>a2(n).reduce(([e,t],n)=>{if(!n.id)throw Error("Column must have an id");let i=n.id;return n.enableHiding?5===t?[{...e,[i]:!1},t]:[{...e,[i]:!0},t+1]:[{...e,[i]:!0},t]},[{},0]),[n]);return{columns:n,initialColumnsVisibility:i}}(e),{data:o}=function(e){let t,n,i,l,o=(0,s.c)(12),{typeName:r}=e,{state:u}=(0,d.useSearchState)();o[0]!==u.result.hits?(t=new Map,u.result.hits.forEach(e=>t.set((0,c.getPublishedId)(e.hit._id),e.hit)),o[0]=u.result.hits,o[1]=t):t=o[1];let p=t,m=`_type == "${r}"`;o[2]!==m?(n={filter:m},o[2]=m,o[3]=n):n=o[3];let{data:h,isLoading:g}=function(e){let t,n,i,l,o,r,u,p,m,h,g=(0,s.c)(27),{filter:f,params:x,apiVersion:b}=e,y=`*[${f}][0...2000]`,v=b||d.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;g[0]!==v?(t={...d.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:v},g[0]=v,g[1]=t):t=g[1];let j=(0,d.useClient)(t);g[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},g[2]=n):n=g[2];let[w,S]=(0,a.useReducer)(dt,n),[C,_]=(0,a.useState)(null!==j),[I,T]=(0,a.useState)(null);g[3]!==y||g[4]!==j||g[5]!==x?(i=async()=>{if(!j)return void _(!1);try{let e=await j.fetch(y,x);S({type:"DOCUMENTS_SET",documents:e}),_(!1)}catch(e){T(e)}},g[3]=y,g[4]=j,g[5]=x,g[6]=i):i=g[6];let R=i;g[7]!==R?(l=async e=>{if("welcome"===e.type&&(_(!0),await R(),_(!1)),"reconnect"===e.type&&_(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&S({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&S({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&S({type:"DOCUMENT_UPDATED",payload:t})}}},g[7]=R,g[8]=l):l=g[8];let P=l;e:{let e;if(!j){let e;g[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,e3.of)(),g[9]=e):e=g[9],o=e;break e}if(g[10]!==y||g[11]!==j.observable||g[12]!==x){let t;g[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(T(e),(0,e3.of)(e)),g[14]=t):t=g[14],e=j.observable.listen(y,x,dn).pipe((0,e$.catchError)(t)),g[10]=y,g[11]=j.observable,g[12]=x,g[13]=e}else e=g[13];o=e}let E=o;g[15]!==P||g[16]!==E?(r=()=>{let e=E.subscribe(P);return()=>{e?.unsubscribe()}},u=[P,E],g[15]=P,g[16]=E,g[17]=r,g[18]=u):(r=g[17],u=g[18]),(0,a.useEffect)(r,u),g[19]!==w.documents?(p=Object.keys(w.documents).reduce((e,t)=>{let n=w.documents[t],i=n._id===(0,c.getDraftId)(n._id),l=i?n._id:(0,c.getDraftId)(n._id);return e[l]&&!i||(e[l]=n),e},{}),g[19]=w.documents,g[20]=p):p=g[20];let k=p;g[21]!==k?(m=Object.values(k),g[21]=k,g[22]=m):m=g[22];let D=m;return g[23]!==D||g[24]!==I||g[25]!==C?(h={data:D,isLoading:C,error:I},g[23]=D,g[24]=I,g[25]=C,g[26]=h):h=g[26],h}(n);if(o[4]!==h||o[5]!==p){let e;o[7]!==p?(e=e=>p.has((0,c.getPublishedId)(e._id)),o[7]=p,o[8]=e):e=o[8],i=h.filter(e),o[4]=h,o[5]=p,o[6]=i}else i=o[6];let f=i;return o[9]!==f||o[10]!==g?(l={data:f,isLoading:g},o[9]=f,o[10]=g,o[11]=l):l=o[11],l}({typeName:e.name}),[u,p]=(0,a.useState)(null),m=n.result.hits.length,h=function(e){let t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=a.useState(()=>({current:function(e){var t,n;let i=[...n_,...null!=(t=e._features)?t:[]],l={_features:i},o=l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(l)),{}),r={...null!=(n=e.initialState)?n:{}};l._features.forEach(e=>{var t;r=null!=(t=null==e.getInitialState?void 0:e.getInitialState(r))?t:r});let s=[],a=!1,d={_features:i,options:{...o,...e},initialState:r,_queue:e=>{s.push(e),a||(a=!0,Promise.resolve().then(()=>{for(;s.length;)s.shift()();a=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{l.setState(l.initialState)},setOptions:e=>{var t;t=tX(e,l.options),l.options=l.options.mergeOptions?l.options.mergeOptions(o,t):{...o,...t}},getState:()=>l.options.state,setState:e=>{null==l.options.onStateChange||l.options.onStateChange(e)},_getRowId:(e,t,n)=>{var i;return null!=(i=null==l.options.getRowId?void 0:l.options.getRowId(e,t,n))?i:`${n?[n.id,t].join("."):t}`},getCoreRowModel:()=>(l._getCoreRowModel||(l._getCoreRowModel=l.options.getCoreRowModel(l)),l._getCoreRowModel()),getRowModel:()=>l.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?l.getPrePaginationRowModel():l.getRowModel()).rowsById[e];if(!n&&!(n=l.getCoreRowModel().rowsById[e]))throw Error();return n},_getDefaultColumnDef:tZ(()=>[l.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{let t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},t0(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>l.options.columns,getAllColumns:tZ(()=>[l._getColumnDefs()],e=>{let t=function(e,n,i){return void 0===i&&(i=0),e.map(e=>{let o=function(e,t,n,i){var l,o;let r,s={...e._getDefaultColumnDef(),...t},a=s.accessorKey,d=null!=(l=null!=(o=s.id)?o:a?"function"==typeof String.prototype.replaceAll?a.replaceAll(".","_"):a.replace(/\./g,"_"):void 0)?l:"string"==typeof s.header?s.header:void 0;if(s.accessorFn?r=s.accessorFn:a&&(r=a.includes(".")?e=>{let t=e;for(let e of a.split(".")){var n;t=null==(n=t)?void 0:n[e]}return t}:e=>e[s.accessorKey]),!d)throw Error();let c={id:`${String(d)}`,accessorFn:r,parent:i,depth:n,columnDef:s,columns:[],getFlatColumns:tZ(()=>[!0],()=>{var e;return[c,...null==(e=c.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},t0(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:tZ(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=c.columns)&&t.length?e(c.columns.flatMap(e=>e.getLeafColumns())):[c]},t0(e.options,"debugColumns","column.getLeafColumns"))};for(let t of e._features)null==t.createColumn||t.createColumn(c,e);return c}(l,e,i,n);return o.columns=e.columns?t(e.columns,o,i+1):[],o})};return t(e)},t0(e,"debugColumns","getAllColumns")),getAllFlatColumns:tZ(()=>[l.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),t0(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:tZ(()=>[l.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),t0(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:tZ(()=>[l.getAllColumns(),l._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),t0(e,"debugColumns","getAllLeafColumns")),getColumn:e=>l._getAllFlatColumnsById()[e]};Object.assign(l,d);for(let e=0;e<l._features.length;e++){let t=l._features[e];null==t||null==t.createTable||t.createTable(l)}return l}(t)})),[i,l]=a.useState(()=>n.current.initialState);return n.current.setOptions(t=>({...t,...e,state:{...i,...e.state},onStateChange:t=>{l(t),null==e.onStateChange||e.onStateChange(t)}})),n.current}({data:o,columns:i,getCoreRowModel:e=>tZ(()=>[e.options.data],t=>{let n={rows:[],flatRows:[],rowsById:{}},i=function(t,l,o){void 0===l&&(l=0);let r=[];for(let a=0;a<t.length;a++){let d=t4(e,e._getRowId(t[a],a,o),t[a],a,l,void 0,null==o?void 0:o.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,r.push(d),e.options.getSubRows){var s;d.originalSubRows=e.options.getSubRows(t[a],a),null!=(s=d.originalSubRows)&&s.length&&(d.subRows=i(d.originalSubRows,l+1,d))}}return r};return n.rows=i(t),n},t0(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex())),getFilteredRowModel:e=>tZ(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,i)=>{var l,o,r,s,a,d,c,u,p,m;let h,g,f,x,b,y,v,j,w,S;if(!t.rows.length||!(null!=n&&n.length)&&!i){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}let C=[],_=[];(null!=n?n:[]).forEach(t=>{var n;let i=e.getColumn(t.id);if(!i)return;let l=i.getFilterFn();l&&C.push({id:t.id,filterFn:l,resolvedValue:null!=(n=null==l.resolveFilterValue?void 0:l.resolveFilterValue(t.value))?n:t.value})});let I=(null!=n?n:[]).map(e=>e.id),T=e.getGlobalFilterFn(),R=e.getAllLeafColumns().filter(e=>e.getCanGlobalFilter());i&&T&&R.length&&(I.push("__global__"),R.forEach(e=>{var t;_.push({id:e.id,filterFn:T,resolvedValue:null!=(t=null==T.resolveFilterValue?void 0:T.resolveFilterValue(i))?t:i})}));for(let e=0;e<t.flatRows.length;e++){let n=t.flatRows[e];if(n.columnFilters={},C.length)for(let e=0;e<C.length;e++){let t=(h=C[e]).id;n.columnFilters[t]=h.filterFn(n,t,h.resolvedValue,e=>{n.columnFiltersMeta[t]=e})}if(_.length){for(let e=0;e<_.length;e++){let t=(g=_[e]).id;if(g.filterFn(n,t,g.resolvedValue,e=>{n.columnFiltersMeta[t]=e})){n.columnFilters.__global__=!0;break}}!0!==n.columnFilters.__global__&&(n.columnFilters.__global__=!1)}}return l=t.rows,o=e=>{for(let t=0;t<I.length;t++)if(!1===e.columnFilters[I[t]])return!1;return!0},e.options.filterFromLeafRows?(r=l,s=o,f=[],x={},b=null!=(d=(a=e).options.maxLeafRowFilterDepth)?d:100,{rows:(y=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){var i;let o=e[l],r=t4(a,o.id,o.original,o.index,o.depth,void 0,o.parentId);if(r.columnFilters=o.columnFilters,null!=(i=o.subRows)&&i.length&&t<b){if(r.subRows=y(o.subRows,t+1),s(o=r)&&!r.subRows.length||s(o)||r.subRows.length){n.push(o),x[o.id]=o,f.push(o);continue}}else s(o=r)&&(n.push(o),x[o.id]=o,f.push(o))}return n})(r),flatRows:f,rowsById:x}):(c=l,u=o,v=[],j={},w=null!=(m=(p=e).options.maxLeafRowFilterDepth)?m:100,{rows:(S=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){let o=e[l];if(u(o)){var i;if(null!=(i=o.subRows)&&i.length&&t<w){let e=t4(p,o.id,o.original,o.index,o.depth,void 0,o.parentId);e.subRows=S(o.subRows,t+1),o=e}n.push(o),v.push(o),j[o.id]=o}}return n})(c),flatRows:v,rowsById:j})},t0(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex())),getPaginationRowModel:e=>tZ(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,n)=>{let i;if(!n.rows.length)return n;let{pageSize:l,pageIndex:o}=t,{rows:r,flatRows:s,rowsById:a}=n,d=l*o;if(r=r.slice(d,d+l),e.options.paginateExpandedRows)i={rows:r,flatRows:s,rowsById:a};else{var c;let e,t;c={rows:r,flatRows:s,rowsById:a},e=[],t=n=>{var i;e.push(n),null!=(i=n.subRows)&&i.length&&n.getIsExpanded()&&n.subRows.forEach(t)},c.rows.forEach(t),i={rows:e,flatRows:c.flatRows,rowsById:c.rowsById}}i.flatRows=[];let u=e=>{i.flatRows.push(e),e.subRows.length&&e.subRows.forEach(u)};return i.rows.forEach(u),i},t0(e.options,"debugTable","getPaginationRowModel")),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:l},getRowId:e=>e._id,meta:{selectedAnchor:u,setSelectedAnchor:p,patchDocument:(e,t,n)=>null}}),{rows:g}=h.getRowModel();(0,a.useEffect)(()=>(t({type:"TERMS_TYPE_ADD",schemaType:e}),()=>{t({type:"TERMS_TYPE_REMOVE",schemaType:e})}),[e,t]);let f=(0,a.useCallback)(e=>(0,r.jsx)(ej.Box,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,r.jsx)(aJ,{...t},e.original._id+t.id))},e.original._id+e.id),[]),x=`Total: ${m} rows, showing ${g.length} rows`;return(0,r.jsxs)(di,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,r.jsxs)(ej.Flex,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,r.jsxs)(ej.Flex,{direction:"row",align:"center",children:[(0,r.jsx)(a5,{}),(0,r.jsx)(ej.Text,{size:0,muted:!0,children:x})]}),(0,r.jsx)(a3,{table:h})]}),(0,r.jsx)(dl,{children:(0,r.jsx)(aq,{table:h,children:(0,r.jsxs)(dr,{children:[(0,r.jsx)("thead",{children:h.getHeaderGroups().map(e=>(0,r.jsx)(ej.Box,{as:"tr",children:e.headers.map(t=>(0,r.jsx)(a9,{header:t,headerGroup:e},t.id))},e.id))}),(0,r.jsx)("tbody",{children:h.getRowModel().rows.map(f)})]})})}),(0,r.jsx)(ej.Flex,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,r.jsx)(de,{table:h})})]})}function da(e){let t,n,i,l=(0,s.c)(7),o=(0,d.useSchema)(),a=e.pane.schemaTypeName;if(l[0]!==o||l[1]!==a?(n=!(t=o.get(a))||!(0,eS.isDocumentSchemaType)(t),l[0]=o,l[1]=a,l[2]=t,l[3]=n):(t=l[2],n=l[3]),n)throw Error(`Schema type "${a}" not found or not a document schema`);return l[4]!==e||l[5]!==t?(i=(0,r.jsx)(d.SearchProvider,{children:(0,r.jsx)(ds,{...e,documentSchemaType:t})}),l[4]=e,l[5]=t,l[6]=i):i=l[6],i}function dd(e){let[t,n]=(0,a.useState)(e);return(0,ez.default)(t,e)?t:(n(e),e)}let dc=(0,a.memo)(function(e){let t,n,i,l,o,a,c,u,p,m=(0,s.c)(36),{index:h,isSelected:g,pane:f,paneKey:x}=e,{name:b}=(0,d.useSource)(),{defaultLayout:y,initialValueTemplates:v,menuItemGroups:j,menuItems:w,options:S}=f,C=void 0===v?d.EMPTY_ARRAY:v,{defaultOrdering:_,filter:I}=S,T=void 0===_?d.EMPTY_ARRAY:_,R=dd(S.params||ab),P=f.source;e:{let e;m[0]!==I||m[1]!==R?(e=a_(I,R),m[0]=I,m[1]=R,m[2]=e):e=m[2];let n=e;if(n?.length===1){t=n[0];break e}t=null}let E=t,[k,D]=i1("layout",E??f.id,void 0===y?"default":y),{title:F}=(0,d.useI18nText)(f);m[3]!==T?(n=T?.length>0?{by:T}:ax,m[3]=T,m[4]=n):n=m[4];let A=n,[M,V]=i1("sort-order",E??f.id,A);m[5]!==k||m[6]!==w||m[7]!==M?(i=(e=>{let{menuItems:t,sortOrderRaw:n,layout:i}=e;return t?.map(e=>e.params?.layout?{...e,selected:i===e.params?.layout}:e?.params?.by?{...e,selected:(0,eV.isEqual)(n?.by,e?.params?.by||d.EMPTY_ARRAY)}:{...e,selected:!1})})({menuItems:w,sortOrderRaw:M,layout:k}),m[5]=k,m[6]=w,m[7]=M,m[8]=i):i=m[8];let L=i,z="sheetList"===k;m[9]!==z||m[10]!==k||m[11]!==e||m[12]!==M?(l=z?(0,r.jsx)(da,{...e},e.pane.id):(0,r.jsx)(aH,{...e,sortOrder:M,layout:k}),m[9]=z,m[10]=k,m[11]=e,m[12]=M,m[13]=l):l=m[13];let O=l,B=P||b;return m[14]!==z?(o=z?{}:{currentMaxWidth:350,maxWidth:640},m[14]=z,m[15]=o):o=m[15],m[16]!==f.source?(a=!1,m[16]=f.source,m[17]=a):a=m[17],m[18]!==h||m[19]!==C||m[20]!==j||m[21]!==L||m[22]!==D||m[23]!==V||m[24]!==F?(c=(0,r.jsx)(aG,{index:h,initialValueTemplates:C,menuItemGroups:j,menuItems:L,setLayout:D,setSortOrder:V,title:F}),m[18]=h,m[19]=C,m[20]=j,m[21]=L,m[22]=D,m[23]=V,m[24]=F,m[25]=c):c=m[25],m[26]!==g||m[27]!==x||m[28]!==O||m[29]!==c||m[30]!==o||m[31]!==a?(u=(0,r.jsxs)(n8,{"data-ui":"DocumentListPane",id:x,minWidth:320,...o,selected:g,children:[a,c,O]}),m[26]=g,m[27]=x,m[28]=O,m[29]=c,m[30]=o,m[31]=a,m[32]=u):u=m[32],m[33]!==u||m[34]!==B?(p=(0,r.jsx)(d.SourceProvider,{name:B,children:u}),m[33]=u,m[34]=B,m[35]=p):p=m[35],p});dc.displayName="Memo(PaneContainer)";let du=e=>{let{liveEditSchemaType:t,version:n}=e;return t&&!n?{label:"Live",color:"danger"}:null};du.displayName="LiveEditBadge";let dp={activePanes:[]};function dm(e){dp.activePanes=e}function dh(e,t,n,i){let l=n?.panes||[],o=dp.activePanes||[],r=t.id||(0,eC.uuid)();for(let n=o.length-1;n>=0;n--){let s=o[n];if("object"==typeof s&&(s.canHandleIntent?.(e,t,{pane:s,index:n})||"documentList"===s.type&&s.schemaTypeName===t.type&&"_type == $type"===s.options.filter)){let o=function(e,{template:t,version:n,inspect:i,comment:l,task:o}){switch(e){case"create":return{template:t,version:n};case"edit":return{inspect:i,comment:l,task:o};default:return lJ}}(e,t);return{panes:l.slice(0,n).concat([[{id:r,params:o,payload:i}]])}}}return{intent:e,params:t,payload:i}}let dg=(0,e_.styled)(d.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,df=(0,e_.styled)(ej.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`;function dx(e){let t,n,i,l,o,c,u,p,m,h,g,f,x=(0,s.c)(39),{showChanges:b}=e,{documentId:y,schemaType:v,timelineError:j,timelineStore:w,value:S}=iM(),{selectedReleaseId:_}=(0,d.usePerspective)(),[I,T]=(0,a.useState)(null),R=(0,d.useTimelineSelector)(w,dS),P=(0,d.useTimelineSelector)(w,dw),E=(0,d.useTimelineSelector)(w,dj),k=(0,d.useTimelineSelector)(w,dv),D=(0,d.useTimelineSelector)(w,dy),F="loading"===k,A=!E,{t:M}=(0,d.useTranslation)(C);x[0]!==P||x[1]!==y||x[2]!==A||x[3]!==v||x[4]!==S?(t={documentId:y,schemaType:v,FieldWrapper:db,rootDiff:P,isComparingCurrent:A,value:S,showFromValue:!0},x[0]=P,x[1]=y,x[2]=A,x[3]=v,x[4]=S,x[5]=t):t=x[5];let V=t;if(_){let e;return x[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ej.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,r.jsx)(ej.Card,{flex:1,padding:2,paddingTop:0,children:(0,r.jsx)(rx,{versionError:!0})})}),x[6]=e):e=x[6],e}return x[7]!==M?(n=M("changes.from.label"),x[7]=M,x[8]=n):n=x[8],x[9]!==n?(i=(0,r.jsx)(ej.Text,{size:1,muted:!0,children:n}),x[9]=n,x[10]=i):i=x[10],x[11]!==D?(l=(0,r.jsx)(rv,{mode:"since",chunk:D,placement:"bottom-start"}),x[11]=D,x[12]=l):l=x[12],x[13]!==M?(o=M("changes.to.label"),x[13]=M,x[14]=o):o=x[14],x[15]!==o?(c=(0,r.jsx)(ej.Text,{size:1,muted:!0,children:o}),x[15]=o,x[16]=c):c=x[16],x[17]!==R?(u=(0,r.jsx)(rv,{chunk:R,mode:"rev",placement:"bottom-end"}),x[17]=R,x[18]=u):u=x[18],x[19]!==i||x[20]!==l||x[21]!==c||x[22]!==u?(p=(0,r.jsx)(ej.Box,{padding:3,children:(0,r.jsxs)(df,{paddingX:2,paddingBottom:2,children:[i,l,c,u]})}),x[19]=i,x[20]=l,x[21]=c,x[22]=u,x[23]=p):p=x[23],x[24]!==P||x[25]!==V||x[26]!==F||x[27]!==v||x[28]!==b||x[29]!==j?(m=b&&(0,r.jsx)(dC,{diff:P,documentContext:V,error:j,loading:F,schemaType:v}),x[24]=P,x[25]=V,x[26]=F,x[27]=v,x[28]=b,x[29]=j,x[30]=m):m=x[30],x[31]!==m?(h=(0,r.jsx)(dg,{"data-ui":"Scroller",ref:T,children:(0,r.jsx)(ej.Box,{flex:1,paddingX:3,height:"fill",children:m})}),x[31]=m,x[32]=h):h=x[32],x[33]!==I||x[34]!==h?(g=(0,r.jsx)(ej.Card,{flex:1,paddingX:2,paddingY:2,children:(0,r.jsx)(ej.BoundaryElementProvider,{element:I,children:h})}),x[33]=I,x[34]=h,x[35]=g):g=x[35],x[36]!==g||x[37]!==p?(f=(0,r.jsxs)(ej.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[p,g]}),x[36]=g,x[37]=p,x[38]=f):f=x[38],f}function db(e){return(0,r.jsx)(d.ChangeFieldWrapper,{...e,hasRevertHover:!1})}function dy(e){return e.sinceTime}function dv(e){return e.selectionState}function dj(e){return e.onOlderRevision}function dw(e){return e.diff}function dS(e){return e.revTime}function dC(e){let t,n,i=(0,s.c)(9),{error:l,diff:o,documentContext:a,loading:c,schemaType:p}=e;if(l){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d.NoChanges,{}),i[0]=e):e=i[0],e}if(c){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d.LoadingBlock,{showText:!0}),i[1]=e):e=i[1],e}if(!o){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d.NoChanges,{}),i[2]=e):e=i[2],e}return i[3]!==o||i[4]!==p?(t=(0,r.jsx)(d.ChangeList,{diff:o,schemaType:p}),i[3]=o,i[4]=p,i[5]=t):t=i[5],i[6]!==a||i[7]!==t?(n=(0,r.jsx)(u.DocumentChangeContext.Provider,{value:a,children:t}),i[6]=a,i[7]=t,i[8]=n):n=i[8],n}function d_(e){let t,n,i,l,o,a,c,u,p=(0,s.c)(27),{event:m,isSelected:h,onSelect:g,optionsMenu:f}=e,{t:x}=(0,d.useTranslation)("studio");p[0]!==m?(t=!(0,d.isDeleteDocumentVersionEvent)(m)&&!(0,d.isDeleteDocumentGroupEvent)(m)&&!(0,d.isUnpublishDocumentEvent)(m)&&!(0,d.isScheduleDocumentVersionEvent)(m)&&!(0,d.isUnscheduleDocumentVersionEvent)(m),p[0]=m,p[1]=t):t=p[1];let b=t;p[2]!==m||p[3]!==b||p[4]!==g?(n=e=>{e.preventDefault(),e.stopPropagation(),b&&g(m)},p[2]=m,p[3]=b,p[4]=g,p[5]=n):n=p[5];let y=n;p[6]!==b||p[7]!==x?(i=b?"":x("changes.not-selectable"),p[6]=b,p[7]=x,p[8]=i):i=p[8];let v=b?"button":"div",j=b?"pointer":"default";return p[9]!==j?(l={cursor:j,width:"100%"},p[9]=j,p[10]=l):l=p[10],p[11]!==m?(o=(0,r.jsx)(d.Event,{event:m,showChangesBy:"tooltip"}),p[11]=m,p[12]=o):o=p[12],p[13]!==m.timestamp||p[14]!==y||p[15]!==h||p[16]!==v||p[17]!==l||p[18]!==o?(a=(0,r.jsx)(ej.Card,{as:v,onClick:y,padding:2,pressed:h,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":m.timestamp,style:l,children:o}),p[13]=m.timestamp,p[14]=y,p[15]=h,p[16]=v,p[17]=l,p[18]=o,p[19]=a):a=p[19],p[20]!==b||p[21]!==i||p[22]!==a?(c=(0,r.jsx)(ev.Tooltip,{content:i,disabled:b,children:a}),p[20]=b,p[21]=i,p[22]=a,p[23]=c):c=p[23],p[24]!==f||p[25]!==c?(u=(0,r.jsxs)(ej.Flex,{gap:1,children:[c,f]}),p[24]=f,p[25]=c,p[26]=u):u=p[26],u}function dI(e){let t,n,i,l,o,a,u,p,m,h,g,f,x=(0,s.c)(44),{event:b}=e,{t:y}=(0,d.useTranslation)(C),{t:v}=(0,d.useTranslation)(),j=(0,ej.usePortal)(),{params:w,setParams:S}=l_(),_=(0,d.useSetPerspective)(),{document:I}=(0,d.useWorkspace)(),{drafts:T}=I,{enabled:R}=T;x[0]!==b.id||x[1]!==b.versionId||x[2]!==b.versionRevisionId||x[3]!==w||x[4]!==S?(t=()=>{S({...w,rev:b.versionRevisionId||"@lastPublished",since:void 0,historyEvent:b.id,historyVersion:(0,c.getVersionFromId)(b.versionId)})},x[0]=b.id,x[1]=b.versionId,x[2]=b.versionRevisionId,x[3]=w,x[4]=S,x[5]=t):t=x[5];let P=t;x[6]!==b.versionRevisionId||x[7]!==R||x[8]!==w||x[9]!==S||x[10]!==_?(n=()=>{S({...w,rev:b.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{_(R?"drafts":"published")},100)},x[6]=b.versionRevisionId,x[7]=R,x[8]=w,x[9]=S,x[10]=_,x[11]=n):n=x[11];let E=n;x[12]!==b.release?(i=e=>{let{children:t}=e;return(0,r.jsx)(d.VersionInlineBadge,{$tone:b.release?(0,d.isReleaseDocument)(b.release)?(0,d.getReleaseTone)(b.release):"default":void 0,children:t})},x[12]=b.release,x[13]=i):i=x[13];let k=i;x[14]!==b.release?(l=b.release&&!(0,d.isReleaseDocument)(b.release),x[14]=b.release,x[15]=l):l=x[15];let D=l,F=`timeline-item-menu-button-${b.versionId}`;x[16]!==y?(o=y("timeline-item.menu-button.aria-label"),x[16]=y,x[17]=o):o=x[17],x[18]!==b.release||x[19]!==D||x[20]!==y?(a=D?y("timeline-item.not-found-release.tooltip",{releaseId:b.release?._id?(0,d.getReleaseIdFromReleaseDocumentId)(b.release._id):void 0}):y("timeline-item.menu-button.tooltip"),x[18]=b.release,x[19]=D,x[20]=y,x[21]=a):a=x[21],x[22]!==a?(u={content:a},x[22]=a,x[23]=u):u=x[23],x[24]!==D||x[25]!==o||x[26]!==u?(p=(0,r.jsx)(d.ContextMenuButton,{"aria-label":o,tooltipProps:u,disabled:D}),x[24]=D,x[25]=o,x[26]=u,x[27]=p):p=x[27],x[28]!==k||x[29]!==b.release||x[30]!==b.versionRevisionId||x[31]!==E||x[32]!==P||x[33]!==y||x[34]!==v?(m=(0,r.jsx)(ej.Menu,{padding:1,children:b.release?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eE.IntentLink,{intent:d.RELEASES_INTENT,params:{id:(0,d.getReleaseIdFromReleaseDocumentId)(b.release._id)},style:{textDecoration:"none"},children:(0,r.jsx)(ej.MenuItem,{padding:3,children:(0,r.jsx)(ej.Flex,{align:"center",justify:"flex-start",children:(0,r.jsx)(ej.Text,{size:1,style:{textDecoration:"none"},children:(0,r.jsx)(d.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,r.jsx)(k,{children:t})}},i18nKey:"events.open.release",values:{releaseTitle:b.release.metadata?.title||v("release.placeholder-untitled-release")},t:y})})})})}),(0,r.jsx)(ej.MenuItem,{onClick:P,children:(0,r.jsx)(ej.Flex,{align:"center",justify:"flex-start",children:(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(d.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,r.jsx)(k,{children:t})}},i18nKey:"events.inspect.release",values:{releaseTitle:b.release.metadata?.title||v("release.placeholder-untitled-release")},t:y})})})})]}):(0,r.jsx)(ej.MenuItem,{onClick:E,disabled:!b.versionRevisionId,children:(0,r.jsx)(ej.Flex,{align:"center",children:(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(d.Translate,{components:{VersionBadge:dT},i18nKey:"events.open.draft",t:y})})})})}),x[28]=k,x[29]=b.release,x[30]=b.versionRevisionId,x[31]=E,x[32]=P,x[33]=y,x[34]=v,x[35]=m):m=x[35];let A=!j.elements?.[ry]||ry;return x[36]===Symbol.for("react.memo_cache_sentinel")?(h=["bottom-end","bottom-start"],x[36]=h):h=x[36],x[37]!==A?(g={portal:A,placement:"bottom",fallbackPlacements:h},x[37]=A,x[38]=g):g=x[38],x[39]!==p||x[40]!==m||x[41]!==g||x[42]!==F?(f=(0,r.jsx)(ev.MenuButton,{id:F,button:p,menu:m,popover:g}),x[39]=p,x[40]=m,x[41]=g,x[42]=F,x[43]=f):f=x[43],f}function dT(e){let{children:t}=e;return(0,r.jsx)(d.VersionInlineBadge,{$tone:"caution",children:t})}let dR=eT.motion.create(ej.Box),dP={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},dE=e=>{let t,n,i,l,o,c,u,p,m,h,g,f,x=(0,s.c)(38),{events:b,hasMoreEvents:y,selectedEventId:v,onLoadMore:j,onSelect:w,listMaxHeight:S,fetchEventChildren:C}=e,_=void 0===S?"calc(100vh - 280px)":S,[I,T]=(0,a.useState)(!1),{t:R}=(0,d.useTranslation)("studio");x[0]!==b||x[1]!==v?(t=()=>{if(v){let e=b.find(e=>e.id===v);if(e&&"parentId"in e&&e.parentId)return new Set([e.parentId])}return new Set},x[0]=b,x[1]=v,x[2]=t):t=x[2];let[P,E]=(0,a.useState)(t);x[3]===Symbol.for("react.memo_cache_sentinel")?(n=new Set,x[3]=n):n=x[3];let[k,D]=(0,a.useState)(n);x[4]!==b||x[5]!==P?(i=b.filter(e=>(0,d.isCreateDocumentVersionEvent)(e)&&e.parentId?b[b.length-1].id===e.id||P.has(e.parentId):!(0,d.isEditDocumentVersionEvent)(e)||!e.parentId||P.has(e.parentId)),x[4]=b,x[5]=P,x[6]=i):i=x[6];let F=i;x[7]!==C?(l=e=>async()=>{let t=e.id,n=!1;E(e=>{let i=new Set(e);return e.has(t)?i.delete(t):(n=!0,i.add(t)),i}),n&&(D(e=>{let n=new Set(e);return n.add(t),n}),await C(e),D(e=>{let n=new Set(e);return n.delete(t),n}))},x[7]=C,x[8]=l):l=x[8];let A=l;x[9]!==w?(o=e=>{w(e)},x[9]=w,x[10]=o):o=x[10];let M=o;x[11]!==P||x[12]!==A?(c=e=>{let t=(0,d.getDocumentVariantType)(e.documentId);return(0,d.isPublishDocumentVersionEvent)(e)&&"published"===t?(0,r.jsx)(dI,{event:e}):(0,d.isPublishDocumentVersionEvent)(e)&&"draft"===t&&e.creationEvent||(0,d.isDeleteDocumentVersionEvent)(e)&&e.creationEvent?(0,r.jsx)(o9,{isExpanded:P.has(e.id),onExpand:A(e)}):null},x[11]=P,x[12]=A,x[13]=c):c=x[13];let V=c;x[14]!==F.length||x[15]!==k||x[16]!==M||x[17]!==y||x[18]!==V||x[19]!==v?(u=(e,t)=>{let{activeIndex:n}=t,i=(0,d.isCreateDocumentVersionEvent)(e)&&e.parentId&&k.has(e.parentId),l=n===F.length-1;return i?(0,r.jsx)(dR,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,r.jsx)(ej.Flex,{align:"center",justify:"center",style:{height:57},children:(0,r.jsx)(ej.Spinner,{})})}):(0,r.jsxs)(dR,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in e?dP:void 0,paddingLeft:((0,d.isEditDocumentVersionEvent)(e)||(0,d.isCreateDocumentVersionEvent)(e))&&e.parentId&&!l?4:1,children:[(0,r.jsx)(d_,{event:e,isSelected:e.id===v,onSelect:M,optionsMenu:V(e)}),l&&y&&(0,r.jsx)(d.LoadingBlock,{})]},e.timestamp)},x[14]=F.length,x[15]=k,x[16]=M,x[17]=y,x[18]=V,x[19]=v,x[20]=u):u=x[20];let L=u;if(x[21]===Symbol.for("react.memo_cache_sentinel")?(m=()=>T(!0),p=[],x[21]=p,x[22]=m):(p=x[21],m=x[22]),(0,a.useEffect)(m,p),x[23]!==F||x[24]!==v){let e;x[26]!==v?(e=e=>e.id===v,x[26]=v,x[27]=e):e=x[27],h=F.findIndex(e),x[23]=F,x[24]=v,x[25]=h}else h=x[25];let z=h,O=!z||I;return x[28]!==F||x[29]!==_||x[30]!==j||x[31]!==L||x[32]!==z||x[33]!==R?(g=F.length>0?(0,r.jsx)(rt,{direction:"column",$maxHeight:_,id:"timeline-list-wrapper",children:(0,r.jsx)(d.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:R("timeline.list.aria-label"),autoFocus:"list",initialIndex:z,initialScrollAlign:"center",itemHeight:57,items:F,onEndReached:j,onEndReachedIndexOffset:20,overscan:5,renderItem:L,wrapAround:!1})}):(0,r.jsxs)(ej.Stack,{padding:3,space:3,children:[(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:R("timeline.error.no-document-history-title")}),(0,r.jsx)(ej.Text,{muted:!0,size:1,children:R("timeline.error.no-document-history-description")})]}),x[28]=F,x[29]=_,x[30]=j,x[31]=L,x[32]=z,x[33]=R,x[34]=g):g=x[34],x[35]!==O||x[36]!==g?(f=(0,r.jsx)(rn,{$visible:O,"data-ui":"timeline",children:g}),x[35]=O,x[36]=g,x[37]=f):f=x[37],f};dE.displayName="EventsTimeline";let dk=(0,e_.styled)(ev.Popover)`
  overflow: hidden;
  overflow: clip;
`,dD={timestamp:{dateStyle:"medium",timeStyle:"short"}};function dF(e){let t,n,i,l,o,c,u,p,h,g,f,x,b,y,v,j,w=(0,s.c)(58),{event:S,events:C,mode:_,placement:I}=e,{setTimelineRange:T}=iM(),[R,P]=(0,a.useState)(!1),[E,k]=(0,a.useState)(null),[D,F]=(0,a.useState)(null),A=(0,ew.useToast)(),{nextCursor:M,loading:V,error:L,findRangeForRevision:z,findRangeForSince:O,loadMoreEvents:B,expandEvent:H}=(0,d.useEvents)(),{t:$}=(0,d.useTranslation)("studio");w[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{P(!0)},w[0]=t):t=w[0];let N=t;w[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{P(!1)},w[1]=n):n=w[1];let G=n;w[2]!==E||w[3]!==R?(i=e=>{R&&("Escape"===e.key||"Tab"===e.key)&&(G(),E?.focus())},w[2]=E,w[3]=R,w[4]=i):i=w[4],(0,ej.useGlobalKeyDown)(i),w[5]!==E||w[6]!==D?(l=()=>[E,D],w[5]=E,w[6]=D,w[7]=l):l=w[7],(0,ej.useClickOutsideEvent)(R&&G,l),w[8]!==z||w[9]!==T||w[10]!==$||w[11]!==A?(o=e=>{try{(()=>{if((0,d.isDeleteDocumentVersionEvent)(e)||(0,d.isDeleteDocumentGroupEvent)(e)||(0,d.isUnpublishDocumentEvent)(e)||(0,d.isScheduleDocumentVersionEvent)(e)||(0,d.isUnscheduleDocumentVersionEvent)(e))return console.error("Event is not selectable");let[t,n]=z(e?.id);T(t,n),G()})()}catch(e){A.push({closable:!0,description:e.message,status:"error",title:$("timeline.error.unable-to-load-revision")})}},w[8]=z,w[9]=T,w[10]=$,w[11]=A,w[12]=o):o=w[12];let U=o;w[13]!==O||w[14]!==T||w[15]!==$||w[16]!==A?(c=e=>{try{let[t,n]=O(e.id);T(t,n),G()}catch(e){A.push({closable:!0,description:e.message,status:"error",title:$("timeline.error.unable-to-load-revision")})}},w[13]=O,w[14]=T,w[15]=$,w[16]=A,w[17]=c):c=w[17];let q=c;w[18]!==B||w[19]!==V||w[20]!==M?(u=()=>{!V&&M&&B()},w[18]=B,w[19]=V,w[20]=M,w[21]=u):u=w[21];let W=u;e:{let e;if(L){let e;w[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(rx,{}),w[22]=e):e=w[22],p=e;break e}let t=!!M,n=S?.id,i="rev"===_?U:q;w[23]!==C||w[24]!==H||w[25]!==W||w[26]!==n||w[27]!==i||w[28]!==t?(e=(0,r.jsx)(dE,{events:C,fetchEventChildren:H,hasMoreEvents:t,selectedEventId:n,onLoadMore:W,onSelect:i}),w[23]=C,w[24]=H,w[25]=W,w[26]=n,w[27]=i,w[28]=t,w[29]=e):e=w[29],p=e}let K=p;w[30]!==S||w[31]!==$?(h=S?$(d.TIMELINE_ITEM_I18N_KEY_MAPPING[S.documentVariantType][S.type],{context:"timestamp",timestamp:new Date(S.timestamp),formatParams:dD}):$("timeline.latest-revision"),w[30]=S,w[31]=$,w[32]=h):h=w[32];let Y=h;w[33]!==S||w[34]!==C||w[35]!==$?(g=S?$(d.TIMELINE_ITEM_I18N_KEY_MAPPING[S.documentVariantType][S.type],{context:"timestamp",timestamp:new Date(S.timestamp),formatParams:dD}):C.length>0?$("timeline.since-version-missing"):$("timeline.no-previous-events"),w[33]=S,w[34]=C,w[35]=$,w[36]=g):g=w[36];let X="rev"===_?Y:g;w[37]!==D?(f={"timeline-menu":D},w[37]=D,w[38]=f):f=w[38];let J=f,Q=R&&K,Z=R?"timeline-menu-close-button":"timeline-menu-open-button",ee=V||!C.length,et=R?G:N;return w[39]===Symbol.for("react.memo_cache_sentinel")?(x={maxWidth:"100%"},w[39]=x):x=w[39],w[40]!==X||w[41]!==V||w[42]!==$?(b=V?$("timeline.loading-history"):X,w[40]=X,w[41]=V,w[42]=$,w[43]=b):b=w[43],w[44]!==R||w[45]!==Z||w[46]!==ee||w[47]!==et||w[48]!==b?(y=(0,r.jsx)(ej.Flex,{width:"fill",children:(0,r.jsx)(ev.Button,{"data-testid":Z,disabled:ee,mode:"ghost",onClick:et,ref:k,selected:R,width:"fill",tooltipProps:null,justify:"space-between",style:x,iconRight:m.ChevronDownIcon,text:b})}),w[44]=R,w[45]=Z,w[46]=ee,w[47]=et,w[48]=b,w[49]=y):y=w[49],w[50]!==R||w[51]!==I||w[52]!==Q||w[53]!==y?(v=(0,r.jsx)(dk,{"data-testid":"timeline-menu",constrainSize:!0,content:Q,"data-ui":"versionMenu",open:R,placement:I,matchReferenceWidth:!0,portal:!0,ref:F,children:y}),w[50]=R,w[51]=I,w[52]=Q,w[53]=y,w[54]=v):v=w[54],w[55]!==J||w[56]!==v?(j=(0,r.jsx)(ej.PortalProvider,{__unstable_elements:J,children:v}),w[55]=J,w[56]=v,w[57]=j):j=w[57],j}let dA=(0,e_.styled)(d.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,dM=(0,e_.styled)(ej.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`,dV=(0,e_.styled)(ej.Flex)`
  width: 100%;
  position: absolute;
  bottom: -4px;
`,dL={diff:null,loading:!0,error:null},dz=()=>{let e,t,n,i,l,o,a,c,p,m,h,g=(0,s.c)(31),{documentId:f,schemaType:x,editState:b,displayed:y}=iM(),{selectedPerspective:v,selectedPerspectiveName:j,selectedReleaseId:w}=(0,d.usePerspective)(),{t:S}=(0,d.useTranslation)(C);g[0]!==y||g[1]!==b?.published?(e=(0,eI.diffInput)((0,eI.wrap)(b?.published??{},{author:""}),(0,eI.wrap)(y??{},{author:""})),g[0]=y,g[1]=b?.published,g[2]=e):e=g[2];let _=e;return(!w||b?.version)&&("drafts"!==v||b?.draft)&&"published"!==j&&y?._rev?(g[3]!==S?(t=S("events.compare-with-published.title"),g[3]=S,g[4]=t):t=g[4],g[5]!==t?(n=(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:t}),g[5]=t,g[6]=n):n=g[6],g[7]!==v?(i=(0,d.isReleaseDocument)(v)?v.metadata?.title:"draft",g[7]=v,g[8]=i):i=g[8],g[9]!==i?(l={version:i},g[9]=i,g[10]=l):l=g[10],g[11]!==S||g[12]!==l?(o=(0,r.jsx)(ej.Text,{size:1,muted:!0,children:(0,r.jsx)(d.Translate,{i18nKey:"events.compare-with-published.description",t:S,values:l})}),g[11]=S,g[12]=l,g[13]=o):o=g[13],g[14]!==n||g[15]!==o?(a=(0,r.jsx)(ej.Card,{borderBottom:!0,paddingBottom:3,children:(0,r.jsxs)(ej.Stack,{space:3,paddingTop:1,children:[n,o]})}),g[14]=n,g[15]=o,g[16]=a):a=g[16],g[17]!==y||g[18]!==f||g[19]!==_||g[20]!==x?(c={documentId:f,schemaType:x,rootDiff:_,isComparingCurrent:!0,FieldWrapper:dN,value:y,showFromValue:!0},g[17]=y,g[18]=f,g[19]=_,g[20]=x,g[21]=c):c=g[21],g[22]!==_||g[23]!==x?(p=(0,r.jsx)(ej.Box,{paddingY:1,children:(0,r.jsx)(d.ChangeList,{diff:_,schemaType:x})}),g[22]=_,g[23]=x,g[24]=p):p=g[24],g[25]!==c||g[26]!==p?(m=(0,r.jsx)(u.DocumentChangeContext.Provider,{value:c,children:p}),g[25]=c,g[26]=p,g[27]=m):m=g[27],g[28]!==a||g[29]!==m?(h=(0,r.jsxs)(ej.Stack,{space:2,marginBottom:3,children:[a,m]}),g[28]=a,g[29]=m,g[30]=h):h=g[30],h):null};function dO(e){let t,n,i,l,o,c,u,p,m,h,g,f,x,b,y,v,j,w,S,C=(0,s.c)(83),{showChanges:_}=e,{documentId:I,schemaType:T,timelineError:R,value:P,formState:E}=iM(),[k,D]=(0,a.useState)(null),{events:F,revision:A,sinceRevision:M,getChangesList:V}=(0,d.useEvents)(),L=!A?.revisionId;C[0]!==V?(t=V(),C[0]=V,C[1]=t):t=C[1];let z=t,{diff:O,loading:B,error:H}=(0,eP.useObservable)(z,dL),{t:$}=(0,d.useTranslation)("studio");C[2]!==O||C[3]!==I||C[4]!==E?.readOnly||C[5]!==L||C[6]!==T||C[7]!==P?(n=()=>({documentId:I,schemaType:T,FieldWrapper:dB,rootDiff:O,isComparingCurrent:L&&!E?.readOnly,value:P,showFromValue:!0}),C[2]=O,C[3]=I,C[4]=E?.readOnly,C[5]=L,C[6]=T,C[7]=P,C[8]=n):n=C[8],C[9]!==n?(i=n(),C[9]=n,C[10]=i):i=C[10];let N=i;e:{let e,t,n;if(!F){let e;C[11]===Symbol.for("react.memo_cache_sentinel")?(e=[null,null],C[11]=e):e=C[11],l=e;break e}C[12]!==F||C[13]!==M?.revisionId?(e=F.find(e=>e.id===M?.revisionId)||null,C[12]=F,C[13]=M?.revisionId,C[14]=e):e=C[14],C[15]!==F||C[16]!==A?.revisionId?(t=F.find(e=>e.id===A?.revisionId)||F[0],C[15]=F,C[16]=A?.revisionId,C[17]=t):t=C[17],C[18]!==e||C[19]!==t?(n=[e,t],C[18]=e,C[19]=t,C[20]=n):n=C[20],l=n}let[G,U]=l;t:{let e;if(!U){let e;C[21]!==F?(e=F.slice(1),C[21]=F,C[22]=e):e=C[22],o=e;break t}if(C[23]!==F||C[24]!==U){let t;C[26]!==U?(t=e=>"parentId"in U&&"parentId"in e&&e.parentId===U.parentId||"parentId"in e&&U.id===e.parentId?{...e,parentId:void 0}:e,C[26]=U,C[27]=t):t=C[27],e=F.slice(F.indexOf(U)+1).map(t),C[23]=F,C[24]=U,C[25]=e}else e=C[25];o=e}let q=o;if(!F.length){let e,t,n,i,l;return C[28]!==$?(e=$("timeline.error.no-document-history-title"),C[28]=$,C[29]=e):e=C[29],C[30]!==e?(t=(0,r.jsx)(ej.Text,{size:1,weight:"medium",children:e}),C[30]=e,C[31]=t):t=C[31],C[32]!==$?(n=$("timeline.error.no-document-history-description"),C[32]=$,C[33]=n):n=C[33],C[34]!==n?(i=(0,r.jsx)(ej.Text,{muted:!0,size:1,children:n}),C[34]=n,C[35]=i):i=C[35],C[36]!==t||C[37]!==i?(l=(0,r.jsx)(ej.Box,{paddingX:2,children:(0,r.jsxs)(ej.Stack,{padding:3,space:3,children:[t,i]})}),C[36]=t,C[37]=i,C[38]=l):l=C[38],l}C[39]===Symbol.for("react.memo_cache_sentinel")?(c={position:"relative"},C[39]=c):c=C[39],C[40]!==$?(u=$("changes.inspector.from-label"),C[40]=$,C[41]=u):u=C[41],C[42]!==u?(p=(0,r.jsx)(ej.Text,{size:1,muted:!0,children:u}),C[42]=u,C[43]=p):p=C[43];let W=G||null;C[44]!==q||C[45]!==W?(m=(0,r.jsx)(dF,{event:W,events:q,mode:"since",placement:"bottom-start"}),C[44]=q,C[45]=W,C[46]=m):m=C[46],C[47]!==$?(h=$("changes.inspector.to-label"),C[47]=$,C[48]=h):h=C[48],C[49]!==h?(g=(0,r.jsx)(ej.Text,{size:1,muted:!0,children:h}),C[49]=h,C[50]=g):g=C[50];let K=U||null;return C[51]!==F||C[52]!==K?(f=(0,r.jsx)(dF,{event:K,events:F,mode:"rev",placement:"bottom-end"}),C[51]=F,C[52]=K,C[53]=f):f=C[53],C[54]!==m||C[55]!==g||C[56]!==f||C[57]!==p?(x=(0,r.jsxs)(dM,{paddingX:2,paddingBottom:2,children:[p,m,g,f]}),C[54]=m,C[55]=g,C[56]=f,C[57]=p,C[58]=x):x=C[58],C[59]!==B||C[60]!==$?(b=B&&(0,r.jsx)(eT.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,r.jsxs)(dV,{justify:"center",align:"center",gap:2,children:[(0,r.jsx)(ej.Text,{muted:!0,size:0,children:$("changes.loading-changes")}),(0,r.jsx)(ej.Spinner,{size:0})]})}),C[59]=B,C[60]=$,C[61]=b):b=C[61],C[62]!==x||C[63]!==b?(y=(0,r.jsxs)(ej.Box,{padding:3,style:c,children:[x,b]}),C[62]=x,C[63]=b,C[64]=y):y=C[64],C[65]!==H||C[66]!==N||C[67]!==A?.loading||C[68]!==T||C[69]!==_||C[70]!==G||C[71]!==M?.loading||C[72]!==R||C[73]!==U?.id?(v=_&&(0,r.jsx)(dH,{documentContext:N,error:R||H,loading:A?.loading||M?.loading||!1,schemaType:T,sameRevisionSelected:G?.id===U?.id,sinceEvent:G}),C[65]=H,C[66]=N,C[67]=A?.loading,C[68]=T,C[69]=_,C[70]=G,C[71]=M?.loading,C[72]=R,C[73]=U?.id,C[74]=v):v=C[74],C[75]!==v?(j=(0,r.jsx)(dA,{"data-ui":"Scroller",ref:D,children:(0,r.jsx)(ej.Box,{flex:1,paddingX:3,height:"fill",children:v})}),C[75]=v,C[76]=j):j=C[76],C[77]!==k||C[78]!==j?(w=(0,r.jsx)(ej.Card,{flex:1,paddingX:2,paddingY:2,children:(0,r.jsx)(ej.BoundaryElementProvider,{element:k,children:j})}),C[77]=k,C[78]=j,C[79]=w):w=C[79],C[80]!==y||C[81]!==w?(S=(0,r.jsxs)(ej.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[y,w]}),C[80]=y,C[81]=w,C[82]=S):S=C[82],S}function dB(e){return e.path.length>0?(0,r.jsx)(d.ChangeFieldWrapper,{...e}):e.children}function dH(e){let t,n,i=(0,s.c)(15),{error:l,documentContext:o,loading:a,schemaType:c,sameRevisionSelected:p,sinceEvent:m}=e;if(l){let e,t,n;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(dz,{}),i[0]=e):e=i[0],i[1]!==l||i[2]!==m?.type?(t=m?.type!=="historyCleared"&&(0,r.jsx)(d.ChangesError,{error:l}),i[1]=l,i[2]=m?.type,i[3]=t):t=i[3],i[4]!==t?(n=(0,r.jsxs)(r.Fragment,{children:[e,t]}),i[4]=t,i[5]=n):n=i[5],n}if(a){let e;return i[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d.LoadingBlock,{showText:!0}),i[6]=e):e=i[6],e}if(p){let e;return i[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d$,{}),i[7]=e):e=i[7],e}if(!o.rootDiff){let e;return i[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(eT.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,r.jsx)(d.NoChanges,{})}),i[8]=e):e=i[8],e}return i[9]!==o.rootDiff||i[10]!==c?(t=(0,r.jsx)(ej.Box,{paddingY:1,children:(0,r.jsx)(d.ChangeList,{diff:o.rootDiff,schemaType:c})}),i[9]=o.rootDiff,i[10]=c,i[11]=t):t=i[11],i[12]!==o||i[13]!==t?(n=(0,r.jsx)(u.DocumentChangeContext.Provider,{value:o,children:t}),i[12]=o,i[13]=t,i[14]=n):n=i[14],n}function d$(){let e,t,n,i,l,o,a,c=(0,s.c)(12),{t:u}=(0,d.useTranslation)("");return c[0]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:1},t={opacity:0},n={delay:.2,duration:.2},c[0]=e,c[1]=t,c[2]=n):(e=c[0],t=c[1],n=c[2]),c[3]!==u?(i=u("changes.same-revision-selected-title"),c[3]=u,c[4]=i):i=c[4],c[5]!==i?(l=(0,r.jsx)(ej.Text,{size:1,weight:"medium",as:"h3",children:i}),c[5]=i,c[6]=l):l=c[6],c[7]!==u?(o=(0,r.jsx)(ej.Text,{as:"p",size:1,muted:!0,children:(0,r.jsx)(d.Translate,{i18nKey:"changes.same-revision-selected-description",t:u})}),c[7]=u,c[8]=o):o=c[8],c[9]!==l||c[10]!==o?(a=(0,r.jsx)(eT.motion.div,{animate:e,initial:t,transition:n,children:(0,r.jsxs)(ej.Stack,{space:3,paddingTop:2,children:[l,o]})}),c[9]=l,c[10]=o,c[11]=a):a=c[11],a}function dN(e){return e.children}let dG=(0,e_.styled)(d.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function dU(e){let t,n,i,l=(0,s.c)(21),{showList:o}=e,[c,u]=(0,a.useState)(null),[p,m]=(0,a.useState)(0),{setTimelineRange:h}=iM();l[0]!==p?(t=e=>{!p&&e&&(m(e.clientHeight?e.clientHeight-1:0),u(e))},l[0]=p,l[1]=t):t=l[1];let g=t,{events:f,nextCursor:x,loading:b,error:y,revision:v,loadMoreEvents:j,findRangeForRevision:w,expandEvent:S}=(0,d.useEvents)(),{t:C}=(0,d.useTranslation)("studio"),_=(0,ew.useToast)();l[2]!==w||l[3]!==h||l[4]!==C||l[5]!==_?(n=e=>{try{(()=>{if((0,d.isDeleteDocumentVersionEvent)(e)||(0,d.isDeleteDocumentGroupEvent)(e)||(0,d.isUnpublishDocumentEvent)(e)||(0,d.isScheduleDocumentVersionEvent)(e)||(0,d.isUnscheduleDocumentVersionEvent)(e))return console.error("Event is not selectable");let[t,n]=w(e.id);h(t,n)})()}catch(e){_.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},l[2]=w,l[3]=h,l[4]=C,l[5]=_,l[6]=n):n=l[6];let I=n,T=b&&!f.length;return l[7]!==y||l[8]!==f||l[9]!==S||l[10]!==g||l[11]!==T||l[12]!==p||l[13]!==j||l[14]!==b||l[15]!==x||l[16]!==v?.revisionId||l[17]!==c||l[18]!==I||l[19]!==o?(i=(0,r.jsx)(ej.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,r.jsx)(ej.Card,{flex:1,padding:2,paddingTop:0,children:y?(0,r.jsx)(rx,{}):(0,r.jsx)(ej.BoundaryElementProvider,{element:c,children:(0,r.jsxs)(dG,{"data-ui":"Scroller",ref:g,children:[p&&o&&!T?(0,r.jsx)(dE,{events:f,fetchEventChildren:S,hasMoreEvents:!!x,selectedEventId:v?.revisionId||f[0]?.id,onLoadMore:j,onSelect:I,listMaxHeight:`${p}px`}):null,b&&(0,r.jsx)(d.LoadingBlock,{})]})})})}),l[7]=y,l[8]=f,l[9]=S,l[10]=g,l[11]=T,l[12]=p,l[13]=j,l[14]=b,l[15]=x,l[16]=v?.revisionId,l[17]=c,l[18]=I,l[19]=o,l[20]=i):i=l[20],i}let dq=(0,e_.styled)(d.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function dW(e){let t,n,i,l,o=(0,s.c)(20),{showList:c}=e,{timelineError:u,setTimelineRange:p,timelineStore:m}=iM(),{selectedReleaseId:h}=(0,d.usePerspective)(),[g,f]=(0,a.useState)(null),[x,b]=(0,a.useState)(0);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{e?.clientHeight&&(b(e.clientHeight-1),f(e))},o[0]=t):t=o[0];let y=t,v=(0,d.useTimelineSelector)(m,dJ),j=(0,d.useTimelineSelector)(m,dX),w=(0,d.useTimelineSelector)(m,dY),S=(0,d.useTimelineSelector)(m,dK),{t:C}=(0,d.useTranslation)("studio"),_=(0,ew.useToast)();o[1]!==p||o[2]!==C||o[3]!==m||o[4]!==_?(n=e=>{try{(()=>{let[t,n]=m?.findRangeForRev(e)||[null,null];p(t,n)})()}catch(e){_.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},o[1]=p,o[2]=C,o[3]=m,o[4]=_,o[5]=n):n=o[5];let I=n;o[6]!==S||o[7]!==m?(i=()=>{S||m?.loadMore()},o[6]=S,o[7]=m,o[8]=i):i=o[8];let T=i;return o[9]!==v||o[10]!==T||o[11]!==w||o[12]!==x||o[13]!==j||o[14]!==g||o[15]!==I||o[16]!==h||o[17]!==c||o[18]!==u?(l=(0,r.jsx)(ej.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,r.jsx)(ej.Card,{flex:1,padding:2,paddingTop:0,children:u||h?(0,r.jsx)(rx,{versionError:!!h}):(0,r.jsx)(ej.BoundaryElementProvider,{element:g,children:(0,r.jsx)(dq,{"data-ui":"Scroller",ref:y,children:x&&c?(0,r.jsx)(rf,{chunks:v,hasMoreChunks:w,lastChunk:j,onLoadMore:T,onSelect:I,listMaxHeight:`${x}px`}):null})})})}),o[9]=v,o[10]=T,o[11]=w,o[12]=x,o[13]=j,o[14]=g,o[15]=I,o[16]=h,o[17]=c,o[18]=u,o[19]=l):l=o[19],l}function dK(e){return e.isLoading}function dY(e){return e.hasMoreChunks}function dX(e){return e.realRevChunk}function dJ(e){return e.chunks}let dQ=(0,e_.styled)(ej.Flex)`
  opacity: 0;
  transition: opacity 200ms;
  &[data-ready] {
    opacity: 1;
  }
`,dZ=["history","review"],d0={error:m.ErrorOutlineIcon,warning:m.WarningOutlineIcon,info:m.InfoOutlineIcon},d1={error:"critical",warning:"caution",info:"primary"};function d2(e){let t,n,i,l,o=(0,s.c)(17),{marker:d,onOpen:c,schemaType:u,value:p}=e;o[0]!==d.path||o[1]!==c?(t=()=>c(d.path),o[0]=d.path,o[1]=c,o[2]=t):t=o[2];let m=t,[h,g]=(0,a.useState)(null),f=d0[d.level];return o[3]!==h?(n=h&&(0,r.jsx)(ej.Card,{padding:3,radius:2,tone:"critical",children:(0,r.jsx)(ej.Text,{size:1,children:h.error.message})}),o[3]=h,o[4]=n):n=o[4],o[5]!==f||o[6]!==h||o[7]!==m||o[8]!==d.level||o[9]!==d.message||o[10]!==d.path||o[11]!==u||o[12]!==p?(i=!h&&(0,r.jsx)(ej.Card,{__unstable_focusRing:!0,as:"button",onClick:m,padding:3,radius:2,tone:d1[d.level],children:(0,r.jsxs)(ej.Flex,{align:"flex-start",gap:3,children:[(0,r.jsx)(ej.Box,{flex:"none",children:(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(f,{})})}),(0,r.jsxs)(ej.Stack,{flex:1,space:2,children:[(0,r.jsx)(d3,{path:d.path,schemaType:u,value:p}),(0,r.jsx)(ej.Text,{muted:!0,size:1,children:d.message})]})]})}),o[5]=f,o[6]=h,o[7]=m,o[8]=d.level,o[9]=d.message,o[10]=d.path,o[11]=u,o[12]=p,o[13]=i):i=o[13],o[14]!==n||o[15]!==i?(l=(0,r.jsxs)(ev.ErrorBoundary,{onCatch:g,children:[n,i]}),o[14]=n,o[15]=i,o[16]=l):l=o[16],l}function d3(e){let t,n,i,l=(0,s.c)(8),{path:o,schemaType:a,value:c}=e;e:{try{let e;l[0]!==o||l[1]!==a||l[2]!==c?(e=function(e){let{path:t,schemaType:n,value:i}=e,l=[],o=n,r=i;for(let e of t){if("string"==typeof e){if(!(0,d.isRecord)(r)&&void 0!==r)throw Error(`Parent value is not an object, cannot get path segment: .${e}`);if("object"!==o.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${e}`);r=r?.[e];let t=o.fields.find(t=>t.name===e);if(!t)return l.push({name:e}),l;o=t.type,l.push(o);continue}if("number"==typeof e){if(!(0,d.isArray)(r)&&void 0!==r)throw Error(`Parent value is not an array, cannot get path segment: [${e}]`);if("array"!==o.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${e}]`);r=r?.[e];let t=o.of.find(e=>"string"==typeof r?"string"===e.jsonType:"number"==typeof r?"number"===e.jsonType:"boolean"==typeof r?"boolean"===e.jsonType:!!(0,d.isRecord)(r)&&e.name===r?._type);if(!t)throw Error(`Item type not found: [${e}]`);o=t,l.push(o);continue}if((0,d.isRecord)(e)&&e._key){if(typeof r>"u")return l;if(!(0,d.isArray)(r))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${e}]`);if("array"!==o.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${e}`);if(typeof(r=(r??[]).find(t=>(0,d.isRecord)(t)&&t._key===e._key))>"u")return l;if(!(0,d.isRecord)(r))throw Error(`Array item not found: [_key == ${e._key}]`);let t=o.of.find(e=>(0,d.isRecord)(r)&&e.name===r?._type);if(!t)throw Error(`Array item type not found: .${r?._type}`);o=t,l.push(o);continue}throw Error(`Invalid path segment: ${JSON.stringify(e)}`)}return l}({path:o,schemaType:a,value:c}),l[0]=o,l[1]=a,l[2]=c,l[3]=e):e=l[3],t=e;break e}catch(e){console.error(e)}t=null}let u=t;return u?.length?(l[4]!==u?(n=u.map(d4),l[4]=u,l[5]=n):n=l[5],l[6]!==n?(i=(0,r.jsx)(ej.Text,{size:1,children:n}),l[6]=n,l[7]=i):i=l[7],i):null}function d4(e,t){return(0,r.jsxs)(a.Fragment,{children:[t>0&&(0,r.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,r.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t)}function d5(e){return{level:e.level,message:e.message,path:e.path}}let d6={},d8=eE.route.create("/",[eE.route.intents("/intent"),eE.route.create("/edit/:type/:editDocumentId",[eE.route.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),eE.route.create({path:"/:panes",children:[eE.route.create("/:action",eE.route.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,l]=n.match(d7)||[];if(!e){n=n.slice(1);continue}let o=l&&function(e){try{return JSON.parse(e)}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(l);t.push({id:i,payload:o}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let t,[n,...i]=e.split(",");return t={id:n,params:d6,payload:void 0},i.reduce((e,t)=>{if(/^[a-z0-9]+=[^=]+/i.test(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(t)?e.payload=function(e){try{return e?(0,eE.decodeJsonParams)(e):void 0}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},t)});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{...(0,eM.omit)(t.params,d9),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(ct).join("|")).map(encodeURIComponent).join(";")}}}})]),d7=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,d9=["view","since","rev","inspect","comment"],ce=Boolean;function ct(e,t,n){let{payload:i,params:l={},id:o}=e,[r]=n,s=e===r,a=0!==t&&o===r.id,d=typeof i>"u"?void 0:(0,eE.encodeJsonParams)(i),c=Object.entries(l).filter(e=>{let[t,n]=e;return!!n&&(!!s||!(n===r.params?.[t]&&!d9.includes(t)))}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`);return[a?"":o].concat([c.length>0&&c,d].filter(ce).flat()).join(",")||","}let cn=[oK,oX,oO,oH,oV,on],ci=["delete","discardChanges"],cl=[du],co=[{name:"sanity/structure/validation",component:function(e){let t,n,i,l,o,a,c,u=(0,s.c)(23),{onClose:p}=e,{onFocus:m,onPathOpen:h,schemaType:g,validation:f,value:x,editState:b}=iM(),{t:y}=(0,d.useTranslation)("validation");u[0]!==m||u[1]!==h?(t=e=>{h(e),m(e)},u[0]=m,u[1]=h,u[2]=t):t=u[2];let v=t;u[3]!==b?(n=b&&b.version&&(0,d.isGoingToUnpublish)(b.version),u[3]=b,u[4]=n):n=u[4];let j=n;return u[5]!==y?(i=y("panel.close-button-aria-label"),u[5]=y,u[6]=i):i=u[6],u[7]!==y?(l=y("panel.title"),u[7]=y,u[8]=l):l=u[8],u[9]!==p||u[10]!==i||u[11]!==l?(o=(0,r.jsx)(iZ,{as:"header",closeButtonLabel:i,flex:"none",onClose:p,title:l}),u[9]=p,u[10]=i,u[11]=l,u[12]=o):o=u[12],u[13]!==v||u[14]!==j||u[15]!==g||u[16]!==y||u[17]!==f||u[18]!==x?(a=(0,r.jsx)(ej.Card,{flex:1,overflow:"auto",padding:3,children:j?(0,r.jsx)(ej.Box,{padding:2,children:(0,r.jsx)(ej.Text,{muted:!0,size:1,children:y("panel.unpublish-message")})}):(0,r.jsxs)(r.Fragment,{children:[0===f.length&&(0,r.jsx)(ej.Box,{padding:2,children:(0,r.jsx)(ej.Text,{muted:!0,size:1,children:y("panel.no-errors-message")})}),f.length>0&&(0,r.jsx)(ej.Stack,{space:2,children:f.map((e,t)=>(0,r.jsx)(d2,{marker:e,onOpen:v,schemaType:g,value:x},t))})]})}),u[13]=v,u[14]=j,u[15]=g,u[16]=y,u[17]=f,u[18]=x,u[19]=a):a=u[19],u[20]!==o||u[21]!==a?(c=(0,r.jsxs)(ej.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[o,a]}),u[20]=o,u[21]=a,u[22]=c):c=u[22],c},useMenuItem:function(e){let t,n,i,l,o,r,a=(0,s.c)(11),{documentType:c}=e,{t:u}=(0,d.useTranslation)("validation"),{selectedReleaseId:p}=(0,d.usePerspective)(),{value:h}=iM(),{validation:g}=(0,d.useValidationStatus)(h._id,c,p);a[0]!==g?(t=g.map(d5),a[0]=g,a[1]=t):t=a[1];let f=t,x=f.some(eS.isValidationError),b=f.some(eS.isValidationWarning);a[2]!==h?(n=(0,d.isGoingToUnpublish)(h),a[2]=h,a[3]=n):n=a[3];let y=n;e:{if(x){i=m.ErrorOutlineIcon;break e}if(b){i=m.WarningOutlineIcon;break e}i=m.CheckmarkCircleIcon}let v=i;t:{if(x){l="critical";break t}if(b){l="caution";break t}l="positive"}let j=l,w=0===f.length||y;return a[4]!==u?(o=u("panel.title"),a[4]=u,a[5]=o):o=a[5],a[6]!==v||a[7]!==w||a[8]!==o||a[9]!==j?(r={hidden:w,icon:v,title:o,tone:j,showAsAction:!0},a[6]=v,a[7]=w,a[8]=o,a[9]=j,a[10]=r):r=a[10],r}},{name:iU,useMenuItem:()=>{let{features:e}=iH(),{t}=(0,d.useTranslation)();return{hidden:!e.reviewChanges,icon:m.RestoreIcon,title:t("changes.title")}},component:function(e){let t,n,i,l,o,c,u,p,h,g,f,x,b,y,v,j,w,S,_,I,T,R,P,E,k,D,F,A=(0,s.c)(72),{params:M,setParams:V}=l_(),L=(0,d.useSource)(),[z,O]=(0,a.useState)(null),{t:B}=(0,d.useTranslation)(C),H=M?.inspect===iU,{selectedPerspective:$}=(0,d.usePerspective)();A[0]!==M?(t=(F=M?.changesInspectorTab)&&dZ.includes(F)?M.changesInspectorTab:dZ[0],A[0]=M,A[1]=t):t=A[1];let N=t;A[2]!==M||A[3]!==V?(n=e=>V({...M,changesInspectorTab:e,since:"history"===e?void 0:M?.since}),A[2]=M,A[3]=V,A[4]=n):n=A[4];let G=n;A[5]!==$||A[6]!==B?(i=(0,d.isReleaseDocument)($)?$.metadata.title:B("drafts"===$?"compare-versions.status.draft":"compare-versions.status.published"),A[5]=$,A[6]=B,A[7]=i):i=A[7];let U=i,q=H?"":void 0;A[8]!==B?(l=B("changes.tab.history"),A[8]=B,A[9]=l):l=A[9],A[10]!==G?(o=()=>G("history"),A[10]=G,A[11]=o):o=A[11];let W="history"===N;A[12]!==l||A[13]!==o||A[14]!==W?(c=(0,r.jsx)(ev.Tab,{"aria-controls":"history-panel",id:"history-tab",label:l,onClick:o,selected:W}),A[12]=l,A[13]=o,A[14]=W,A[15]=c):c=A[15],A[16]!==B?(u=B("changes.tab.review-changes"),A[16]=B,A[17]=u):u=A[17],A[18]!==G?(p=()=>G("review"),A[18]=G,A[19]=p):p=A[19];let K="review"===N;A[20]!==K||A[21]!==u||A[22]!==p?(h=(0,r.jsx)(ev.Tab,{"aria-controls":"review-changes-panel",id:"changes-tab",label:u,onClick:p,selected:K}),A[20]=K,A[21]=u,A[22]=p,A[23]=h):h=A[23],A[24]!==h||A[25]!==c?(g=(0,r.jsxs)(ej.TabList,{space:1,flex:1,children:[c,h]}),A[24]=h,A[25]=c,A[26]=g):g=A[26],A[27]!==B?(f=B("changes.action.close-label"),A[27]=B,A[28]=f):f=A[28];let Y=e.onClose;A[29]!==B?(x=B("document-inspector.close-button.tooltip"),A[29]=B,A[30]=x):x=A[30],A[31]!==x?(b={content:x},A[31]=x,A[32]=b):b=A[32],A[33]!==e.onClose||A[34]!==f||A[35]!==b?(y=(0,r.jsx)(ev.Button,{"aria-label":f,icon:m.CloseIcon,mode:"bleed",onClick:Y,tooltipProps:b}),A[33]=e.onClose,A[34]=f,A[35]=b,A[36]=y):y=A[36],A[37]!==g||A[38]!==y?(v=(0,r.jsx)(ej.Card,{paddingBottom:1,children:(0,r.jsxs)(ej.Flex,{align:"center",padding:3,gap:2,children:[g,y]})}),A[37]=g,A[38]=y,A[39]=v):v=A[39],A[40]!==B?(j=(0,r.jsx)(ej.Box,{flex:1,padding:1,children:(0,r.jsx)(ej.Text,{size:1,children:(0,r.jsx)(d.Translate,{t:B,i18nKey:"changes.banner.tooltip"})})}),A[40]=B,A[41]=j):j=A[41],A[42]===Symbol.for("react.memo_cache_sentinel")?(w=(0,r.jsx)(ej.Text,{size:0,muted:!0,children:(0,r.jsx)(m.InfoOutlineIcon,{fontSize:1})}),A[42]=w):w=A[42],A[43]!==z||A[44]!==j?(S=(0,r.jsx)(ev.Tooltip,{portal:!0,placement:"bottom-end",boundaryElement:z,content:j,children:w}),A[43]=z,A[44]=j,A[45]=S):S=A[45],A[46]!==U?(_={perspective:U},A[46]=U,A[47]=_):_=A[47],A[48]!==B||A[49]!==_?(I=(0,r.jsx)(ej.Text,{size:0,muted:!0,children:(0,r.jsx)(d.Translate,{t:B,values:_,i18nKey:"changes.banner.description"})}),A[48]=B,A[49]=_,A[50]=I):I=A[50],A[51]!==S||A[52]!==I?(T=(0,r.jsx)(ej.Card,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,r.jsxs)(ej.Flex,{gap:2,align:"flex-start",children:[S,I]})}),A[51]=S,A[52]=I,A[53]=T):T=A[53];let X="history"!==N;A[54]!==N||A[55]!==L.beta?.eventsAPI?.documents?(R=L.beta?.eventsAPI?.documents?(0,r.jsx)(dU,{showList:"history"===N}):(0,r.jsx)(dW,{showList:"history"===N}),A[54]=N,A[55]=L.beta?.eventsAPI?.documents,A[56]=R):R=A[56],A[57]!==X||A[58]!==R?(P=(0,r.jsx)(ew.TabPanel,{"aria-labelledby":"history-tab",height:"fill",hidden:X,id:"history-panel",children:R}),A[57]=X,A[58]=R,A[59]=P):P=A[59];let J="review"!==N;return A[60]!==N||A[61]!==L.beta?.eventsAPI?.documents?(E=L.beta?.eventsAPI?.documents?(0,r.jsx)(r.Fragment,{children:"review"===N?(0,r.jsx)(dO,{showChanges:"review"===N}):null}):(0,r.jsx)(dx,{showChanges:"review"===N}),A[60]=N,A[61]=L.beta?.eventsAPI?.documents,A[62]=E):E=A[62],A[63]!==J||A[64]!==E?(k=(0,r.jsx)(ew.TabPanel,{"aria-labelledby":"review-tab",hidden:J,id:"review-panel",height:"fill",children:E}),A[63]=J,A[64]=E,A[65]=k):k=A[65],A[66]!==v||A[67]!==T||A[68]!==P||A[69]!==q||A[70]!==k?(D=(0,r.jsxs)(dQ,{direction:"column",padding:0,height:"fill","data-ready":q,ref:O,children:[v,T,P,k]}),A[66]=v,A[67]=T,A[68]=P,A[69]=q,A[70]=k,A[71]=D):D=A[71],D},onClose:({params:e})=>({params:{...e,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:e})=>({params:{...e,since:"@lastPublished"}})}],cr=(0,d.definePlugin)(t=>{let n=t?.icon||m.MasterDetailIcon;return{name:"sanity/structure",document:{actions:(e,t)=>{let n=Array.from(new Set([...e,...cn])),i=n.filter(e=>ci.includes(e.action)),l=n.filter(e=>!ci.includes(e.action));return"published"===t.versionType?[...[...l].sort((e,t)=>"unpublish"===e.action?-1:+("unpublish"===t.action)),...i]:[...l,...i]},badges:e=>Array.from(new Set([...e,...cl])),inspectors:e=>Array.from(new Set([...e,...co]))},tools:[{name:t?.name||"structure",title:t?.title||"Structure",icon:n,component:(0,a.lazy)(()=>e.A(962237)),canHandleIntent:(e,t)=>{var n,i;return"create"===e?"type"in(n=t)&&(!("template"in n)||{template:!0}):"edit"===e&&"id"in(i=t)&&(!("mode"in i)||{mode:"structure"===i.mode})},getIntentState:dh,controlsDocumentTitle:!0,options:t,router:d8,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[_]}}});var cs=Object.freeze({__proto__:null,default:sj}),ca=Object.freeze({__proto__:null,default:dc});e.s(["BackLink",()=>s_,"LOADING_PANE",()=>lQ,"LoadingPane",()=>iA,"Pane",()=>n8,"PaneContent",()=>ie,"PaneHeader",()=>iv,"PaneHeaderActions",()=>ao,"PaneItem",()=>am,"PaneLayout",()=>iR,"StructureToolPane",()=>sA,"_DEBUG",()=>!1,"setActivePanes",()=>dm,"structureTool",()=>cr,"useDocumentLastRev",()=>st,"usePane",()=>n9,"usePaneLayout",()=>n3,"useStructureTool",()=>iH],126047)}]);